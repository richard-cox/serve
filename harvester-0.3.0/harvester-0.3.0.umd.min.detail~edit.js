(("undefined"!==typeof self?self:this)["webpackJsonpharvester_0_3_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_0_3_0"]||[]).push([[0],{"0194":function(e,t,a){"use strict";a("0aeb")},"09c6":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-container",class:{"highlight-border":e.showHighlightBorder}},[a("div",{staticClass:"card-wrap"},[a("div",{staticClass:"card-title"},[e._t("title",(function(){return[e._v(" "+e._s(e.title)+" ")]}))],2),a("hr"),a("div",{staticClass:"card-body"},[e._t("body",(function(){return[e._v(" "+e._s(e.content)+" ")]}))],2),e.showActions?a("div",{staticClass:"card-actions"},[e._t("actions",(function(){return[a("button",{staticClass:"btn role-primary",on:{click:e.buttonAction}},[e._v(" "+e._s(e.buttonText)+" ")])]}))],2):e._e()])])},n=[],s=a("8bbf"),i=a.n(s),o=i.a.extend({name:"Card",props:{title:{type:String,default:""},content:{type:String,default:""},buttonAction:{type:Function,default:function(){}},buttonText:{type:String,default:"go"},showHighlightBorder:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0}}}),l=o,u=(a("86a7"),a("d802")),d=Object(u["a"])(l,r,n,!1,null,null,null),c=d.exports},"0aeb":function(e,t,a){var r=a("f3cf");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("296e2a35",r,!0,{sourceMap:!1,shadowMode:!1})},"138a":function(e,t,a){"use strict";a("987f")},1741:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-name"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-type"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hec-container"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.dockerImage"),value:e.value.container,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.virtualMachine.volume.dockerImage"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.container,callback:function(t){e.$set(e.value,"container",t)},expression:"value.container"}})],1)],1),a("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hec-bus"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),options:e.InterfaceOption,mode:e.mode},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},n=[],s=a("d444"),i=a("53fe"),o=a("2aaa"),l=a("b12c"),u={name:"HarvesterEditContainer",components:{LabeledInput:s["a"],LabeledSelect:i["a"],InputOrDisplay:o["a"]},props:{mode:{type:String,default:"create"},value:{type:Object,required:!0}},data:function(){return{VOLUME_TYPE:l["e"],InterfaceOption:l["b"]}},watch:{"value.type":function(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())}},methods:{update:function(){this.$emit("update")}}},d=u,c=a("d802"),p=Object(c["a"])(d,r,n,!1,null,null,null);t["default"]=p.exports},1881:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("InputOrDisplay",{staticClass:"mb-20",attrs:{name:"CPU",value:e.cupDisplay,mode:e.mode}},[a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:"CPU",suffix:"C",delay:0,required:"",disabled:e.disabled,mode:e.mode},on:{input:e.change},model:{value:e.localCpu,callback:function(t){e.localCpu=t},expression:"localCpu"}})],1)],1),a("div",{staticClass:"col span-6"},[a("InputOrDisplay",{staticClass:"mb-20",attrs:{name:e.t("harvester.virtualMachine.input.memory"),value:e.memoryDisplay,mode:e.mode}},[a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.memory"),mode:e.mode,"input-exponent":3,delay:0,increment:1024,"output-modifier":!0,disabled:e.disabled,required:""},on:{input:e.change},model:{value:e.localMemory,callback:function(t){e.localMemory=t},expression:"localMemory"}})],1)],1)])},n=[],s=a("2007"),i=a("2aaa"),o={name:"HarvesterEditCpuMemory",components:{UnitInput:s["a"],InputOrDisplay:i["a"]},props:{cpu:{type:Number,default:null},memory:{type:String,default:null},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data:function(){return{localCpu:this.cpu,localMemory:this.memory}},computed:{cupDisplay:function(){return"".concat(this.localCpu," C")},memoryDisplay:function(){return"".concat(this.localMemory," GiB")}},watch:{cpu:function(e){this.localCpu=e},memory:function(e){e&&!e.includes("null")&&(this.localMemory=e)}},methods:{change:function(){var e="";e=String(this.localMemory).includes("Gi")?this.localMemory:"".concat(this.localMemory,"Gi"),e.includes("null")&&(e=null),this.$emit("updateCpuMemory",this.localCpu,e)}}},l=o,u=a("d802"),d=Object(u["a"])(l,r,n,!1,null,null,null);t["a"]=d.exports},"1e85":function(e,t,a){var r=a("f605");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("7ad0503a",r,!0,{sourceMap:!1,shadowMode:!1})},2007:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("LabeledInput",e._b({ref:"value",attrs:{value:e.displayValue,type:"number",min:e.min,mode:e.mode,label:e.label,delay:e.delay,"label-key":e.labelKey,tooltip:e.tooltip,"tooltip-key":e.tooltipKey,required:e.required,placeholder:e.placeholder,"hide-arrows":e.hideArrows},on:{blur:function(t){return e.update(t.target.value)}},scopedSlots:e._u([{key:"suffix",fn:function(){return[e.displayUnit?a("div",{staticClass:"addon",class:{"with-tooltip":e.tooltip||e.tooltipKey}},[e._v(" "+e._s(e.displayUnit)+" ")]):e._e()]},proxy:!0}])},"LabeledInput",e.$attrs,!1))},n=[],s=a("67ab"),i=a("d444"),o=a("d6a6"),l={components:{LabeledInput:i["a"]},props:{outputAs:{type:String,default:"number"},outputModifier:{type:Boolean,default:!1},inputExponent:{type:Number,default:0},baseUnit:{type:String,default:"B"},hideArrows:{type:Boolean,default:!1},increment:{type:Number,default:1e3},suffix:{type:String,default:null},mode:{type:String,default:o["i"]},value:{type:[Number,String],default:null},label:{type:String,default:null},labelKey:{type:String,default:null},tooltip:{type:[String,Object],default:null},tooltipKey:{type:String,default:null},required:{type:Boolean,default:!1},min:{type:[Number,String],default:0},placeholder:{type:[String,Number],default:""},delay:{type:Number,default:0}},computed:{unit:function(){var e;return e=this.inputExponent>=0?s["b"][this.inputExponent]:s["a"][-1*this.inputExponent],1024===this.increment&&e&&(e+="i"),e},parsedValue:function(){return"string"===typeof this.value?Object(s["f"])(this.value):this.value},displayValue:function(){var e="";return(this.parsedValue||0===this.parsedValue)&&(e=Object(s["e"])(this.parsedValue,{increment:this.increment,addSuffix:!1,maxExponent:this.inputExponent,minExponent:this.inputExponent})),e},displayUnit:function(){return this.suffix?this.suffix:this.unit+this.baseUnit}},methods:{focus:function(){var e=this.$refs.value;e&&e.focus()},update:function(e){var t=""===e?null:e;this.outputModifier?t=null===t?null:"".concat(e).concat(this.unit):"string"===this.outputAs?t=null===t?"":"".concat(e):t&&(t=this.unit?Object(s["f"])("".concat(t).concat(this.unit)):parseInt(t)),this.$emit("input",t)}}},u=l,d=(a("f4f2"),a("d802")),c=Object(d["a"])(u,r,n,!1,null,"aff9cfe4",null);t["a"]=c.exports},23799:function(e,t,a){"use strict";a("8644")},"2aaa":function(e,t,a){"use strict";var r,n,s=a("8bbf"),i=a.n(s),o=a("d6a6"),l=i.a.component("InputOrDisplay",{render:function(e){return this.isView?e("div",{attrs:{class:"label"}},[e("div",{attrs:{class:"text-label"}},this.$slots.name?this.$slots.name:this.name),e("div",{attrs:{class:"value"}},this.$slots.value?this.$slots.value:this.displayValue)]):this.$slots.default},props:{name:{type:String,required:!0},value:{type:[Number,String,Array,void 0],default:""},mode:{type:String,default:"edit"}},computed:{isView:function(){return this.mode===o["o"]},displayValue:function(){return Array.isArray(this.value)&&0===this.value.length?"":this.value}}}),u=l,d=u,c=(a("0194"),a("d802")),p=Object(c["a"])(d,r,n,!1,null,"1eb849b8",null);t["a"]=p.exports},"2b47":function(e,t,a){var r=a("3748");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("2684a815",r,!0,{sourceMap:!1,shadowMode:!1})},"2bbb":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-a3a6f174]:after,.clearfix[data-v-a3a6f174]:before{content:" ";display:table}.clearfix[data-v-a3a6f174]:after{clear:both}.list-unstyled[data-v-a3a6f174]{margin:0;padding:0;list-style-type:none}.no-select[data-v-a3a6f174]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-a3a6f174]{resize:none}.hand[data-v-a3a6f174]{cursor:pointer;cursor:hand}.fixed[data-v-a3a6f174]{table-layout:fixed}.clip[data-v-a3a6f174]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-a3a6f174],.force-wrap[data-v-a3a6f174]{word-wrap:break-word}.force-wrap[data-v-a3a6f174]{white-space:normal}.bordered-section[data-v-a3a6f174]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-a3a6f174]{margin-bottom:20px;margin-top:20px}.box[data-v-a3a6f174]{position:relative}.title[data-v-a3a6f174]{display:flex}.title .state[data-v-a3a6f174]{font-size:16px}.remove[data-v-a3a6f174]{position:absolute;top:10px;right:10px;padding:0}.bootOrder[data-v-a3a6f174]{display:flex;align-items:center}.buttons[data-v-a3a6f174]{width:100%;display:flex;justify-content:flex-end}',""]),e.exports=t},"2fd6":function(e,t,a){"use strict";a("9d0c")},3748:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-0cb3f40c]:after,.clearfix[data-v-0cb3f40c]:before{content:" ";display:table}.clearfix[data-v-0cb3f40c]:after{clear:both}.list-unstyled[data-v-0cb3f40c]{margin:0;padding:0;list-style-type:none}.no-select[data-v-0cb3f40c]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-0cb3f40c]{resize:none}.hand[data-v-0cb3f40c]{cursor:pointer;cursor:hand}.fixed[data-v-0cb3f40c]{table-layout:fixed}.clip[data-v-0cb3f40c]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-0cb3f40c],.force-wrap[data-v-0cb3f40c]{word-wrap:break-word}.force-wrap[data-v-0cb3f40c]{white-space:normal}.bordered-section[data-v-0cb3f40c]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-0cb3f40c]{margin-bottom:20px;margin-top:20px}.footer[data-v-0cb3f40c]{width:100%;display:flex;justify-content:center}.banner[data-v-0cb3f40c]{margin-bottom:0}',""]),e.exports=t},"453f":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-65fb0620]:after,.clearfix[data-v-65fb0620]:before{content:" ";display:table}.clearfix[data-v-65fb0620]:after{clear:both}.list-unstyled[data-v-65fb0620]{margin:0;padding:0;list-style-type:none}.no-select[data-v-65fb0620]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-65fb0620]{resize:none}.hand[data-v-65fb0620]{cursor:pointer;cursor:hand}.fixed[data-v-65fb0620]{table-layout:fixed}.clip[data-v-65fb0620]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-65fb0620],.force-wrap[data-v-65fb0620]{word-wrap:break-word}.force-wrap[data-v-65fb0620]{white-space:normal}.bordered-section[data-v-65fb0620]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-65fb0620]{margin-bottom:20px;margin-top:20px}.yaml[data-v-65fb0620]{height:350px;overflow:auto}[data-v-65fb0620] .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-65fb0620] .resource-yaml .yaml-editor{flex:1;min-height:350px}[data-v-65fb0620] .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:350px}',""]),e.exports=t},"483e":function(e,t,a){"use strict";a("9a75")},"4b06":function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return f}));var r=a("7838"),n=a.n(r),s=a("9e74"),i=a.n(s),o=a("1832"),l=a("56a4"),u=a("b0bd"),d=a("6834"),c={package_update:!0,packages:["qemu-guest-agent"],runcmd:[["systemctl","enable","--now","qemu-guest-agent.service"]]},p={default:"qemu-guest-agent.service"},f=[{bus:"usb",name:"tablet",type:"tablet"}],v={EXISTING_ALL:"EXISTING_ALL",EXISTING_ONLY_ANNOTATION:"EXISTING_ANNOTATION",EXISTING_ONLY_CLOUD:"EXISTING_CLOUD"};t["c"]={methods:{getSSHValue:function(e){var t,a,r=this.$store.getters["harvester/all"](l["h"].SSH)||[];return(null===(t=r.find((function(t){return t.id===e})))||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.publicKey)||void 0},getOsType:function(e){var t,a;return null===(t=e.metadata)||void 0===t||null===(a=t.labels)||void 0===a?void 0:a[u["f"].OS]},getMatchQGA:function(e){var t=Object(o["e"])(c),a=!1;return d["b"].forEach((function(t){t.match&&(a=t.match.find((function(t){return t===e})))})),t.runcmd[0][3]=a?p[e]:p["default"],t},getSimilarRuncmd:function(e){var t=Object(o["e"])(c);return t.runcmd[0][3]="openSUSE"===e?p["default"]:p["suse"],t.runcmd[0]},hasInstallAgent:function(e,t,a){var r,s,i,o,l={},u=this.getMatchQGA(t);try{l=n.a.load(e)||{}}catch(d){return new Error("Function(hasInstallAgent) error"),a}return(null===(r=l)||void 0===r||null===(s=r.packages)||void 0===s?void 0:s.includes("qemu-guest-agent"))&&!(null===(i=l)||void 0===i||null===(o=i.runcmd)||void 0===o||!o.find((function(e){return Array.isArray(e)&&e.join("-")===u.runcmd[0].join("-")})))},isInstallUSBTablet:function(e){var t,a,r,n,s=null===e||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(r=a.domain)||void 0===r||null===(n=r.devices)||void 0===n?void 0:n.inputs;return!!Array.isArray(s)&&!!s.find((function(e){return i()(e,f[0])}))},isEfiEnabled:function(e){var t,a,r,n,s,i,o,l,u;return!(null===e||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(r=a.domain)||void 0===r||null===(n=r.features)||void 0===n||!n.smm||null===e||void 0===e||null===(s=e.template)||void 0===s||null===(i=s.spec)||void 0===i||null===(o=i.domain)||void 0===o||null===(l=o.firmware)||void 0===l||null===(u=l.bootloader)||void 0===u||!u.efi)},isSecureBoot:function(e){var t,a,r,n,s,i;return!(null===e||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(r=a.domain)||void 0===r||null===(n=r.firmware)||void 0===n||null===(s=n.bootloader)||void 0===s||null===(i=s.efi)||void 0===i||!i.secureBoot)},getSecretCloudData:function(e,t){var a,r,n=this.getSecret(e),s=null===n||void 0===n||null===(a=n.decodedData)||void 0===a?void 0:a.userdata,i=null===n||void 0===n||null===(r=n.decodedData)||void 0===r?void 0:r.networkdata;return{userData:s,networkData:i}},getSecret:function(e){var t,a,r,n,s,i,o=(null===e||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a||null===(r=a.volumes)||void 0===r||null===(n=r.find((function(e){return"cloudinitdisk"===e.name})))||void 0===n?void 0:n.cloudInitNoCloud)||{},u=this.$store.getters["harvester/all"](l["B"])||[],d=(null===o||void 0===o||null===(s=o.secretRef)||void 0===s?void 0:s.name)||(null===o||void 0===o||null===(i=o.networkDataSecretRef)||void 0===i?void 0:i.name),c=u.find((function(e){return e.metadata.name===d}));return c},getAccessCredentials:function(e){var t,a,r,n,s=this.$store.getters["harvester/all"](l["B"])||[],i=(null===e||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.accessCredentials)||[],o=JSON.parse((null===(r=e.template.metadata)||void 0===r||null===(n=r.annotations)||void 0===n?void 0:n[u["f"].DYNAMIC_SSHKEYS_NAMES])||"[]");return i.map((function(e){var t,a,r,n=e.userPassword?"userPassword":"sshPublicKey",i=null===(t=e[n])||void 0===t||null===(a=t.source)||void 0===a||null===(r=a.secret)||void 0===r?void 0:r.secretName,l=s.find((function(e){return e.metadata.name===i})),u={source:n,username:"",newPassword:"",users:[],sshkeys:[],secretName:i,secretRef:l};if(l)if("userPassword"===n){var d=Object.keys(null===l||void 0===l?void 0:l.data)[0],c=l.decodedData[d];u.username=d,u.newPassword=c}else{var p=e[n].propagationMethod.qemuGuestAgent.users,f=null===o||void 0===o?void 0:o[i];u.users=p,u.sshkeys=f}else u.secretRef=void 0;return u}))},getVolumeClaimTemplates:function(e){var t=[];try{t=JSON.parse(e.metadata.annotations[u["f"].VOLUME_CLAIM_TEMPLATE])}catch(a){new Error("Function: getVolumeClaimTemplates, ".concat(a))}return t},getRootImageId:function(e){var t,a,r,n=this.getVolumeClaimTemplates(e);return(null===(t=n[0])||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[u["f"].IMAGE_ID])||""},getSSHFromAnnotation:function(e){var t,a,r,n=(null===e||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[u["f"].SSH_NAMES])||"[]";return JSON.parse(n)},convertToJson:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};try{t=n.a.load(e)}catch(a){new Error("Function(convertToJson) error")}return t},getSSHFromUserData:function(e){var t;return(null===(t=this.convertToJson(e))||void 0===t?void 0:t.ssh_authorized_keys)||[]},compareSSHValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=/(\r\n\t|\n|\r\t)|(\s*)/gm;return e.replace(a,"")===t.replace(a,"")},mergeAllSSHs:function(e){var t=this,a=this.getSSHFromAnnotation(e),r=this.getSecretCloudData(e),n=r.userScript;if(!(null!==a&&void 0!==a&&a.length)<0&&!n)return[];var s=[],i=this.$store.getters["harvester/all"](l["h"].SSH)||[];s=(a||[]).map((function(e){var t=i.find((function(t){return t.id===e}));return t?{id:t.id,data:t,type:v.EXISTING_ALL}:{id:e,data:e,type:v.EXISTING_ONLY_ANNOTATION}}));var o=this.getSSHFromUserData(n);return o.map((function(e){var a=i.find((function(a){var r;return t.compareSSHValue(e,null===(r=a.spec)||void 0===r?void 0:r.publicKey)}));a&&!s.find((function(e){return e.id===a.id}))?s.push({id:a.id,data:a,type:v.EXISTING_ALL}):a||s.push({id:"Unknown",data:e,type:v.EXISTING_ONLY_CLOUD})})),s}}}},"5d46":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.rows,(function(t,r){return a("InfoBox",{key:r,staticClass:"infoBox"},[e.isView?e._e():a("button",{staticClass:"role-link remove-vol",attrs:{type:"button"},on:{click:function(a){return e.remove(t)}}},[a("i",{staticClass:"icon icon-2x icon-x"})]),a("h3",[e._v(" "+e._s(e.t("harvester.virtualMachine.network.title"))+" ")]),a("Base",{attrs:{rows:e.rows,mode:e.mode,"network-option":e.networkOption},on:{update:e.update},model:{value:e.rows[r],callback:function(t){e.$set(e.rows,r,t)},expression:"rows[i]"}})],1)})),e.isView?e._e():a("button",{staticClass:"btn btn-sm bg-primary",attrs:{type:"button"},on:{click:e.add}},[e._v(" "+e._s(e.t("harvester.virtualMachine.network.addNetwork"))+" ")])],2)},n=[],s=a("6583"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-name"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode,disabled:e.isDisabled},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-model"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.model"),value:e.value.model,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.model"),disabled:e.isDisabled,options:e.modelOption,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.model,callback:function(t){e.$set(e.value,"model",t)},expression:"value.model"}})],1)],1)]),a("div",{staticClass:"row",class:{"mb-20":!e.isMasquerade}},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-networkName"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.network"),value:e.value.networkName,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.network"),options:e.allNetworkOption,mode:e.mode,required:"",disabled:e.isDisabled},on:{input:e.updateNetworkName},model:{value:e.value.networkName,callback:function(t){e.$set(e.value,"networkName",t)},expression:"value.networkName"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-type"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.typeOption,mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),e.isMasquerade?e._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hen-macAddress"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.macAddress"),value:e.value.macAddress,mode:e.mode}},[a("LabeledInput",{attrs:{"label-key":"harvester.fields.macAddress",mode:e.mode,tooltip:e.t("harvester.virtualMachine.volume.macTip")},on:{input:e.update},model:{value:e.value.macAddress,callback:function(t){e.$set(e.value,"macAddress",t)},expression:"value.macAddress"}})],1)],1)])])},o=[],l=a("2aaa"),u=a("d444"),d=a("53fe"),c=a("1832"),p=a("d6a6"),f=a("6834"),v=[{label:"virtio",value:"virtio"},{label:"e1000",value:"e1000"},{label:"e1000e",value:"e1000e"},{label:"ne2k_pci",value:"ne2k_pci"},{label:"pcnet",value:"pcnet"},{label:"rtl8139",value:"rtl8139"}],m={name:"HarvesterEditNetwork",components:{LabeledInput:u["a"],LabeledSelect:d["a"],InputOrDisplay:l["a"]},props:{value:{type:Object,default:function(){return{}}},networkOption:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},mode:{type:String,default:"create"}},data:function(){var e=this.value.isPod;return e&&(this.value.networkName=f["a"]),{isMasquerade:e,hasManagementNetwork:!1}},computed:{isDisabled:function(){return this.isMasquerade&&!this.value.newCreateId&&!this.isCreate},isView:function(){return this.mode===p["o"]},isCreate:function(){return this.mode===p["g"]},modelOption:function(){return v},allNetworkOption:function(){var e=Object(c["e"])(this.networkOption);return this.hasManagementNetwork||e.unshift({label:f["a"],value:f["a"]}),e},typeOption:function(){var e=[{label:"masquerade",value:"masquerade"},{label:"bridge",value:"bridge"}],t=[{label:"bridge",value:"bridge"}];return this.isMasquerade?e:t}},watch:{rows:{handler:function(e){var t=!!e.some((function(e){return e.isPod}));this.$set(this,"hasManagementNetwork",t)},immediate:!0,deep:!0}},methods:{updateNetworkName:function(e){e===f["a"]?(this.value.isPod=!0,this.value.macAddress=""):this.value.isPod=!1,this.$set(this,"isMasquerade",this.value.isPod),this.value.isPod?this.value.type="masquerade":this.value.type="bridge",this.update()},update:function(){this.$emit("update")}}},h=m,b=a("d802"),y=Object(b["a"])(h,i,o,!1,null,null,null),g=y.exports,w=a("56a4"),x=a("7592"),S=a("06f6"),O=a("e411"),k={components:{InfoBox:s["a"],Base:g},props:{mode:{type:String,default:"create"},value:{type:Array,default:function(){return[]}}},data:function(){return{rows:Object(c["e"])(this.value),nameIdx:1}},computed:{isView:function(){return this.mode===p["o"]},networkOption:function(){var e=this.$store.getters["harvester/all"](w["r"]),t=Object(x["a"])(e.map((function(e){return{label:e.id,value:e.id}})),"label");return t}},watch:{value:function(e){this.rows=e}},methods:{add:function(e){var t=this.generateName(),a={name:t,networkName:"",model:"virtio",type:"bridge",newCreateId:Object(S["p"])(10)};this.rows.push(a),this.update()},remove:function(e){Object(O["i"])(this.rows,e),this.update()},generateName:function(){var e="",t=!0;while(t)e="nic-".concat(this.nameIdx),t=this.rows.find((function(t){return t.name===e})),this.nameIdx++;return e},update:function(){this.$emit("input",this.rows)}}},C=k,_=(a("2fd6"),Object(b["a"])(C,r,n,!1,null,"14fbcf47",null));t["a"]=_.exports},"5fe4":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",e._b({staticClass:"modal",attrs:{name:e.name,width:e.width,"click-to-close":!1,height:e.height}},"modal",e.$attrs,!1),[a("Card",{staticClass:"modal",attrs:{"show-highlight-border":!1},scopedSlots:e._u([{key:"title",fn:function(){return[a("h4",{staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"},[e._t("title")],2)]},proxy:!0},{key:"body",fn:function(){return[e._t("content"),e._l(e.errors,(function(e,t){return a("div",{key:t},[a("Banner",{staticClass:"banner",attrs:{color:"error",label:e}})],1)}))]},proxy:!0},{key:"actions",fn:function(){return[e._t("footer",(function(){return[a("div",{staticClass:"footer"},[a("button",{staticClass:"btn role-secondary mr-20",on:{click:function(t){return t.preventDefault(),e.hide.apply(null,arguments)}}},[e._v(" "+e._s(e.closeText)+" ")]),a("AsyncButton",{attrs:{mode:e.saveText},on:{click:function(t){return e.$emit("finish",t)}}})],1)]}))]},proxy:!0}],null,!0)})],1)},n=[],s=a("09c6"),i=a("dffb"),o=a("a967"),l={name:"ModalWithCard",components:{Card:s["a"],Banner:i["a"],AsyncButton:o["a"]},props:{name:{type:String,required:!0},closeText:{type:String,default:"Close"},saveText:{type:String,default:"create"},width:{type:[String,Number],default:"50%"},height:{type:[String,Number],default:"auto"},errors:{type:Array,default:function(){return[]}}},methods:{hide:function(){this.$modal.hide(this.name),this.$emit("close")},open:function(){this.$modal.show(this.name)}}},u=l,d=(a("a4ca"),a("483e"),a("d802")),c=Object(d["a"])(u,r,n,!1,null,"0cb3f40c",null);t["a"]=c.exports},6255:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.modal{border-radius:var(--border-radius);max-height:100vh}.modal.card-container{box-shadow:none}',""]),e.exports=t},6834:function(e,t,a){"use strict";a.d(t,"a",(function(){return P})),a.d(t,"b",(function(){return U}));var r=a("56d4"),n=a.n(r),s=a("7838"),i=a.n(s),o=a("9e74"),l=a.n(o),u=a("330a"),d=a.n(u),c=a("94a3"),p=a.n(c),f=a("7592"),v=a("1832"),m=a("b837"),h=a("06f6"),b=a("8672"),y=a("67ab"),g=a("b12c"),w=a("d6a6"),x=a("56a4"),S=a("681a"),O=a("b0bd"),k=a("4b06");function C(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=E(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw s}}}}function _(e){return A(e)||I(e)||E(e)||M()}function M(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if(e){if("string"===typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?N(e,t):void 0}}function I(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function A(e){if(Array.isArray(e))return N(e)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e,t,a,r,n,s,i){try{var o=e[s](i),l=o.value}catch(u){return void a(u)}o.done?t(l):Promise.resolve(l).then(r,n)}function V(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function i(e){D(s,r,n,i,o,"next",e)}function o(e){D(s,r,n,i,o,"throw",e)}i(void 0)}))}}var P="management Network",U=[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"Debian",value:"debian"},{label:"Fedora",value:"fedora"},{label:"Gentoo",value:"gentoo"},{label:"Mandriva",value:"mandriva"},{label:"Oracle",value:"oracle"},{label:"Red Hat",value:"redhat"},{label:"openSUSE",value:"openSUSE"},{label:"Turbolinux",value:"turbolinux"},{label:"Ubuntu",value:"ubuntu"},{label:"Xandros",value:"xandros"},{label:"Other Linux",match:["centos"],value:"otherLinux"}],L="cd-rom",R="disk";t["c"]={mixins:[k["c"]],props:{value:{type:Object,required:!0},resource:{type:String,default:""}},fetch:function(){var e=this;return V(n.a.mark((function t(){var a;return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pvcs:e.$store.dispatch("harvester/findAll",{type:x["x"]}),storageClasses:e.$store.dispatch("harvester/findAll",{type:x["F"]}),sshs:e.$store.dispatch("harvester/findAll",{type:x["h"].SSH}),settings:e.$store.dispatch("harvester/findAll",{type:x["h"].SETTING}),images:e.$store.dispatch("harvester/findAll",{type:x["h"].IMAGE}),versions:e.$store.dispatch("harvester/findAll",{type:x["h"].VM_VERSION}),templates:e.$store.dispatch("harvester/findAll",{type:x["h"].VM_TEMPLATE}),networkAttachment:e.$store.dispatch("harvester/findAll",{type:x["r"]}),vmis:e.$store.dispatch("harvester/findAll",{type:x["h"].VMI}),vmims:e.$store.dispatch("harvester/findAll",{type:x["h"].VMIM}),vms:e.$store.dispatch("harvester/findAll",{type:x["h"].VM}),secrets:e.$store.dispatch("harvester/findAll",{type:x["B"]})},e.$store.getters["harvester/schemaFor"](x["t"])&&(a.nodes=e.$store.dispatch("harvester/findAll",{type:x["t"]})),t.next=4,Object(m["a"])(a);case 4:case"end":return t.stop()}}),t)})))()},data:function(){var e=this.realMode===w["e"];return{OS:U,isClone:e,spec:null,osType:"linux",sshKey:[],runStrategy:"RerunOnFailure",installAgent:!0,hasCreateVolumes:[],installUSBTablet:!0,networkScript:"",userScript:"",imageId:"",diskRows:[],networkRows:[],machineType:"",secretName:"",secretRef:null,showAdvanced:!1,deleteAgent:!0,memory:null,cpu:"",reservedMemory:null,accessCredentials:[],efiEnabled:!1,secureBoot:!1,userDataTemplateId:""}},computed:{images:function(){return this.$store.getters["harvester/all"](x["h"].IMAGE)},versions:function(){return this.$store.getters["harvester/all"](x["h"].VM_VERSION)},templates:function(){return this.$store.getters["harvester/all"](x["h"].VM_TEMPLATE)},pvcs:function(){return this.$store.getters["harvester/all"](x["x"])},secrets:function(){return this.$store.getters["harvester/all"](x["B"])},nodesIdOptions:function(){var e=this.$store.getters["harvester/all"](x["t"]);return e.filter((function(e){return!e.isUnSchedulable})).map((function(e){return{label:e.nameDisplay,value:e.id}}))},defaultStorageClass:function(){var e,t=this.$store.getters["harvester/all"](x["F"]).find((function(e){return e.isDefault}));return(null===t||void 0===t||null===(e=t.metadata)||void 0===e?void 0:e.name)||"longhorn"},storageClassSetting:function(){try{var e,t=null===(e=this.$store.getters["harvester/all"](x["h"].SETTING).find((function(e){return e.id===S["b"].DEFAULT_STORAGE_CLASS})))||void 0===e?void 0:e.value;return JSON.parse(t)}catch(a){return{}}},customDefaultStorageClass:function(){return this.storageClassSetting.storageClass},customVolumeMode:function(){return this.storageClassSetting.volumeMode||"Block"},customAccessMode:function(){return this.storageClassSetting.accessModes||"ReadWriteMany"},isWindows:function(){return"windows"===this.osType},needNewSecret:function(){return this.resource===x["h"].VM_VERSION||this.isCreate}},created:function(){var e=this;return V(n.a.mark((function t(){return n.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("harvester/findAll",{type:x["B"]});case 2:e.getInitConfig({value:e.value});case 3:case"end":return t.stop()}}),t)})))()},methods:{getInitConfig:function(e){var t,a,r,n,s,i,o,l=e.value,u=this.resource===x["h"].VM?l:this.resource===x["h"].BACKUP?null===(t=this.value.status)||void 0===t?void 0:t.source:l.spec.vm,d=null===u||void 0===u?void 0:u.spec;if(d){var c=d.template.spec.domain.resources;null!==c&&void 0!==c&&c.limits&&(null===c||void 0===c||!c.limits||null!==c&&void 0!==c&&null!==(a=c.limits)&&void 0!==a&&a.memory||null===(null===c||void 0===c||null===(r=c.limits)||void 0===r?void 0:r.memory))||(d.template.spec.domain.resources=T(T({},d.template.spec.domain.resources),{},{limits:T(T({},d.template.spec.domain.resources.limits),{},{memory:d.template.spec.domain.resources.requests.memory})}));var p=d.runStrategy||"RerunOnFailure",f=l.machineType,v=null===(n=d.template.spec.domain)||void 0===n||null===(s=n.cpu)||void 0===s?void 0:s.cores,m=d.template.spec.domain.resources.limits.memory,h=null===(i=u.metadata)||void 0===i||null===(o=i.annotations)||void 0===o?void 0:o[O["f"].VM_RESERVED_MEMORY],y=this.getSSHFromAnnotation(d)||[],g=this.getRootImageId(u)||"",w=this.getDiskRows(u),S=this.getNetworkRows(u),k=this.getHasCreatedVolumes(d)||[],C=this.getSecretCloudData(d),_=C.userData,M=void 0===_?void 0:_,E=C.networkData,I=void 0===E?void 0:E;if(this.resource===x["h"].BACKUP){var A,N=null===(A=this.value.status)||void 0===A?void 0:A.secretBackups;if(N){var $,j,D,V,P=(null===($=N[0])||void 0===$||null===(j=$.data)||void 0===j?void 0:j.networkdata)||"",U=(null===(D=N[0])||void 0===D||null===(V=D.data)||void 0===V?void 0:V.userdata)||"";M=Object(b["a"])(U),I=Object(b["a"])(P)}}var L=this.getOsType(u)||"linux";M=this.isCreate?this.getInitUserData({osType:L}):M;var R=this.isInstallUSBTablet(d),B=!!this.isCreate||this.hasInstallAgent(M,L,!0),q=this.isEfiEnabled(d),z=this.isSecureBoot(d),H=this.getSecret(d),G=this.getAccessCredentials(d);Object.prototype.hasOwnProperty.call(d,"running")&&(delete d.running,d.runStrategy="RerunOnFailure"),this.$set(this,"spec",d),this.$set(this,"runStrategy",p),this.$set(this,"secretRef",H),this.$set(this,"accessCredentials",G),this.$set(this,"userScript",M),this.$set(this,"networkScript",I),this.$set(this,"sshKey",y),this.$set(this,"osType",L),this.$set(this,"installAgent",B),this.$set(this,"cpu",v),this.$set(this,"memory",m),this.$set(this,"reservedMemory",h),this.$set(this,"machineType",f),this.$set(this,"installUSBTablet",R),this.$set(this,"efiEnabled",q),this.$set(this,"secureBoot",z),this.$set(this,"hasCreateVolumes",k),this.$set(this,"networkRows",S),this.$set(this,"imageId",g),this.$set(this,"diskRows",w)}},getDiskRows:function(e){var t=this,a=e.metadata.namespace,r=e.spec.template.spec.volumes||[],n=e.spec.template.spec.domain.devices.disks||[],s=this.getVolumeClaimTemplates(e),i=[];return 0===n.length?i.push({id:Object(h["p"])(5),source:g["d"].IMAGE,name:"disk-0",accessMode:"ReadWriteMany",bus:"virtio",volumeName:"",size:"10Gi",type:R,storageClassName:"",image:this.imageId,volumeMode:"Block"}):i=n.map((function(n,i){var o,l,u,d,c,p=r.find((function(e){return e.name===n.name})),f="",v="",m="",b="",w="",S="",k="",C="",_="",M=!1,E=null!==n&&void 0!==n&&n.cdrom?L:R;if(null!==p&&void 0!==p&&p.containerDisk&&(m=g["d"].CONTAINER,w=p.containerDisk.image),p.persistentVolumeClaim&&null!==(o=p.persistentVolumeClaim)&&void 0!==o&&o.claimName){S=p.persistentVolumeClaim.claimName;var I=s.find((function(e){return e.metadata.name===S}));if(b=S,I){var A,N,$,T,j,D,V;if(void 0!==(null===(A=I.metadata)||void 0===A||null===(N=A.annotations)||void 0===N?void 0:N[O["f"].IMAGE_ID]))v=null===(D=I.metadata)||void 0===D||null===(V=D.annotations)||void 0===V?void 0:V[O["f"].IMAGE_ID],m=g["d"].IMAGE;else m=g["d"].NEW;var P=(null===I||void 0===I?void 0:I.spec)||{};C=null===P||void 0===P?void 0:P.volumeMode,k=null===P||void 0===P||null===($=P.accessModes)||void 0===$?void 0:$[0],f=(null===P||void 0===P||null===(T=P.resources)||void 0===T||null===(j=T.requests)||void 0===j?void 0:j.storage)||"10Gi",_=null===P||void 0===P?void 0:P.storageClassName}else{var U,B,q,z,H,G,K,F,Y=t.$store.getters["harvester/all"](x["x"]),W=Y.find((function(e){var t;return e.id==="".concat(a,"/").concat(null===p||void 0===p||null===(t=p.persistentVolumeClaim)||void 0===t?void 0:t.claimName)}));m=g["d"].ATTACH_VOLUME,k=(null===W||void 0===W||null===(U=W.spec)||void 0===U||null===(B=U.accessModes)||void 0===B?void 0:B[0])||"ReadWriteMany",f=(null===W||void 0===W||null===(q=W.spec)||void 0===q||null===(z=q.resources)||void 0===z||null===(H=z.requests)||void 0===H?void 0:H.storage)||"10Gi",_=null===W||void 0===W||null===(G=W.spec)||void 0===G?void 0:G.storageClassName,C=(null===W||void 0===W||null===(K=W.spec)||void 0===K?void 0:K.volumeMode)||"Block",S=(null===W||void 0===W||null===(F=W.metadata)||void 0===F?void 0:F.name)||""}M=p.persistentVolumeClaim.hotpluggable||!1}var J=(null===n||void 0===n||null===(l=n.disk)||void 0===l?void 0:l.bus)||(null===n||void 0===n||null===(u=n.cdrom)||void 0===u?void 0:u.bus),X=null!==n&&void 0!==n&&n.bootOrder?null===n||void 0===n?void 0:n.bootOrder:i,Q=Object(y["f"])(f),Z=Object(y["e"])(Q,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3}),ee=JSON.parse((null===(d=e.metadata)||void 0===d||null===(c=d.annotations)||void 0===c?void 0:c[O["f"].VM_VOLUME_STATUS])||"[]"),te=ee.find((function(e){return b===e.name}));return{id:Object(h["p"])(5),bootOrder:X,source:m,name:n.name,realName:b,bus:J,volumeName:S,container:w,accessMode:k,size:"".concat(Z,"Gi"),volumeMode:C||t.customVolumeMode,image:v,type:E,storageClassName:_,hotpluggable:M,volumeStatus:te}})),i=Object(f["a"])(i,"bootOrder"),i.filter((function(e){return"cloudinitdisk"!==e.name}))},getNetworkRows:function(e){var t=e.spec.template.spec.networks||[],a=e.spec.template.spec.domain.devices.interfaces||[],r=a.map((function(e,a){var r,n=t.find((function(t){return e.name===t.name})),s=e.sriov?"sriov":e.bridge?"bridge":"masquerade",i=!!n.pod;return T(T({},e),{},{index:a,type:s,isPod:i,model:e.model,networkName:i?P:null===n||void 0===n||null===(r=n.multus)||void 0===r?void 0:r.networkName})}));return r},parseVM:function(){this.parseOther(),this.parseAccessCredentials(),this.parseNetworkRows(this.networkRows),this.parseDiskRows(this.diskRows)},parseOther:function(){this.spec.template.spec.domain.machine?this.$set(this.spec.template.spec.domain.machine,"type",this.machineType):this.$set(this.spec.template.spec.domain,"machine",{type:this.machineType}),this.spec.template.spec.domain.cpu.cores=this.cpu,this.spec.template.spec.domain.resources.limits.cpu=this.cpu,this.spec.template.spec.domain.resources.limits.memory=this.memory;var e=this.resource===x["h"].VM?this.value:this.value.spec.vm;this.reservedMemory?e.metadata.annotations[O["f"].VM_RESERVED_MEMORY]=this.reservedMemory:delete e.metadata.annotations[O["f"].VM_RESERVED_MEMORY]},parseDiskRows:function(e){var t,a,r,n,s,i,o,l,u,d,c,p,f,v,m,b,y=this,w=[],S=[],k=[],C=[];e.forEach((function(e,t){var a,r=(null===(a=y.value.metadata)||void 0===a?void 0:a.name)||"",n="";n=e.source===g["d"].ATTACH_VOLUME?e.volumeName:y.isClone||!y.hasCreateVolumes.includes(e.realName)?"".concat(r,"-").concat(e.name,"-").concat(Object(h["p"])(5).toLowerCase()):e.realName;var s=y.parseDisk(e,t),i=y.parseVolume(e,n),o=y.parseVolumeClaimTemplate(e,n);w.push(s),S.push(i),k.push(n),e.source!==g["d"].CONTAINER&&e.source!==g["d"].ATTACH_VOLUME&&C.push(o)})),this.secretName&&!this.needNewSecret||(this.secretName=this.generateSecretName(this.secretNamePrefix)),w.find((function(e){return"cloudinitdisk"===e.name}))||(this.networkScript||this.userScript||this.sshKey.length>0)&&(w.push({name:"cloudinitdisk",disk:{bus:"virtio"}}),S.push({name:"cloudinitdisk",cloudInitNoCloud:{secretRef:{name:this.secretName},networkDataSecretRef:{name:this.secretName}}}));var _,M,E=T(T({},this.spec),{},{runStrategy:this.runStrategy,template:T(T({},this.spec.template),{},{metadata:T(T({},null===(t=this.spec)||void 0===t||null===(a=t.template)||void 0===a?void 0:a.metadata),{},{annotations:T(T({},null===(r=this.spec)||void 0===r||null===(n=r.template)||void 0===n||null===(s=n.metadata)||void 0===s?void 0:s.annotations),{},j({},O["f"].SSH_NAMES,JSON.stringify(this.sshKey))),labels:T(T({},null===(i=this.spec)||void 0===i||null===(o=i.template)||void 0===o||null===(l=o.metadata)||void 0===l?void 0:l.labels),{},j({},O["f"].VM_NAME,null===(u=this.value)||void 0===u||null===(d=u.metadata)||void 0===d?void 0:d.name))}),spec:T(T({},null===(c=this.spec.template)||void 0===c?void 0:c.spec),{},{domain:T(T({},null===(p=this.spec.template)||void 0===p||null===(f=p.spec)||void 0===f?void 0:f.domain),{},{devices:T(T({},null===(v=this.spec.template)||void 0===v||null===(m=v.spec)||void 0===m||null===(b=m.domain)||void 0===b?void 0:b.devices),{},{disks:w})}),volumes:S})})});(0===S.length&&delete E.template.spec.volumes,this.resource===x["h"].VM)?(this.isSingle||(E=this.multiVMScheduler(E)),this.$set(this.value.metadata,"annotations",T(T({},this.value.metadata.annotations),{},(_={},j(_,O["f"].VOLUME_CLAIM_TEMPLATE,JSON.stringify(C)),j(_,O["f"].NETWORK_IPS,JSON.stringify(this.value.networkIps)),_))),this.$set(this.value.metadata,"labels",T(T({},this.value.metadata.labels),{},(M={},j(M,O["f"].CREATOR,"harvester"),j(M,O["f"].OS,this.osType),M))),this.$set(this.value,"spec",E),this.$set(this,"spec",E)):this.resource===x["h"].VM_VERSION&&(this.$set(this.value.spec.vm,"spec",E),this.$set(this.value.spec.vm.metadata,"annotations",T(T({},this.value.spec.vm.metadata.annotations),{},j({},O["f"].VOLUME_CLAIM_TEMPLATE,JSON.stringify(C)))),this.$set(this.value.spec.vm.metadata,"labels",j({},O["f"].OS,this.osType)),this.$set(this,"spec",E))},multiVMScheduler:function(e){var t,a,r,n,s;e.template.metadata.labels[O["f"].VM_NAME_PREFIX]=this.namePrefix;var i={weight:1,podAffinityTerm:{topologyKey:O["g"],labelSelector:{matchLabels:j({},O["f"].VM_NAME_PREFIX,this.namePrefix)}}};return T(T({},e),{},{template:T(T({},e.template),{},{spec:T(T({},e.template.spec),{},{affinity:T(T({},e.template.spec.affinity),{},{podAntiAffinity:T(T({},null===(t=e.template.spec)||void 0===t||null===(a=t.affinity)||void 0===a?void 0:a.podAntiAffinity),{},{preferredDuringSchedulingIgnoredDuringExecution:[].concat(_((null===(r=e.template.spec)||void 0===r||null===(n=r.affinity)||void 0===n||null===(s=n.podAntiAffinity)||void 0===s?void 0:s.preferredDuringSchedulingIgnoredDuringExecution)||[]),[i])})})})})})},parseNetworkRows:function(e){var t=this,a=[],r=[];e.forEach((function(e){var n=t.parseNetwork(e),s=t.parseInterface(e);a.push(n),r.push(s)}));var n=T(T({},this.spec.template.spec),{},{domain:T(T({},this.spec.template.spec.domain),{},{devices:T(T({},this.spec.template.spec.domain.devices),{},{interfaces:r})}),networks:a});this.$set(this.spec.template,"spec",n)},parseAccessCredentials:function(){var e,t,a,r,n,s=[],i={},o=JSON.parse((null===(e=this.spec)||void 0===e||null===(t=e.template)||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[O["f"].DYNAMIC_SSHKEYS_USERS])||"[]"),l=C(this.accessCredentials);try{for(l.s();!(n=l.n()).done;){var u=n.value;this.needNewSecret&&(u.secretName=this.generateSecretName(this.secretNamePrefix)),u.source===g["a"].RESET_PWD&&(o.push(u.username),s.push({userPassword:{source:{secret:{secretName:u.secretName}},propagationMethod:{qemuGuestAgent:{}}}})),u.source===g["a"].INJECT_SSH&&(o.push.apply(o,_(u.users)),i[u.secretName]=u.sshkeys,s.push({sshPublicKey:{source:{secret:{secretName:u.secretName}},propagationMethod:{qemuGuestAgent:{users:u.users}}}}))}}catch(d){l.e(d)}finally{l.f()}0===s.length&&this.spec.template.spec.accessCredentials?delete this.spec.template.spec.accessCredentials:this.spec.template.spec.accessCredentials=s,0!==o.length&&(this.spec.template.metadata.annotations[O["f"].DYNAMIC_SSHKEYS_USERS]=JSON.stringify(Array.from(new Set(o))),this.spec.template.metadata.annotations[O["f"].DYNAMIC_SSHKEYS_NAMES]=JSON.stringify(i))},getInitUserData:function(e){var t=this.getMatchQGA(e.osType),a=i.a.dump(t);return a.startsWith("#cloud-config")?a:"#cloud-config\n".concat(a)},getUserData:function(e){var t,a=e.returnType,r=void 0===a?"string":a,n=this.convertToJson(this.userScript)||{},s=(null===(t=n)||void 0===t?void 0:t.ssh_authorized_keys)||[];if(n&&s){var o=new Set([].concat(_(this.getSSHListValue(this.sshKey)),_(s)));n.ssh_authorized_keys=_(o)}else n.ssh_authorized_keys=this.getSSHListValue(this.sshKey);if(n.ssh_authorized_keys&&0===n.ssh_authorized_keys.length&&delete n.ssh_authorized_keys,n=e.installAgent?this.mergeQGA(T({userDataJson:Object(v["e"])(n)},e)):this.deleteQGA(T({userDataJson:n},e)),"string"===r){var l=i.a.dump(n),u=l.replace(/[\r\n]/g,"").replace(/\ +/g,"");if("''"===u)return;return"#cloud-config\n".concat(l)}return n},updateSSHKey:function(e){this.$set(this,"sshKey",e)},updateCpuMemory:function(e,t){this.$set(this,"cpu",e),this.$set(this,"memory",t)},parseDisk:function(e,t){var a={name:e.name};return e.type===R?a.disk={bus:e.bus}:e.type===L&&(a.cdrom={bus:e.bus}),a.bootOrder=t+1,a},parseVolume:function(e,t){var a={name:e.name};return e.source===g["d"].CONTAINER?a.containerDisk={image:e.container}:e.source!==g["d"].IMAGE&&e.source!==g["d"].NEW&&e.source!==g["d"].ATTACH_VOLUME||(a.persistentVolumeClaim={claimName:t},e.hotpluggable&&(a.persistentVolumeClaim.hotpluggable=!0)),a},parseVolumeClaimTemplate:function(e,t){!String(e.size).includes("Gi")&&e.size&&(e.size="".concat(e.size,"Gi"));var a={metadata:{name:t},spec:{accessModes:[e.accessMode],resources:{requests:{storage:e.size}},volumeMode:e.volumeMode}};switch(e.source){case g["d"].NEW:a.spec.storageClassName=e.storageClassName||this.customDefaultStorageClass||this.defaultStorageClass;break;case g["d"].IMAGE:var r=this.images.find((function(t){return e.image===t.id}));r&&(a.spec.storageClassName="longhorn-".concat(r.metadata.name),a.metadata.annotations=j({},O["f"].IMAGE_ID,r.id));break}return a},getSSHListValue:function(e){var t=this;return e.map((function(e){return t.getSSHValue(e)})).filter((function(e){return void 0!==e}))},parseInterface:function(e){var t={},a=e.type;if(t[a]={},e.macAddress&&(t.macAddress=e.macAddress),e.ports&&"masquerade"===e.type){var r,n=[],s=C(e.ports);try{for(s.s();!(r=s.n()).done;){var i=r.value;n.push(T(T({},i),{},{port:parseInt(i.port)}))}}catch(o){s.e(o)}finally{s.f()}t.ports=n}return t.model=e.model,t.name=e.name,t},parseNetwork:function(e){var t={name:e.name};return e.isPod?t.pod={}:t.multus={networkName:e.networkName},t},updateUserData:function(e){this.userScript=e},updateNetworkData:function(e){this.networkScript=e},mergeQGA:function(e){var t=this,a=e.userDataJson,r=e.osType,n=this.getMatchQGA(r);if(a.package_update=!0,Array.isArray(a.packages)?a.packages.includes("qemu-guest-agent")||a.packages.push("qemu-guest-agent"):a.packages=k["a"].packages,Array.isArray(a.runcmd)){var s=-1,i=a.runcmd.find((function(e){return Array.isArray(e)&&e.join("-")===n.runcmd[0].join("-")})),o=a.runcmd.find((function(e,a){return!(!Array.isArray(e)||e.join("-")!==t.getSimilarRuncmd(r).join("-"))&&(s=a,!0)}));o?a.runcmd[s]=n.runcmd[0]:i||a.runcmd.push(n.runcmd[0])}else a.runcmd=n.runcmd;return a},deleteQGA:function(e){var t,a,r=e.userDataJson,n=e.osType,s=e.deletePackage,i=void 0!==s&&s,o=(null===(t=this.$store.getters["harvester/byId"](x["c"],this.userDataTemplateId))||void 0===t||null===(a=t.data)||void 0===a?void 0:a.cloudInit)||"";if(Array.isArray(r.packages)&&i){for(var l,u=this.convertToJson(o),d=0;d<r.packages.length;d++)"qemu-guest-agent"===r.packages[d]&&(Array.isArray(null===u||void 0===u?void 0:u.packages)&&u.packages.includes("qemu-guest-agent")||r.packages.splice(d,1));0===(null===(l=r.packages)||void 0===l?void 0:l.length)&&delete r.packages}if(Array.isArray(r.runcmd)){for(var c=this.getMatchQGA(n),p=0;p<r.runcmd.length;p++)Array.isArray(r.runcmd[p])&&r.runcmd[p].join("-")===c.runcmd[0].join("-")&&r.runcmd.splice(p,1);0===r.runcmd.length&&delete r.runcmd}return r.packages||delete r.package_update,!Object.keys(r).length>0?"":r},generateSecretName:function(e){return e?"".concat(e,"-").concat(Object(h["p"])(5).toLowerCase()):void 0},getOwnerReferencesFromVM:function(e){var t,a=e.metadata.name,r=e.kind,n=this.resource===x["h"].VM?"kubevirt.io/v1":"harvesterhci.io/v1beta1",s=null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.uid;return[{name:a,kind:r,uid:s,apiVersion:n}]},saveSecret:function(e){var t=this;return V(n.a.mark((function a(){var r,s;return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==e&&void 0!==e&&e.spec&&t.secretName){a.next=2;break}return a.abrupt("return",!0);case 2:if(r=t.getSecret(e.spec),s=t.getUserData({osType:t.osType,installAgent:t.installAgent}),r&&!t.needNewSecret){a.next=8;break}return a.next=7,t.$store.dispatch("harvester/create",{metadata:{name:t.secretName,namespace:t.value.metadata.namespace,labels:j({},O["f"].CLOUD_INIT,"harvester"),ownerReferences:t.getOwnerReferencesFromVM(e)},type:x["B"]});case 7:r=a.sent;case 8:if(a.prev=8,!r){a.next=14;break}return s&&r.setData("userdata",s),t.networkScript&&r.setData("networkdata",t.networkScript),a.next=14,r.save();case 14:a.next=19;break;case 16:return a.prev=16,a.t0=a["catch"](8),a.abrupt("return",Promise.reject(a.t0));case 19:case"end":return a.stop()}}),a,null,[[8,16]])})))()},saveAccessCredentials:function(e){var t=this;return V(n.a.mark((function a(){var r,s,i,o,l,u,d,c,p,f,v;return n.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null!==e&&void 0!==e&&e.spec){a.next=2;break}return a.abrupt("return",!0);case 2:r=[],s=C(t.accessCredentials),a.prev=4,s.s();case 6:if((i=s.n()).done){a.next=18;break}if(o=i.value,l=o.secretRef,l&&!t.needNewSecret){a.next=13;break}return a.next=12,t.$store.dispatch("harvester/create",{metadata:{name:o.secretName,namespace:e.metadata.namespace,labels:j({},O["f"].CLOUD_INIT,"harvester"),ownerReferences:t.getOwnerReferencesFromVM(e)},type:x["B"]});case 12:l=a.sent;case 13:if(o.source===g["a"].RESET_PWD&&l.setData(o.username,o.newPassword),o.source===g["a"].INJECT_SSH){u=C(o.sshkeys);try{for(c=function(){var e=d.value,a=(t.$store.getters["harvester/all"](x["h"].SSH)||[]).find((function(t){return t.id===e}));l.setData("".concat(a.metadata.namespace,"-").concat(a.metadata.name),a.spec.publicKey)},u.s();!(d=u.n()).done;)c()}catch(n){u.e(n)}finally{u.f()}}r.push(l);case 16:a.next=6;break;case 18:a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](4),s.e(a.t0);case 23:return a.prev=23,s.f(),a.finish(23);case 26:a.prev=26,p=0,f=r;case 28:if(!(p<f.length)){a.next=35;break}return v=f[p],a.next=32,v.save();case 32:p++,a.next=28;break;case 35:a.next=40;break;case 37:return a.prev=37,a.t1=a["catch"](26),a.abrupt("return",Promise.reject(a.t1));case 40:case"end":return a.stop()}}),a,null,[[4,20,23,26],[26,37]])})))()},getAccessCredentialsValidation:function(){for(var e=[],t=0;t<this.accessCredentials.length;t++){var a=this.accessCredentials[t],r=a.source;if(r===g["a"].RESET_PWD){if(!a.username){var n=this.t("harvester.virtualMachine.input.username"),s=this.t("validation.required",{key:n});e.push(s)}if(!a.newPassword){var i=this.t("harvester.virtualMachine.input.password"),o=this.t("validation.required",{key:i});e.push(o)}if(a.newPassword&&a.newPassword.length<6){var l=this.t("harvester.virtualMachine.input.password"),u=this.t("validation.number.min",{key:l,val:"6"});e.push(u)}}else{if(!a.users||0===a.users.length){var d=this.t("harvester.virtualMachine.input.username"),c=this.t("validation.required",{key:d});e.push(c)}if(!a.sshkeys||0===a.sshkeys.length){var p=this.t("harvester.virtualMachine.input.sshKeyValue"),f=this.t("validation.required",{key:p});e.push(f)}}if(e.length>0)break}return e},getHasCreatedVolumes:function(e){var t=[];return e.template.spec.volumes&&e.template.spec.volumes.forEach((function(e){var a;null!==e&&void 0!==e&&null!==(a=e.persistentVolumeClaim)&&void 0!==a&&a.claimName&&t.push(e.persistentVolumeClaim.claimName)})),t},handlerUSBTablet:function(e){var t,a=this.isInstallUSBTablet(this.spec),r=(null===(t=this.spec.template.spec.domain.devices)||void 0===t?void 0:t.inputs)||[];if(e&&!a)r.length>0?r.push(k["b"][0]):Object.assign(this.spec.template.spec.domain.devices,{inputs:[k["b"][0]]});else if(!e){var n=r.findIndex((function(e){return l()(e,k["b"][0])}));a&&1===r.length?this.$delete(this.spec.template.spec.domain.devices,"inputs"):a&&(r.splice(n,1),this.$set(this.spec.template.spec.domain.devices,"inputs",r))}},setBootMethod:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{efi:!1,secureBoot:!1};e.efi&&e.secureBoot?(Object(v["i"])(this.spec.template.spec.domain,"features.smm.enabled",!0),Object(v["i"])(this.spec.template.spec.domain,"firmware.bootloader.efi.secureBoot",!0)):e.efi&&!e.secureBoot?(Object(v["i"])(this.spec.template.spec.domain,"features.smm.enabled",!1),Object(v["i"])(this.spec.template.spec.domain,"firmware.bootloader.efi.secureBoot",!1)):(this.$delete(this.spec.template.spec.domain,"firmware"),this.$delete(this.spec.template.spec.domain.features,"smm"))},deleteSSHFromUserData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=this.getSSHFromUserData(this.userScript);t.map((function(t){var r=a.findIndex((function(a){return a===e.getSSHValue(t)}));r>=0&&a.splice(r,1)}));var r=this.convertToJson(this.userScript);r.ssh_authorized_keys=a,0===a.length&&delete r.ssh_authorized_keys,d()(r)?this.$set(this,"userScript",void 0):this.$set(this,"userScript",i.a.dump(r)),this.refreshYamlEditor()},refreshYamlEditor:function(){var e=this;this.$nextTick((function(){var t;null===(t=e.$refs.yamlEditor)||void 0===t||t.updateValue()}))},toggleAdvanced:function(){this.showAdvanced=!this.showAdvanced},updateAgent:function(e){e||(this.deletePackage=!0)},updateDataTemplateId:function(e,t){var a=this;if("user"===e){var r=this.installAgent;this.userDataTemplateId=t,this.$nextTick((function(){r&&(a.installAgent=r)}))}}},watch:{diskRows:{handler:function(e,t){if(Array.isArray(e)){var a,r,n=null===(a=e[0])||void 0===a?void 0:a.image,s=this.images.find((function(e){return n===e.id})),i=null===s||void 0===s?void 0:s.imageOSType,o=null===(r=t[0])||void 0===r?void 0:r.image;this.isCreate&&o===n&&(this.osType=i)}}},secretRef:{handler:function(e){var t,a;e&&this.resource!==x["h"].BACKUP&&(this.userScript=null===e||void 0===e||null===(t=e.decodedData)||void 0===t?void 0:t.userdata,this.networkScript=null===e||void 0===e||null===(a=e.decodedData)||void 0===a?void 0:a.networkdata,this.secretName=null===e||void 0===e?void 0:e.metadata.name,this.refreshYamlEditor())},immediate:!0,deep:!0},isWindows:function(e){e&&(this.$set(this,"sshKey",[]),this.$set(this,"userScript",void 0),this.$set(this,"installAgent",!1))},installUSBTablet:function(e){this.handlerUSBTablet(e)},efiEnabled:function(e){this.setBootMethod({efi:e,secureBoot:this.secureBoot})},secureBoot:function(e){this.setBootMethod({efi:this.efiEnabled,secureBoot:e})},installAgent:{handler:function(e){if(this.deleteAgent){var t=this.getUserData({installAgent:e,osType:this.osType,deletePackage:this.deletePackage});this.$set(this,"userScript",t),this.refreshYamlEditor()}this.deleteAgent=!0,this.deletePackage=!1},immediate:!0},osType:function(e){var t=this.getUserData({installAgent:this.installAgent,osType:e});this.$set(this,"userScript",t),this.refreshYamlEditor()},userScript:function(e,t){var a=this.hasInstallAgent(e,this.osType,this.installAgent);a!==this.installAgent&&(this.deleteAgent=!1,this.installAgent=a)},sshKey:function(e,t){var a=p()(t,e);a.length&&this.isEdit&&this.deleteSSHFromUserData(a)}}}},"6c20":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-aff9cfe4]:after,.clearfix[data-v-aff9cfe4]:before{content:" ";display:table}.clearfix[data-v-aff9cfe4]:after{clear:both}.list-unstyled[data-v-aff9cfe4]{margin:0;padding:0;list-style-type:none}.no-select[data-v-aff9cfe4]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-aff9cfe4]{resize:none}.hand[data-v-aff9cfe4]{cursor:pointer;cursor:hand}.fixed[data-v-aff9cfe4]{table-layout:fixed}.clip[data-v-aff9cfe4]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-aff9cfe4],.force-wrap[data-v-aff9cfe4]{word-wrap:break-word}.force-wrap[data-v-aff9cfe4]{white-space:normal}.bordered-section[data-v-aff9cfe4]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-aff9cfe4]{margin-bottom:20px;margin-top:20px}.addon.with-tooltip[data-v-aff9cfe4]{position:relative;right:30px}',""]),e.exports=t},"6d2d":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-14fbcf47]:after,.clearfix[data-v-14fbcf47]:before{content:" ";display:table}.clearfix[data-v-14fbcf47]:after{clear:both}.list-unstyled[data-v-14fbcf47]{margin:0;padding:0;list-style-type:none}.no-select[data-v-14fbcf47]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-14fbcf47]{resize:none}.hand[data-v-14fbcf47]{cursor:pointer;cursor:hand}.fixed[data-v-14fbcf47]{table-layout:fixed}.clip[data-v-14fbcf47]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-14fbcf47],.force-wrap[data-v-14fbcf47]{word-wrap:break-word}.force-wrap[data-v-14fbcf47]{white-space:normal}.bordered-section[data-v-14fbcf47]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-14fbcf47]{margin-bottom:20px;margin-top:20px}.infoBox[data-v-14fbcf47]{position:relative}.remove-vol[data-v-14fbcf47]{position:absolute;top:10px;right:16px;padding:0;max-height:28px;min-height:28px}',""]),e.exports=t},"6faf":function(e,t,a){"use strict";a("d903")},7856:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Banner",{staticClass:"mb-20",attrs:{color:"info",label:e.t("harvester.virtualMachine.accessCredentials.tips")}}),e._l(e.rows,(function(t,r){return a("div",{key:t.id},[a("InfoBox",{staticClass:"volume-source"},[e.isEdit?a("button",{staticClass:"role-link btn btn-sm remove-vol",attrs:{type:"button"},on:{click:function(a){return e.remove(t)}}},[a("i",{staticClass:"icon icon-2x icon-x"})]):e._e(),a("h3",[a("span",[e._v(" "+e._s(e.headerFor(t.source))+" ")])]),a("div",[a(e.componentFor(t.source),{tag:"component",attrs:{rows:e.rows,resource:e.resource,"user-options":e.userOptions,mode:e.mode,idx:r},on:{update:e.update,"update:newUser":e.updateNewUser},model:{value:e.rows[r],callback:function(t){e.$set(e.rows,r,t)},expression:"rows[i]"}})],1)])],1)})),e.isEdit&&e.isQemuInstalled?a("div",{staticClass:"mt-20"},[a("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addCredentials(e.ACCESS_CREDENTIALS.RESET_PWD)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.resetPwd.label"))+" ")]),a("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addCredentials(e.ACCESS_CREDENTIALS.INJECT_SSH)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.injectSSH.label"))+" ")])]):e._e()],2)},n=[],s=a("9ce4"),i=a("dffb"),o=a("6583"),l=a("06f6"),u=a("e411"),d=a("b12c"),c=a("d6a6"),p=a("b0bd");function f(e){return b(e)||h(e)||m(e)||v()}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"===typeof e)return y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(e,t):void 0}}function h(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function b(e){if(Array.isArray(e))return y(e)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var S="_NEW",O={components:{Banner:i["a"],InfoBox:o["a"]},props:{value:{type:Array,default:function(){return[]}},resource:{type:Object,default:function(){return{}}},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isQemuInstalled:{type:Boolean,default:!1}},data:function(){return{ACCESS_CREDENTIALS:d["a"],toRemove:[],toSave:[],rows:[],newUserOptions:[]}},computed:w(w({},Object(s["a"])({t:"i18n/t"})),{},{isEdit:function(){return this.mode===c["i"]},historyUsersOptions:function(){var e,t,a,r,n,s=JSON.parse((null===(e=this.resource)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.template)||void 0===a||null===(r=a.metadata)||void 0===r||null===(n=r.annotations)||void 0===n?void 0:n[p["f"].DYNAMIC_SSHKEYS_USERS])||"[]");return s.unshift({label:this.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"),value:S}),s},userOptions:function(){return Array.from(new Set([].concat(f(this.historyUsersOptions),f(this.newUserOptions))))}}),watch:{value:{handler:function(e){this.rows=f(e)},deep:!0,immediate:!0}},methods:{addCredentials:function(e){var t={source:e,users:[],sshkeys:[],username:"",newPassword:"",secretName:this.generateSecretName(this.resource.metadata.name)};this.rows.push(t),this.update()},remove:function(e){Object(u["i"])(this.rows,e),this.update()},update:function(){this.$emit("input",this.rows)},updateNewUser:function(e){this.newUserOptions.push(e)},generateSecretName:function(e){return e?"".concat(e,"-").concat(Object(l["p"])(5).toLowerCase()):void 0},componentFor:function(e){switch(e){case d["a"].RESET_PWD:return a("cabd").default;case d["a"].INJECT_SSH:return a("f3f0").default}},headerFor:function(e){return{userPassword:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.resetPwd.label"),sshPublicKey:this.$store.getters["i18n/t"]("harvester.virtualMachine.accessCredentials.injectSSH.label")}[e]}}},k=O,C=(a("809a"),a("d802")),_=Object(C["a"])(k,r,n,!1,null,"2f425664",null);t["a"]=_.exports},"79bb":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.input.sshKey"),taggable:!0,mode:e.mode,multiple:!0,searchable:e.searchable,disabled:e.disabled,options:e.sshOption},on:{input:e.update},model:{value:e.checkedSsh,callback:function(t){e.checkedSsh=t},expression:"checkedSsh"}}),a("ModalWithCard",{ref:e.randomStr,attrs:{name:e.randomStr,width:"40%",errors:e.errors},on:{finish:e.save,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.sshTitle"))+" ")]},proxy:!0},{key:"content",fn:function(){return[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.name"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),function(){}.apply(null,arguments))}},model:{value:e.sshName,callback:function(t){e.sshName=t},expression:"sshName"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.sshKeyValue"),"min-height":160,type:"multiline",required:""},model:{value:e.publicKey,callback:function(t){e.publicKey=t},expression:"publicKey"}})]},proxy:!0}])})],1)},n=[],s=a("56d4"),i=a.n(s),o=a("9ce4"),l=a("06f6"),u=a("d444"),d=a("53fe"),c=a("5fe4"),p=a("56a4"),f=a("1832"),v=a("d6a6");function m(e,t,a,r,n,s,i){try{var o=e[s](i),l=o.value}catch(u){return void a(u)}o.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function i(e){m(s,r,n,i,o,"next",e)}function o(e){m(s,r,n,i,o,"throw",e)}i(void 0)}))}}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w="_NEW",x={components:{LabeledInput:u["a"],ModalWithCard:c["a"],LabeledSelect:d["a"]},props:{value:{type:Array,default:function(){return[]}},mode:{type:String,default:"create"},disableCreate:{type:Boolean,default:!1},namespace:{type:String,default:""},searchable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data:function(){return{checkedSsh:this.value,publicKey:"",sshName:"",randomStr:Object(l["p"])(5).toLowerCase(),errors:[],isAll:!1,checkAll:!1}},computed:y(y({},Object(o["a"])({t:"i18n/t"})),{},{schema:function(){return this.$store.getters["harvester/schemaFor"](p["h"].SSH)},isCreatable:function(){var e;return!(this.schema&&(null===(e=this.schema)||void 0===e||!e.collectionMethods.find((function(e){return["blocked-post","post"].includes(e.toLowerCase())}))))},sshOption:function(){var e=this.$store.getters["harvester/all"](p["h"].SSH).map((function(e){return{label:e.id,value:e.id}}));return!this.disableCreate&&this.mode!==v["o"]&&this.isCreatable&&e.unshift({label:this.t("harvester.virtualMachine.createSSHKey"),value:w}),e}}),watch:{publicKey:function(e){var t=e.split(/\s+/);3===t.length&&t[2].includes("@")&&t[2].split("@")&&(this.sshName||(this.sshName=t[2].split("@")[0]))},value:function(e){this.checkedSsh=e},checkedSsh:function(e,t){e.includes(w)&&(this.$set(this,"checkedSsh",t),this.update(),this.show())}},methods:{show:function(){this.$modal.show(this.randomStr)},hide:function(){this.$modal.hide(this.randomStr)},save:function(e){var t=this;return h(i.a.mark((function a(){var r,n,s,o,l,u,d;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.errors=[],t.sshName||(r=t.t("harvester.virtualMachine.input.name"),n=t.t("validation.required",{key:r}),t.errors.push(n)),t.publicKey||(s=t.t("harvester.virtualMachine.input.sshKeyValue"),o=t.t("validation.required",{key:s}),t.errors.push(o)),t.sshName.length>63&&(l=t.t("harvester.validation.custom.tooLongName",{max:63}),t.errors.push(l)),!(t.errors.length>0)){a.next=7;break}return e(!1),a.abrupt("return");case 7:return a.prev=7,a.next=10,t.$store.dispatch("harvester/create",{metadata:{name:t.sshName,namespace:t.namespace},spec:{publicKey:t.publicKey},type:p["h"].SSH});case 10:return u=a.sent,a.next=13,u.save();case 13:d=a.sent,d.id&&t.checkedSsh.push("".concat(t.namespace,"/").concat(t.sshName)),e(!0),t.cancel(),a.next=23;break;case 19:a.prev=19,a.t0=a["catch"](7),t.errors=[a.t0.message],e(!1);case 23:case"end":return a.stop()}}),a,null,[[7,19]])})))()},cancel:function(){this.hide(),this.resetFields()},resetFields:function(){this.sshName="",this.publicKey="",this.errors=[]},update:function(){this.$emit("update:sshKey",Object(f["e"])(this.checkedSsh))}}},S=x,O=a("d802"),k=Object(O["a"])(S,r,n,!1,null,null,null);t["a"]=k.exports},"7cac":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isView?e._e():a("h2",[e._v(" "+e._s(e.t("harvester.virtualMachine.cloudConfig.title"))+" ")]),a("div",{staticClass:"mb-20"},[a("DataTemplate",{ref:"userTemplate",attrs:{type:"user","view-code":e.viewCode,mode:e.mode,"config-id":e.configUserId,options:e.optionUser},on:{show:e.show,update:e.update,updateTemplateId:e.updateTemplateId},model:{value:e.userScript,callback:function(t){e.userScript=t},expression:"userScript"}})],1),a("div",{staticClass:"mb-20"},[a("DataTemplate",{ref:"networkTemplate",attrs:{type:"network",mode:e.mode,"config-id":e.configNetworkId,options:e.optionNetwork},on:{show:e.show,update:e.update},model:{value:e.networkScript,callback:function(t){e.networkScript=t},expression:"networkScript"}})],1),a("ModalWithCard",{ref:"createCloudTemplate",attrs:{name:"createCloudTemplate",width:"40%",errors:e.errors},on:{finish:e.save,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.cloudConfig.createTemplateTitle",{name:e.createTypeLable}))+" ")]},proxy:!0},{key:"content",fn:function(){return[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.name"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),function(){}.apply(null,arguments))}},model:{value:e.cloudTemplateName,callback:function(t){e.cloudTemplateName=t},expression:"cloudTemplateName"}}),a("div",{staticClass:"yaml"},[a("div",{staticClass:"resource-yaml"},[a("YamlEditor",{ref:"createTemplate",staticClass:"yaml-editor",attrs:{"editor-mode":e.editorMode},model:{value:e.cloudTemplate,callback:function(t){e.cloudTemplate=t},expression:"cloudTemplate"}})],1)])]},proxy:!0}])})],1)},n=[],s=a("56d4"),i=a.n(s),o=a("9ce4"),l=a("d444"),u=a("c349"),d=a("5fe4"),c=a("56a4"),p=a("b0bd"),f=a("d6a6"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mb-20"},[a("h3",[e._v(e._s(e.t("harvester.virtualMachine.cloudConfig."+e.type+".title")))]),a("p",{staticClass:"text-muted mb-20"},[a("t",{attrs:{k:"harvester.virtualMachine.cloudConfig."+e.type+".tip",raw:!0}})],1),e.isView?e._e():a("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.options,"label-key":"harvester.virtualMachine.cloudConfig."+e.type+".label"},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),a("div",{staticClass:"resource-yaml"},[a("YamlEditor",{ref:"yaml",staticClass:"yaml-editor",attrs:{"editor-mode":e.editorMode},model:{value:e.yamlScript,callback:function(t){e.yamlScript=t},expression:"yamlScript"}})],1)],1)},m=[],h=a("53fe");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var w="_NEW",x="_NONE",S={components:{YamlEditor:u["b"],LabeledSelect:h["a"]},props:{mode:{type:String,default:"create"},value:{type:String,default:""},type:{type:String,default:""},options:{type:Array,default:function(){return[]}},configId:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data:function(){return{id:"",yamlScript:this.value}},computed:y(y({},Object(o["a"])({t:"i18n/t"})),{},{editorMode:function(){return this.isView||this.viewCode?u["a"].VIEW_CODE:u["a"].EDIT_CODE},isView:function(){return this.mode===f["o"]}}),watch:{value:function(e){this.yamlScript=e},configId:function(e){this.id=this.configId},id:function(e,t){var a,r,n=(null===(a=this.$store.getters["harvester/byId"](c["c"],e))||void 0===a||null===(r=a.data)||void 0===r?void 0:r.cloudInit)||"";if(this.$emit("updateTemplateId",this.type,e),e===w)return this.$emit("show",this.type),void(this.id=t);this.yamlScript=e===x?"":n,this.$refs["yaml"].updateValue(n)},yamlScript:function(e){this.$emit("update",e,this.type)}},methods:{refresh:function(){this.$refs.yaml.refresh()},updateValue:function(){this.$refs["yaml"].updateValue(this.value)}}},O=S,k=(a("23799"),a("d802")),C=Object(k["a"])(O,v,m,!1,null,"1bef0740",null),_=C.exports;function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){I(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function I(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=N(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw s}}}}function N(e,t){if(e){if("string"===typeof e)return $(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function T(e,t,a,r,n,s,i){try{var o=e[s](i),l=o.value}catch(u){return void a(u)}o.done?t(l):Promise.resolve(l).then(r,n)}function j(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function i(e){T(s,r,n,i,o,"next",e)}function o(e){T(s,r,n,i,o,"throw",e)}i(void 0)}))}}var D="_NEW",V="_NONE",P={components:{DataTemplate:_,YamlEditor:u["b"],LabeledInput:l["a"],ModalWithCard:d["a"]},props:{mode:{type:String,default:"create"},namespace:{type:String,default:""},userScript:{type:String,default:""},networkScript:{type:String,default:""},viewCode:{type:Boolean,default:!1}},data:function(){return{errors:[],templateType:"",cloudTemplate:"",cloudTemplateName:"",configUserId:"",configNetworkId:"",optionUser:[],optionNetwork:[]}},fetch:function(){var e=this;return j(i.a.mark((function t(){var a,r,n,s,o,l,u,d,f,v;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("harvester/findAll",{type:c["c"]});case 2:a=t.sent,r=[],n=[],s=A(a);try{for(s.s();!(o=s.n()).done;)v=o.value,"user"===(null===(l=v.metadata)||void 0===l||null===(u=l.labels)||void 0===u?void 0:u[p["f"].CLOUD_INIT])&&r.push({label:null===v||void 0===v?void 0:v.id,value:null===v||void 0===v?void 0:v.id}),"network"===(null===(d=v.metadata)||void 0===d||null===(f=d.labels)||void 0===f?void 0:f[p["f"].CLOUD_INIT])&&n.push({label:null===v||void 0===v?void 0:v.id,value:null===v||void 0===v?void 0:v.id})}catch(i){s.e(i)}finally{s.f()}r.unshift({label:e.t("harvester.virtualMachine.cloudConfig.createNew"),value:D}),r.unshift({label:e.t("harvester.virtualMachine.cloudConfig.cloudInit.placeholder"),value:V}),n.unshift({label:e.t("harvester.virtualMachine.cloudConfig.createNew"),value:D}),n.unshift({label:e.t("harvester.virtualMachine.cloudConfig.cloudInit.placeholder"),value:V}),e.optionUser=r,e.optionNetwork=n;case 13:case"end":return t.stop()}}),t)})))()},computed:E(E({},Object(o["a"])({t:"i18n/t"})),{},{createTypeLable:function(){var e="harvester.virtualMachine.cloudConfig.".concat(this.templateType,".label");return this.t(e)},editorMode:function(){return this.isView?u["a"].VIEW_CODE:u["a"].EDIT_CODE},isView:function(){return this.mode===f["o"]}}),methods:{updateValue:function(){this.$refs["userTemplate"].updateValue(),this.$refs["networkTemplate"].updateValue()},update:function(e,t){"user"===t&&this.$emit("updateUserData",e),"network"===t&&this.$emit("updateNetworkData",e)},updateTemplateId:function(e,t){this.$emit("updateDataTemplateId",e,t)},show:function(e){this.templateType=e,this.$modal.show("createCloudTemplate")},save:function(e){var t=this;return j(i.a.mark((function a(){var r,n;return i.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("harvester/create",{type:c["c"],metadata:{labels:I({},p["f"].CLOUD_INIT,t.templateType),name:t.cloudTemplateName,namespace:t.namespace},data:{cloudInit:t.cloudTemplate}});case 2:return r=a.sent,a.prev=3,a.next=6,r.save();case 6:n=a.sent,n.id&&("user"===t.templateType?t.configUserId=n.id:t.configNetworkId=n.id,t.$fetch()),e(!0),t.cancel(),a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](3),t.errors=[a.t0.message],e(!1);case 16:case"end":return a.stop()}}),a,null,[[3,12]])})))()},cancel:function(){this.cloudTemplate="",this.cloudTemplateName="",this.$set(this,"errors",[]),this.$modal.hide("createCloudTemplate")},refresh:function(){this.$refs["userTemplate"].refresh(),this.$refs["networkTemplate"].refresh()}}},U=P,L=(a("6faf"),Object(k["a"])(U,r,n,!1,null,"65fb0620",null));t["a"]=L.exports},"7d6cf":function(e,t,a){"use strict";a("a3e1")},"809a":function(e,t,a){"use strict";a("b917")},8644:function(e,t,a){var r=a("8b8d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("592b65da",r,!0,{sourceMap:!1,shadowMode:!1})},"86a7":function(e,t,a){"use strict";a("1e85")},"89d4":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isView?e._e():a("Banner",{attrs:{color:"info","label-key":"harvester.virtualMachine.volume.dragTip"}}),a("draggable",{attrs:{disabled:e.isView},on:{end:e.update},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}},[a("transition-group",e._l(e.rows,(function(t,r){return a("div",{key:t.id},[a("InfoBox",{staticClass:"box"},[e.isView?e._e():a("button",{staticClass:"role-link btn btn-sm remove",attrs:{type:"button"},on:{click:function(a){return e.removeVolume(t)}}},[a("i",{staticClass:"icon icon-2x icon-x"})]),t.hotpluggable&&e.isView?a("button",{staticClass:"role-link btn remove",attrs:{type:"button"},on:{click:function(a){return e.unplugVolume(t)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.unplug.detachVolume"))+" ")]):e._e(),a("h3",[t.to&&e.isVirtualType?a("span",{staticClass:"title"},[a("n-link",{attrs:{to:t.to}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.edit"))+" "+e._s(e.headerFor(t.source))+" ")]),t.pvc?a("BadgeStateFormatter",{staticClass:"ml-10 state",attrs:{arbitrary:!0,row:t.pvc,value:t.pvc.state}}):e._e()],1):a("span",[e._v(" "+e._s(e.headerFor(t.source))+" ")])]),a("div",[a(e.componentFor(t.source),{tag:"component",attrs:{rows:e.rows,namespace:e.namespace,"is-create":e.isCreate,"is-edit":e.isEdit,"is-view":e.isView,"is-virtual-type":e.isVirtualType,mode:e.mode,idx:r,"validate-required":e.validateRequired},on:{update:e.update},model:{value:e.rows[r],callback:function(t){e.$set(e.rows,r,t)},expression:"rows[i]"}})],1),a("div",{staticClass:"bootOrder"},[e.isView?e._e():a("div",{staticClass:"mr-15"},[a("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:0===r},on:{click:function(t){return t.preventDefault(),e.changeSort(r,!1)}}},[a("i",{staticClass:"icon icon-lg icon-chevron-up"})]),a("button",{staticClass:"btn btn-sm role-primary",attrs:{disabled:r===e.rows.length-1},on:{click:function(t){return t.preventDefault(),e.changeSort(r,!0)}}},[a("i",{staticClass:"icon icon-lg icon-chevron-down"})])]),a("div",{staticClass:"text-muted"},[e._v(" bootOrder: "+e._s(r+1)+" ")])]),t.volumeStatus?a("Banner",{staticClass:"mt-15",attrs:{color:"warning",label:t.volumeStatus.status}}):e._e()],1)],1)})),0)],1),e.showVolumeTip?a("Banner",{attrs:{color:"warning",label:e.t("harvester.virtualMachine.volume.volumeTip")}}):e._e(),e.isView?e._e():a("div",[a("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button",disabled:0===e.rows.length},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.NEW)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addVolume"))+" ")]),e.existingVolumeDisabled?e._e():a("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.ATTACH_VOLUME)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addExistingVolume"))+" ")]),a("button",{staticClass:"btn btn-sm bg-primary mr-15 mb-10",attrs:{type:"button"},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.IMAGE)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addVmImage"))+" ")]),a("button",{staticClass:"btn btn-sm bg-primary mb-10",attrs:{type:"button",disabled:0===e.rows.length},on:{click:function(t){return e.addVolume(e.SOURCE_TYPE.CONTAINER)}}},[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.addContainer"))+" ")])]),a("ModalWithCard",{ref:"deleteTip",attrs:{name:"deleteTip",width:400},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.volume.unmount.title"))+" ")]},proxy:!0},{key:"content",fn:function(){return[a("span",[e._v(e._s(e.t("harvester.virtualMachine.volume.unmount.message")))])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"buttons"},[a("button",{staticClass:"btn role-secondary mr-20",on:{click:function(t){return t.preventDefault(),e.cancel.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.no"))+" ")]),a("button",{staticClass:"btn bg-primary mr-20",on:{click:function(t){return t.preventDefault(),e.deleteVolume.apply(null,arguments)}}},[e._v(" "+e._s(e.t("generic.yes"))+" ")])])]},proxy:!0}])})],1)},n=[],s=a("56d4"),i=a.n(s),o=a("6e12"),l=a.n(o),u=a("6583"),d=a("dffb"),c=a("2c0b"),p=a("2007"),f=a("d444"),v=a("53fe"),m=a("5fe4"),h=a("56a4"),b=a("1832"),y=a("e411"),g=a("06f6"),w=a("b12c"),x=a("d6a6");function S(e){return _(e)||C(e)||k(e)||O()}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){if(e){if("string"===typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}function C(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e){if(Array.isArray(e))return M(e)}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I(e,t,a,r,n,s,i){try{var o=e[s](i),l=o.value}catch(u){return void a(u)}o.done?t(l):Promise.resolve(l).then(r,n)}function A(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function i(e){I(s,r,n,i,o,"next",e)}function o(e){I(s,r,n,i,o,"throw",e)}i(void 0)}))}}var N={components:{Banner:d["a"],BadgeStateFormatter:c["default"],draggable:l.a,InfoBox:u["a"],LabeledInput:f["a"],UnitInput:p["a"],LabeledSelect:v["a"],ModalWithCard:m["a"]},props:{vm:{type:Object,default:function(){return{}}},mode:{type:String,default:x["g"]},value:{type:Array,default:function(){return[]}},namespace:{type:String,default:null},existingVolumeDisabled:{type:Boolean,default:!1},validateRequired:{type:Boolean,default:!1},customVolumeMode:{type:String,default:"Block"},customAccessMode:{type:String,default:"ReadWriteMany"},resourceType:{type:String,default:""}},fetch:function(){var e=this;return A(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("harvester/findAll",{type:h["x"]});case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{SOURCE_TYPE:w["d"],rows:Object(b["e"])(this.value),nameIdx:1,vol:null}},computed:{isVirtualType:function(){return this.resourceType===h["h"].VM},isView:function(){return this.mode===x["o"]},isEdit:function(){return this.mode===x["i"]},isCreate:function(){return this.mode===x["g"]},showVolumeTip:function(){var e,t=this.getImageDisplayName(null===(e=this.rows[0])||void 0===e?void 0:e.image);return!(1!==this.rows.length||"cd-rom"!==this.rows[0].type||!/.iso$/i.test(t))},pvcs:function(){return this.$store.getters["harvester/all"](h["x"])||[]}},watch:{value:{handler:function(e){var t=this,a=e.map((function(e){return t.isCreate||e.source===w["d"].CONTAINER||e.newCreateId||(e.to={name:"c-cluster-product-resource-namespace-id",params:{product:"harvester",resource:h["h"].VOLUME,namespace:t.namespace,id:e.realName},query:{mode:x["i"]}},e.pvc=t.pvcs.find((function(t){return t.metadata.name===e.realName}))),e}));this.$set(this,"rows",a)},deep:!0,immediate:!0}},methods:{addVolume:function(e){var t=this.generateName(),a={id:Object(g["p"])(5),name:t,source:e,size:"10Gi",type:"disk",accessMode:this.customAccessMode,volumeMode:this.customVolumeMode,volumeName:"",bus:"virtio",newCreateId:Object(g["p"])(10)};this.rows.push(a),this.update()},generateName:function(){var e="",t=!0;while(t)e="disk-".concat(this.nameIdx),t=this.rows.find((function(t){return t.name===e})),this.nameIdx++;return e},removeVolume:function(e){this.vol=e,!e.newCreateId&&this.isEdit&&this.isVirtualType?this.$refs.deleteTip.open():(Object(y["i"])(this.rows,e),this.update())},unplugVolume:function(e){this.vm.unplugVolume(e.name)},componentFor:function(e){switch(e){case w["d"].NEW:return a("a2bd").default;case w["d"].IMAGE:return a("e01b").default;case w["d"].ATTACH_VOLUME:return a("de81").default;case w["d"].CONTAINER:return a("1741").default}},headerFor:function(e){var t;return(t={},E(t,w["d"].NEW,this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.volume")),E(t,w["d"].IMAGE,this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.vmImage")),E(t,w["d"].ATTACH_VOLUME,this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.existingVolume")),E(t,w["d"].CONTAINER,this.$store.getters["i18n/t"]("harvester.virtualMachine.volume.title.container")),t)[e]},update:function(){this.$emit("input",this.rows)},deleteVolume:function(){Object(y["i"])(this.rows,this.vol),this.update(),this.cancel()},cancel:function(){this.$refs.deleteTip.hide()},changeSort:function(e,t){var a;(a=this.rows).splice.apply(a,[t?e:e-1,1].concat(S(this.rows.splice(t?e+1:e,1,this.rows[t?e:e-1])))),this.update()},getImageDisplayName:function(e){var t,a;return null===(t=this.$store.getters["harvester/all"](h["h"].IMAGE).find((function(t){return t.id===e})))||void 0===t||null===(a=t.spec)||void 0===a?void 0:a.displayName}}},$=N,T=(a("7d6cf"),a("d802")),j=Object(T["a"])($,r,n,!1,null,"a3a6f174",null);t["a"]=j.exports},"8b8d":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-1bef0740]:after,.clearfix[data-v-1bef0740]:before{content:" ";display:table}.clearfix[data-v-1bef0740]:after{clear:both}.list-unstyled[data-v-1bef0740]{margin:0;padding:0;list-style-type:none}.no-select[data-v-1bef0740]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-1bef0740]{resize:none}.hand[data-v-1bef0740]{cursor:pointer;cursor:hand}.fixed[data-v-1bef0740]{table-layout:fixed}.clip[data-v-1bef0740]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-1bef0740],.force-wrap[data-v-1bef0740]{word-wrap:break-word}.force-wrap[data-v-1bef0740]{white-space:normal}.bordered-section[data-v-1bef0740]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-1bef0740]{margin-bottom:20px;margin-top:20px}[data-v-1bef0740] .resource-yaml{flex:1;display:flex;flex-direction:column}[data-v-1bef0740] .resource-yaml .yaml-editor{flex:1;min-height:200px}[data-v-1bef0740] .resource-yaml .yaml-editor .code-mirror .CodeMirror{min-height:200px}',""]),e.exports=t},"90c4":function(e,t,a){var r=a("cdc8");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("27b9a845",r,!0,{sourceMap:!1,shadowMode:!1})},9852:function(e,t,a){"use strict";a("a30c")},"987f":function(e,t,a){var r=a("edf0");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("88050252",r,!0,{sourceMap:!1,shadowMode:!1})},"9a75":function(e,t,a){var r=a("6255");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("8c50f7c0",r,!0,{sourceMap:!1,shadowMode:!1})},"9d0c":function(e,t,a){var r=a("6d2d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("5299de16",r,!0,{sourceMap:!1,shadowMode:!1})},a2bd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Loading",{attrs:{mode:"relative",loading:e.loading}}),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-name"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-type"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hev-size"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[a("UnitInput",{attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,mode:e.mode,required:e.validateRequired,label:e.t("harvester.fields.size"),disabled:e.isDisabled},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1),a("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hev-bus"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption,required:""},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])],1)},n=[],s=a("70a6"),i=a("2007"),o=a("2aaa"),l=a("d444"),u=a("53fe"),d=a("56a4"),c=a("67ab"),p=a("b12c"),f={name:"HarvesterEditVolume",components:{InputOrDisplay:o["a"],Loading:s["a"],LabeledInput:l["a"],LabeledSelect:u["a"],UnitInput:i["a"]},props:{mode:{type:String,default:"create"},isEdit:{type:Boolean,default:!1},value:{type:Object,default:function(){return{}}},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data:function(){return{VOLUME_TYPE:p["e"],InterfaceOption:p["b"],loading:!1}},computed:{pvcsResource:function(){var e=this,t=this.$store.getters["harvester/all"](d["x"])||[];return t.find((function(t){return t.metadata.name===e.value.volumeName}))},isDisabled:function(){return!this.value.newCreateId&&this.isEdit&&this.isVirtualType}},watch:{"value.type":function(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcsResource:{handler:function(e){var t,a,r;if(null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&null!==(a=t.resources)&&void 0!==a&&null!==(r=a.requests)&&void 0!==r&&r.storage){var n=Object(c["f"])(e.spec.resources.requests.storage),s=Object(c["e"])(n,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size="".concat(s,"Gi")}},deep:!0,immediate:!0}},methods:{update:function(){this.$emit("update")}}},v=f,m=a("d802"),h=Object(m["a"])(v,r,n,!1,null,null,null);t["default"]=h.exports},a30c:function(e,t,a){var r=a("abe1");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("0baf2ee6",r,!0,{sourceMap:!1,shadowMode:!1})},a3e1:function(e,t,a){var r=a("2bbb");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("d2e6bd02",r,!0,{sourceMap:!1,shadowMode:!1})},a4ca:function(e,t,a){"use strict";a("2b47")},abe1:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-536ff22d]:after,.clearfix[data-v-536ff22d]:before{content:" ";display:table}.clearfix[data-v-536ff22d]:after{clear:both}.list-unstyled[data-v-536ff22d]{margin:0;padding:0;list-style-type:none}.no-select[data-v-536ff22d]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-536ff22d]{resize:none}.hand[data-v-536ff22d]{cursor:pointer;cursor:hand}.fixed[data-v-536ff22d]{table-layout:fixed}.clip[data-v-536ff22d]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-536ff22d],.force-wrap[data-v-536ff22d]{word-wrap:break-word}.force-wrap[data-v-536ff22d]{white-space:normal}.bordered-section[data-v-536ff22d]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-536ff22d]{margin-bottom:20px;margin-top:20px}.password[data-v-536ff22d]{display:flex;flex-direction:column}.password .labeled-input .addon[data-v-536ff22d]{padding-left:12px;min-width:65px}.password .genPassword[data-v-536ff22d]{display:flex;justify-content:flex-end}',""]),e.exports=t},b4fa:function(e,t,a){"use strict";a("c7f1")},b86c:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-2f425664]:after,.clearfix[data-v-2f425664]:before{content:" ";display:table}.clearfix[data-v-2f425664]:after{clear:both}.list-unstyled[data-v-2f425664]{margin:0;padding:0;list-style-type:none}.no-select[data-v-2f425664]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-2f425664]{resize:none}.hand[data-v-2f425664]{cursor:pointer;cursor:hand}.fixed[data-v-2f425664]{table-layout:fixed}.clip[data-v-2f425664]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-2f425664],.force-wrap[data-v-2f425664]{word-wrap:break-word}.force-wrap[data-v-2f425664]{white-space:normal}.bordered-section[data-v-2f425664]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-2f425664]{margin-bottom:20px;margin-top:20px}.volume-source[data-v-2f425664]{position:relative}.remove-vol[data-v-2f425664]{position:absolute;top:10px;right:10px;padding:0}',""]),e.exports=t},b917:function(e,t,a){var r=a("b86c");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("db18b4ea",r,!0,{sourceMap:!1,shadowMode:!1})},c196:function(e,t,a){var r=a("6c20");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("7551af46",r,!0,{sourceMap:!1,shadowMode:!1})},c7f1:function(e,t,a){var r=a("e15a");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("c2dd6b34",r,!0,{sourceMap:!1,shadowMode:!1})},cabd:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",on:{input:e.update}},[a("div",{staticClass:"col span-6"},[a("AccessCredentialsUsers",{attrs:{resource:e.resource,"user-options":e.userOptions,multiple:!1,mode:e.mode},on:{"update:user":e.updateUser,"update:newUser":e.updateNewUser},model:{value:e.value.username,callback:function(t){e.$set(e.value,"username",t)},expression:"value.username"}})],1),a("div",{staticClass:"col span-6"},[a("Password",{ref:"password",attrs:{mode:e.mode,disabled:"edit"!==e.mode,label:e.t("harvester.virtualMachine.input.password"),required:""},model:{value:e.value.newPassword,callback:function(t){e.$set(e.value,"newPassword",t)},expression:"value.newPassword"}})],1)])},n=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"password"},[a("LabeledInput",e._b({ref:"input",attrs:{type:e.isRandom||e.reveal?"text":"password",readonly:e.isRandom,label:e.label,required:e.required,disabled:e.isRandom,"ignore-password-managers":e.ignorePasswordManagers},on:{blur:function(t){return e.$emit("blur",t)}},scopedSlots:e._u([{key:"suffix",fn:function(){return[e.isRandom?a("div",{staticClass:"addon"},[a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.$copyText(e.password)}}},[e._v(e._s(e.t("action.copy")))])]):a("div",{staticClass:"addon"},[e.reveal?a("a",{attrs:{tabindex:"-1",href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.reveal=!1}}},[e._v(e._s(e.t("action.hide")))]):a("a",{attrs:{tabindex:"-1",href:"#"},on:{click:function(t){t.preventDefault(),t.stopPropagation(),e.reveal=!0}}},[e._v(e._s(e.t("action.show")))])])]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},"LabeledInput",e.attributes,!1)),e.isRandom?a("div",{staticClass:"mt-10 genPassword"},[a("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.generatePassword.apply(null,arguments)}}},[a("i",{staticClass:"icon icon-refresh"}),e._v(" "+e._s(e.t("changePassword.newGeneratedPassword")))])]):e._e()],1)},i=[],o=a("9ce4"),l=a("d444"),u=a("06f6");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var f={components:{LabeledInput:l["a"]},props:{value:{default:"",type:String},isRandom:{default:!1,type:Boolean},label:{default:"",type:String},name:{default:"",type:String},autocomplete:{type:String,default:""},required:{default:!1,type:Boolean},ignorePasswordManagers:{default:!1,type:Boolean}},data:function(){return{reveal:!1}},computed:c(c({},Object(o["a"])({t:"i18n/t"})),{},{password:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},attributes:function(){var e={};return this.name&&(e.id=this.name,e.name=this.name),this.autocomplete&&(e.autocomplete=this.autocomplete),e}}),watch:{isRandom:function(){this.isRandom&&this.generatePassword()}},created:function(){this.isRandom&&this.generatePassword()},methods:{generatePassword:function(){this.password=Object(u["p"])(16,u["a"].ALPHA_NUM)},show:function(e){this.reveal=e},focus:function(){this.$refs.input.$refs.value.focus()}}},v=f,m=(a("9852"),a("d802")),h=Object(m["a"])(v,s,i,!1,null,"536ff22d",null),b=h.exports,y=a("f5f2"),g={name:"HarvesterEditVolume",components:{Password:b,AccessCredentialsUsers:y["a"]},props:{mode:{type:String,default:"create"},resource:{type:Object,default:function(){return{}}},userOptions:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}}},data:function(){return{defaultPwdValue:{username:"",newPassword:""}}},methods:{update:function(){this.$emit("update")},updateUser:function(e){this.$set(this.value,"username",e),this.update()},updateNewUser:function(e){this.$emit("update:newUser",e)}}},w=g,x=(a("d006"),Object(m["a"])(w,r,n,!1,null,"8f521f90",null));t["default"]=x.exports},cdc8:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-8f521f90]:after,.clearfix[data-v-8f521f90]:before{content:" ";display:table}.clearfix[data-v-8f521f90]:after{clear:both}.list-unstyled[data-v-8f521f90]{margin:0;padding:0;list-style-type:none}.no-select[data-v-8f521f90]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-8f521f90]{resize:none}.hand[data-v-8f521f90]{cursor:pointer;cursor:hand}.fixed[data-v-8f521f90]{table-layout:fixed}.clip[data-v-8f521f90]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-8f521f90],.force-wrap[data-v-8f521f90]{word-wrap:break-word}.force-wrap[data-v-8f521f90]{white-space:normal}.bordered-section[data-v-8f521f90]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-8f521f90]{margin-bottom:20px;margin-top:20px}.action[data-v-8f521f90]{display:flex;flex-direction:row-reverse}',""]),e.exports=t},d006:function(e,t,a){"use strict";a("90c4")},d903:function(e,t,a){var r=a("453f");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("7f55c718",r,!0,{sourceMap:!1,shadowMode:!1})},de81:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-name"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),mode:e.mode,required:""},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-type"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),mode:e.mode,options:e.VOLUME_TYPE,required:""},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-volumeName"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.volume"),value:e.value.volumeName,mode:e.mode}},[a("LabeledSelect",{attrs:{disabled:e.isDisabled,label:e.t("harvester.fields.volume"),mode:e.mode,options:e.volumeOption,required:""},on:{input:e.update},model:{value:e.value.volumeName,callback:function(t){e.$set(e.value,"volumeName",t)},expression:"value.volumeName"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-size"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[a("UnitInput",{attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:e.mode,disabled:!0},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),a("div",{staticClass:"row mb-20"},[e.image?a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-image"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.image"),value:e.image,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.fields.image"),mode:e.mode,disabled:!0},on:{input:e.update},model:{value:e.image,callback:function(t){e.image=t},expression:"image"}})],1)],1):e._e(),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hee-bus"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption,disabled:!0,required:""},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},n=[],s=a("2007"),i=a("d444"),o=a("53fe"),l=a("2aaa"),u=a("7592"),d=a("56a4"),c=a("d6a6"),p=a("b12c"),f=a("b0bd"),v={name:"HarvesterEditExisting",components:{UnitInput:s["a"],LabeledInput:i["a"],LabeledSelect:o["a"],InputOrDisplay:l["a"]},props:{mode:{type:String,default:c["g"]},value:{type:Object,required:!0},isEdit:{type:Boolean,default:!1},namespace:{type:String,default:null},idx:{type:Number,default:0},rows:{type:Array,required:!0}},data:function(){return this.value.realName&&(this.value.volumeName=this.value.realName),{VOLUME_TYPE:p["e"],InterfaceOption:p["b"],loading:!1}},computed:{isDisabled:function(){return!this.value.newCreateId&&this.isEdit},allPVCs:function(){var e=this,t=this.$store.getters["harvester/all"](d["x"]);return t.filter((function(t){return!e.namespace||e.namespace===t.metadata.namespace}))||[]},image:function(){var e=this,t=this.$store.getters["harvester/all"](d["h"].IMAGE).find((function(t){var a,r,n;return t.id===(null===(a=e.pvcResource)||void 0===a||null===(r=a.metadata)||void 0===r||null===(n=r.annotations)||void 0===n?void 0:n[f["f"].IMAGE_ID])}));if(t)return"".concat(t.metadata.namespace,"/").concat(t.spec.displayName)},pvcResource:function(){var e=this;return this.allPVCs.find((function(t){return t.metadata.name===e.value.volumeName}))},volumeOption:function(){var e=this;return Object(u["a"])(this.allPVCs.filter((function(t){var a,r,n,s,i=!0,o=!1;return e.rows.forEach((function(e){e.volumeName===t.metadata.name&&(i=!1)})),!!(0!==e.idx||null!==(a=t.metadata)&&void 0!==a&&null!==(r=a.annotations)&&void 0!==r&&r[f["f"].IMAGE_ID])&&(t.attachVM&&i&&(null===(n=t.attachVM)||void 0===n?void 0:n.id)===(null===(s=e.vm)||void 0===s?void 0:s.id)&&e.isEdit?o=!1:t.attachVM&&(o=!0),i&&!o&&t.isAvailable)})).map((function(e){return{label:e.metadata.name,value:e.metadata.name}})),"label")}},watch:{"value.volumeName":function(e){var t=this.allPVCs.find((function(t){return t.metadata.name===e}));t&&(this.value.accessModes=t.spec.accessModes[0],this.value.size=t.spec.resources.requests.storage,this.value.storageClassName=t.spec.storageClassName,this.value.volumeMode=t.spec.volumeMode)},"value.type":function(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcResource:{handler:function(e){var t;!this.value.volumeName&&null!==e&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&t.name&&(this.value.volumeName=e.metadata.name)},deep:!0,immediate:!0}},created:function(){0!==this.idx||this.image||(this.value.volumeName=null)},methods:{update:function(){this.$emit("update")}}},m=v,h=a("d802"),b=Object(h["a"])(m,r,n,!1,null,null,null);t["default"]=b.exports},e01b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-name"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.name"),value:e.value.name,mode:e.mode}},[a("LabeledInput",{attrs:{label:e.t("harvester.fields.name"),required:"",mode:e.mode},on:{input:e.update},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-type"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.type"),value:e.value.type,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.fields.type"),options:e.VOLUME_TYPE,mode:e.mode},on:{input:e.update},model:{value:e.value.type,callback:function(t){e.$set(e.value,"type",t)},expression:"value.type"}})],1)],1)]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-image"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.image"),value:e.imageName,mode:e.mode}},[a("LabeledSelect",{attrs:{disabled:0===e.idx&&!e.isCreate&&!e.value.newCreateId&&e.isVirtualType,label:e.t("harvester.fields.image"),options:e.imagesOption,mode:e.mode,required:e.validateRequired},on:{input:e.onImageChange},model:{value:e.value.image,callback:function(t){e.$set(e.value,"image",t)},expression:"value.image"}})],1)],1),a("div",{staticClass:"col span-6",attrs:{"data-testid":"input-hevi-size"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.fields.size"),value:e.value.size,mode:e.mode}},[a("UnitInput",{attrs:{"output-modifier":!0,increment:1024,"input-exponent":3,label:e.t("harvester.fields.size"),mode:e.mode,required:e.validateRequired,suffix:"GiB",disabled:e.isDisabled},on:{input:e.update},model:{value:e.value.size,callback:function(t){e.$set(e.value,"size",t)},expression:"value.size"}})],1)],1)]),a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-3",attrs:{"data-testid":"input-hevi-bus"}},[a("InputOrDisplay",{attrs:{name:e.t("harvester.virtualMachine.volume.bus"),value:e.value.bus,mode:e.mode}},[a("LabeledSelect",{attrs:{label:e.t("harvester.virtualMachine.volume.bus"),mode:e.mode,options:e.InterfaceOption},on:{input:e.update},model:{value:e.value.bus,callback:function(t){e.$set(e.value,"bus",t)},expression:"value.bus"}})],1)],1)])])},n=[],s=a("2007"),i=a("d444"),o=a("53fe"),l=a("2aaa"),u=a("56a4"),d=a("67ab"),c=a("b12c"),p={name:"HarvesterEditVMImage",components:{UnitInput:s["a"],LabeledInput:i["a"],LabeledSelect:o["a"],InputOrDisplay:l["a"]},props:{value:{type:Object,default:function(){return{}}},namespace:{type:String,default:null},mode:{type:String,default:"create"},idx:{type:Number,required:!0},isCreate:{type:Boolean,default:!0},isEdit:{type:Boolean,default:!1},validateRequired:{type:Boolean,required:!0},isVirtualType:{type:Boolean,default:!0}},data:function(){return{VOLUME_TYPE:c["e"],InterfaceOption:c["b"],loading:!1,images:[]}},fetch:function(){this.images=this.$store.getters["harvester/all"](u["h"].IMAGE)},computed:{imagesOption:function(){return this.images.filter((function(e){return e.isReady})).map((function(e){return{label:"".concat(e.metadata.namespace,"/").concat(e.spec.displayName),value:e.id}}))},imageName:function(){var e=this,t=this.imagesOption.find((function(t){return t.value===e.value.image}));return t?t.label:"-"},pvcsResource:function(){var e=this,t=this.$store.getters["harvester/all"](u["x"])||[];return t.find((function(t){return!e.namespace||t.id==="".concat(e.namespace,"/").concat(e.value.volumeName)}))},isDisabled:function(){return!this.value.newCreateId&&this.isEdit&&this.isVirtualType}},watch:{"value.type":function(e){"cd-rom"===e&&(this.$set(this.value,"bus","sata"),this.update())},pvcsResource:{handler:function(e){var t,a,r;if(null!==e&&void 0!==e&&null!==(t=e.spec)&&void 0!==t&&null!==(a=t.resources)&&void 0!==a&&null!==(r=a.requests)&&void 0!==r&&r.storage&&this.isVirtualType){var n=Object(d["f"])(e.spec.resources.requests.storage),s=Object(d["e"])(n,{increment:1024,addSuffix:!1,maxExponent:3,minExponent:3});this.value.size="".concat(s,"Gi")}},deep:!0,immediate:!0}},methods:{update:function(){this.$emit("update")},onImageChange:function(){var e,t=this,a=null===(e=this.$store.getters["harvester/all"](u["h"].IMAGE))||void 0===e?void 0:e.find((function(e){return t.value.image===e.id}));0===this.idx&&(/iso$/i.test(null===a||void 0===a?void 0:a.imageSuffix)?(this.$set(this.value,"type","cd-rom"),this.$set(this.value,"bus","sata")):(this.$set(this.value,"type","disk"),this.$set(this.value,"bus","virtio"))),this.update()},onOpen:function(){this.images=this.$store.getters["harvester/all"](u["h"].IMAGE)}}},f=p,v=a("d802"),m=Object(v["a"])(f,r,n,!1,null,null,null);t["default"]=m.exports},e15a:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-0b580a42]:after,.clearfix[data-v-0b580a42]:before{content:" ";display:table}.clearfix[data-v-0b580a42]:after{clear:both}.list-unstyled[data-v-0b580a42]{margin:0;padding:0;list-style-type:none}.no-select[data-v-0b580a42]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-0b580a42]{resize:none}.hand[data-v-0b580a42]{cursor:pointer;cursor:hand}.fixed[data-v-0b580a42]{table-layout:fixed}.clip[data-v-0b580a42]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-0b580a42],.force-wrap[data-v-0b580a42]{word-wrap:break-word}.force-wrap[data-v-0b580a42]{white-space:normal}.bordered-section[data-v-0b580a42]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-0b580a42]{margin-bottom:20px;margin-top:20px}.label[data-v-0b580a42]{display:flex;flex-direction:column}.label .value[data-v-0b580a42]{font-size:14px;line-height:18px}',""]),e.exports=t},eb32:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label"},[a("div",{staticClass:"text-label"},[e._t("name",(function(){return[e._v(" "+e._s(e.name)+" ")]}))],2),a("div",{staticClass:"value"},[e._t("value",(function(){return[e._v(" "+e._s(e.value)+" ")]}))],2)])},n=[],s={props:{name:{type:String,required:!0},value:{type:[Number,String,void 0],default:""}}},i=s,o=(a("b4fa"),a("d802")),l=Object(o["a"])(i,r,n,!1,null,"0b580a42",null);t["a"]=l.exports},edf0:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.vm__credentials-users .hasUsers.labeled-select.edit.taggable .labeled-tooltip .icon.status-icon{top:30px}',""]),e.exports=t},f3cf:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-1eb849b8]:after,.clearfix[data-v-1eb849b8]:before{content:" ";display:table}.clearfix[data-v-1eb849b8]:after{clear:both}.list-unstyled[data-v-1eb849b8]{margin:0;padding:0;list-style-type:none}.no-select[data-v-1eb849b8]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-1eb849b8]{resize:none}.hand[data-v-1eb849b8]{cursor:pointer;cursor:hand}.fixed[data-v-1eb849b8]{table-layout:fixed}.clip[data-v-1eb849b8]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-1eb849b8],.force-wrap[data-v-1eb849b8]{word-wrap:break-word}.force-wrap[data-v-1eb849b8]{white-space:normal}.bordered-section[data-v-1eb849b8]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-1eb849b8]{margin-bottom:20px;margin-top:20px}.label[data-v-1eb849b8]{display:flex;flex-direction:column}.label .value[data-v-1eb849b8]{font-size:14px;line-height:18px}',""]),e.exports=t},f3f0:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"columns row"},[a("div",{staticClass:"col span-6"},[a("AccessCredentialsUsers",{attrs:{resource:e.resource,"user-options":e.userOptions,mode:e.mode,multiple:!0},on:{"update:user":e.updateUser,"update:newUser":e.updateNewUser},model:{value:e.value.users,callback:function(t){e.$set(e.value,"users",t)},expression:"value.users"}})],1),a("div",{staticClass:"col span-6"},[a("SSHKey",{staticClass:"mb-20",attrs:{namespace:e.resource.metadata.namespace,mode:e.mode,searchable:!1},on:{"update:sshKey":e.updateSSH},model:{value:e.value.sshkeys,callback:function(t){e.$set(e.value,"sshkeys",t)},expression:"value.sshkeys"}})],1)])])},n=[],s=a("79bb"),i=a("f5f2"),o={name:"HarvesterEditVolume",components:{SSHKey:s["a"],AccessCredentialsUsers:i["a"]},props:{mode:{type:String,default:"create"},resource:{type:Object,default:function(){return{}}},userOptions:{type:Array,default:function(){return[]}},value:{type:Object,default:function(){return{}}}},methods:{update:function(){this.$emit("update")},updateUser:function(e){this.$set(this.value,"users",e),this.update()},updateSSH:function(e){this.$set(this.value,"sshkeys",e),this.update()},updateNewUser:function(e){this.$emit("update:newUser",e)}}},l=o,u=a("d802"),d=Object(u["a"])(l,r,n,!1,null,null,null);t["default"]=d.exports},f4f2:function(e,t,a){"use strict";a("c196")},f5f2:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vm__credentials-users"},[a("LabeledSelect",{class:{hasUsers:e.selectedUser.length>0},attrs:{options:e.userOptions,label:e.t("harvester.virtualMachine.accessCredentials.injectSSH.users"),taggable:e.multiple,mode:e.mode,multiple:e.multiple,searchable:!1,tooltip:e.t("harvester.virtualMachine.accessCredentials.userTips")},on:{input:e.update},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),a("ModalWithCard",{ref:e.randomStr,attrs:{name:e.randomStr,width:"40%",errors:e.errors},on:{finish:e.addUser,close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s(e.t("harvester.virtualMachine.accessCredentials.injectSSH.addUser"))+" ")]},proxy:!0},{key:"content",fn:function(){return[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.virtualMachine.input.username"),required:""},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),function(){}.apply(null,arguments))}},model:{value:e.newUsername,callback:function(t){e.newUsername=t},expression:"newUsername"}})]},proxy:!0}])})],1)},n=[],s=a("9ce4"),i=a("1832"),o=a("06f6"),l=a("d444"),u=a("53fe"),d=a("5fe4");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v="_NEW",m={components:{LabeledInput:l["a"],LabeledSelect:u["a"],ModalWithCard:d["a"]},props:{value:{type:[Array,String],default:function(){return[]}},resource:{type:Object,default:function(){return{}}},userOptions:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},mode:{type:String,default:"create"},disabled:{type:Boolean,default:!1}},data:function(){return{selectedUser:this.value,newUsername:"",randomStr:Object(o["p"])(5).toLowerCase(),errors:[]}},computed:p({},Object(s["a"])({t:"i18n/t"})),watch:{value:function(e){this.selectedUser=e},selectedUser:function(e,t){e.includes(v)&&(this.$set(this,"selectedUser",t),this.update(),this.show())}},methods:{update:function(){this.$emit("update:user",Object(i["e"])(this.selectedUser))},addUser:function(e){var t=/^[-._0-9a-zA-Z]+$/;if(this.errors=[],!t.test(this.newUsername)){var a=this.t("harvester.virtualMachine.accessCredentials.invalidUser");return this.errors.push(a),void e(!1)}if(this.userOptions.includes(this.newUsername)){var r=this.t("harvester.virtualMachine.accessCredentials.duplicatedUser");return this.errors.push(r),void e(!1)}this.multiple?this.selectedUser.push(this.newUsername):this.selectedUser=this.newUsername,this.$emit("update:newUser",this.newUsername),this.update(),e(!0),this.cancel()},show:function(){this.$modal.show(this.randomStr)},hide:function(){this.$modal.hide(this.randomStr)},cancel:function(){this.hide(),this.newUsername=""}}},h=m,b=(a("138a"),a("d802")),y=Object(b["a"])(h,r,n,!1,null,null,null);t["a"]=y.exports},f605:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.card-container{border-radius:var(--border-radius);display:flex;flex-basis:40%;margin:10px;min-height:100px;padding:10px;box-shadow:0 0 20px var(--shadow)}.card-container.highlight-border{border-left:5px solid var(--primary)}.card-container:not(.top){align-items:top;flex-direction:row;justify-content:start}.card-container .card-wrap{width:100%}.card-container .card-body{color:var(--input-label);display:flex;flex-direction:column;justify-content:center}.card-container .card-actions{align-self:end;display:flex;padding-top:20px}.card-container .card-title{align-items:center;display:flex;width:100%}.card-container .card-title h5{margin:0}.card-container .card-title .flex-right{margin-left:auto}',""]),e.exports=t}}]);
//# sourceMappingURL=harvester-0.3.0.umd.min.detail~edit.js.map