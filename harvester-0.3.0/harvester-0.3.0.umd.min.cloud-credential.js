(("undefined"!==typeof self?self:this)["webpackJsonpharvester_0_3_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_0_3_0"]||[]).push([[3],{9916:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row mb-10"},[r("RadioGroup",{attrs:{mode:e.mode,disabled:e.isEdit,name:"clusterType",labels:[e.t("cluster.credential.harvester.import"),e.t("cluster.credential.harvester.external")],options:[e.IMPORTED,"external"]},on:{input:function(t){return e.value.setData("clusterType",t)}},model:{value:e.value.decodedData.clusterType,callback:function(t){e.$set(e.value.decodedData,"clusterType",t)},expression:"value.decodedData.clusterType"}})],1),r("div",{staticClass:"row mb-10"},[e.isImportCluster?r("div",{staticClass:"col span-6"},[r("LabeledSelect",{attrs:{mode:e.mode,disabled:e.isEdit,options:e.clusterOptions,required:!0,label:e.t("cluster.credential.harvester.cluster")},model:{value:e.cluster,callback:function(t){e.cluster=t},expression:"cluster"}})],1):e._e(),r("div",{staticClass:"col span-6"},[e.isImportCluster?e._e():r("LabeledInput",{attrs:{value:e.value.decodedData.kubeconfigContent,"label-key":"cluster.credential.harvester.kubeconfigContent.label",required:!0,type:"multiline","min-height":160,mode:e.mode},on:{input:function(t){return e.value.setData("kubeconfigContent",t)}}})],1)])])},a=[],s=r("56d4"),i=r.n(s),u=r("c78c"),l=r("d444"),c=r("53fe"),o=r("f032"),d=r("1832"),v=r("56a4");function f(e,t,r,n,a,s,i){try{var u=e[s](i),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){f(s,n,a,i,u,"next",e)}function u(e){f(s,n,a,i,u,"throw",e)}i(void 0)}))}}var h="imported",m={components:{LabeledInput:l["a"],LabeledSelect:c["a"],RadioGroup:o["b"]},mixins:[u["a"]],fetch:function(){var e=this;return p(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("management/findAll",{type:v["n"].CLUSTER});case 2:e.clusters=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){this.$emit("validationChanged",!0),this.value.decodedData.clusterType||this.value.setData("clusterType",h);var e=Object(d["g"])(this.value,"harvestercredentialConfig.clusterId")||"";return{clusters:[],cluster:e,IMPORTED:h}},computed:{clusterOptions:function(){return this.clusters.filter((function(e){var t;return(null===(t=e.status)||void 0===t?void 0:t.provider)===v["G"]})).map((function(e){return{value:e.id,label:e.nameDisplay}}))},isImportCluster:function(){return this.value.decodedData.clusterType===h}},watch:{"value.decodedData.clusterType":{handler:function(e){this.isCreate&&(this.value.setData("kubeconfigContent",""),this.cluster="")}},cluster:function(e){var t=this;return p(i.a.mark((function r(){var n,a;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return t.isCreate&&Object(d["i"])(t.value,"harvestercredentialConfig.clusterId",e),n=t.$store.getters["management/all"](v["n"].CLUSTER).find((function(t){return t.id===e})),t.$nuxt.$loading.start(),r.next=7,n.generateKubeConfig();case 7:a=r.sent,t.$nuxt.$loading.finish(),t.value.setData("kubeconfigContent",a);case 10:case"end":return r.stop()}}),r)})))()}},methods:{test:function(){var e=this.$store.getters["i18n/t"];if(!this.cluster&&this.isImportCluster){var t=e("cluster.credential.harvester.cluster"),r=[e("validation.required",{key:t})];return{errors:r}}if(this.value.decodedData.kubeconfigContent)return!0;var n=e("cluster.credential.harvester.kubeconfigContent.label"),a=[e("validation.required",{key:n})];return{errors:a}}}},b=m,C=r("d802"),g=Object(C["a"])(b,n,a,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=harvester-0.3.0.umd.min.cloud-credential.js.map