(("undefined"!==typeof self?self:this)["webpackJsonpharvester_0_3_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_0_3_0"]||[]).push([[6],{"07ae":function(e,t,a){var r=a("ae81");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("037285c9",r,!0,{sourceMap:!1,shadowMode:!1})},1343:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-3ab4f9ef]:after,.clearfix[data-v-3ab4f9ef]:before{content:" ";display:table}.clearfix[data-v-3ab4f9ef]:after{clear:both}.list-unstyled[data-v-3ab4f9ef]{margin:0;padding:0;list-style-type:none}.no-select[data-v-3ab4f9ef]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-3ab4f9ef]{resize:none}.hand[data-v-3ab4f9ef]{cursor:pointer;cursor:hand}.fixed[data-v-3ab4f9ef]{table-layout:fixed}.clip[data-v-3ab4f9ef]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-3ab4f9ef],.force-wrap[data-v-3ab4f9ef]{word-wrap:break-word}.force-wrap[data-v-3ab4f9ef]{white-space:normal}.bordered-section[data-v-3ab4f9ef]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-3ab4f9ef]{margin-bottom:20px;margin-top:20px}#vm[data-v-3ab4f9ef]  .vm-radio-group .radio-group{display:flex}#vm[data-v-3ab4f9ef]  .vm-radio-group .radio-group .radio-container{margin-right:30px}#vm .restart[data-v-3ab4f9ef]{display:flex;justify-content:flex-end}#vm .banner-right[data-v-3ab4f9ef]{width:auto;display:flex;justify-items:center}',""]),e.exports=t},"1c4d":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}#restore .radio-group{display:flex}#restore .radio-group .radio-container{margin-right:30px}',""]),e.exports=t},"20eb":function(e,t,a){"use strict";a("07ae")},"23eb":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"restore"}},[a("div",{staticClass:"mb-20"},[a("RadioGroup",{attrs:{name:"model",options:[!0,!1],labels:[e.t("harvester.backup.restore.createNew"),e.t("harvester.backup.restore.replaceExisting")],disabled:e.disableExisting,mode:e.mode},model:{value:e.restoreNewVm,callback:function(t){e.restoreNewVm=t},expression:"restoreNewVm"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{disabled:!e.restoreNewVm,label:e.t("nameNsDescription.namespace.label"),options:e.namespaces},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{disabled:!e.restoreNewVm,label:e.t("harvester.backup.restore.virtualMachineName"),placeholder:e.t("nameNsDescription.name.placeholder")},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)]),a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.backup.restore.backup"),options:e.backupOption},model:{value:e.backupName,callback:function(t){e.backupName=t},expression:"backupName"}}),e.restoreNewVm?e._e():a("LabeledSelect",{attrs:{label:e.t("harvester.backup.restore.deletePreviousVolumes"),options:e.deletionPolicyOption},model:{value:e.deletionPolicy,callback:function(t){e.deletionPolicy=t},expression:"deletionPolicy"}}),a("Footer",{attrs:{mode:"create",errors:e.errors},on:{save:e.saveRestore,done:e.done}})],1)},n=[],o=a("56d4"),s=a.n(o),i=a("9aaf"),l=a("f032"),c=a("d444"),u=a("53fe"),d=a("c78c"),p=a("b837"),v=a("3792"),m=a("56a4"),f=a("7592"),h=a("1832");function b(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(v){return void a(v)}i.done?t(l):Promise.resolve(l).then(r,n)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){b(o,r,n,s,i,"next",e)}function i(e){b(o,r,n,s,i,"throw",e)}s(void 0)}))}}var g={apiVersion:"harvesterhci.io/v1beta1",kind:"VirtualMachineRestore",metadata:{name:"",namespace:""},type:m["h"].RESTORE,spec:{target:{apiGroup:"kubevirt.io",kind:"VirtualMachine",name:""},virtualMachineBackupName:"",newVM:!0,deletionPolicy:"delete"}},w={name:"CreateRestore",components:{Footer:i["a"],RadioGroup:l["b"],LabeledInput:c["a"],LabeledSelect:u["a"]},mixins:[d["a"]],fetch:function(){var e=this;return y(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["a"])({backups:e.$store.dispatch("harvester/findAll",{type:m["h"].BACKUP}),vms:e.$store.dispatch("harvester/findAll",{type:m["h"].VM})});case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a=null===(e=this.$route.query)||void 0===e?void 0:e.restoreMode,r=null===(t=this.$route.query)||void 0===t?void 0:t.backupName,n=Object(h["e"])(g),o="new"===a||void 0===a;return{backupName:r,restoreNewVm:o,restoreResource:n,name:"",description:"",deletionPolicy:"delete",namespace:""}},computed:{backupOption:function(){var e=this,t=this.$store.getters["harvester/all"](m["h"].BACKUP);return t.filter((function(t){var a,r=e.restoreNewVm||t.attachVmExisting;return r&&(null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.readyToUse)})).map((function(e){return{label:e.metadata.name,value:e.metadata.name}}))},deletionPolicyOption:function(){return[{value:"delete",label:"Delete"},{value:"retain",label:"Retain"}]},currentBackupResource:function(){var e=this.backupName,t=this.$store.getters["harvester/all"](m["h"].BACKUP);return t.find((function(t){return t.name===e}))},disableExisting:function(){var e;return!(null!==(e=this.currentBackupResource)&&void 0!==e&&e.attachVmExisting)},backupNamespace:function(){var e,t,a=this,r=this.$store.getters["harvester/all"](m["h"].BACKUP);return null===(e=r.find((function(e){return e.metadata.name===a.backupName})))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.namespace},namespaces:function(){var e=this.$store.getters["currentStore"](m["q"]),t=this.$store.getters["".concat(e,"/all")](m["q"]),a=this.$store.getters["systemNamespaces"],r=Object(f["a"])(t.filter((function(e){return!a.includes(e.metadata.name)})).map((function(e){return{label:e.nameDisplay,value:e.id}})),"label");return r}},watch:{backupName:{handler:function(e){var t;this.currentBackupResource&&(this.restoreNewVm||(this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM));this.restoreResource.spec.virtualMachineBackupName=e},immediate:!0},restoreNewVm:function(e){var t;e?this.name="":this.name=null===this||void 0===this||null===(t=this.currentBackupResource)||void 0===t?void 0:t.attachVM},backupNamespace:{handler:function(e){this.namespace=e},immediate:!0}},methods:{saveRestore:function(e){var t=this;return y(s.a.mark((function a(){var r;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.update(),a.next=3,t.$store.dispatch("harvester/create",t.restoreResource);case 3:return r=a.sent,r.metadata.namespace=t.namespace,r.spec.virtualMachineBackupNamespace=t.backupNamespace,a.prev=6,a.next=9,r.save();case 9:e(!0),t.$router.push({name:t.doneRoute,params:{resource:m["h"].VM}}),a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](6),t.errors=Object(v["a"])(a.t0)||a.t0,e(!1);case 17:case"end":return a.stop()}}),a,null,[[6,13]])})))()},update:function(){this.restoreResource.metadata.generateName="restore-".concat(this.backupName,"-"),this.name&&(this.restoreResource.spec.target.name=this.name),this.restoreNewVm?(delete this.restoreResource.spec.deletionPolicy,this.restoreResource.spec.newVM=!0):(this.restoreResource.spec.deletionPolicy=this.deletionPolicy,delete this.restoreResource.spec.newVM)}},componentTitle:function(){return"restoreVM"}},k=w,x=(a("c21b"),a("d802")),O=Object(x["a"])(k,r,n,!1,null,null,null);t["default"]=O.exports},2785:function(e,t,a){"use strict";a("f004")},2958:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"key-value"},[e.title||e.$slots.title?a("div",{staticClass:"clearfix"},[e._t("title",(function(){return[a("h3",[e._v(" "+e._s(e.title)+" "),e.titleProtip?a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.titleProtip,expression:"titleProtip"}],staticClass:"icon icon-info"}):e._e()])]}))],2):e._e(),a("div",{staticClass:"kv-container",style:e.containerStyle},[e.rows.length||e.isView?[a("label",{staticClass:"text-label"},[e._v(" "+e._s(e.keyLabel)+" "),e.protip&&!e.isView&&e.addAllowed?a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.protip,expression:"protip"}],staticClass:"icon icon-info"}):e._e()]),a("label",{staticClass:"text-label"},[e._v(" "+e._s(e.valueLabel)+" ")]),e._l(e.extraColumns,(function(t){return a("label",{key:t},[e._t("label:"+t,(function(){return[e._v(e._s(t))]}))],2)})),e.canRemove?e._t("remove",(function(){return[a("span")]})):e._e()]:e._e(),!e.rows.length&&e.isView?[a("div",{staticClass:"kv-item key text-muted"},[e._v(" — ")]),a("div",{staticClass:"kv-item key text-muted"},[e._v(" — ")])]:e._l(e.rows,(function(t,r){return[a("div",{key:r+"key",staticClass:"kv-item key"},[e._t("key",(function(){return[e.keyOptions?a("Select",{ref:"key",refInFor:!0,attrs:{searchable:!0,clearable:!1,taggable:e.keyTaggable,options:e.calculateOptions(t[e.keyName])},on:{input:e.queueUpdate},model:{value:t[e.keyName],callback:function(a){e.$set(t,e.keyName,a)},expression:"row[keyName]"}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t[e.keyName],expression:"row[keyName]"}],ref:"key",refInFor:!0,attrs:{disabled:e.isView||!e.keyEditable,placeholder:e.keyPlaceholder},domProps:{value:t[e.keyName]},on:{input:[function(a){a.target.composing||e.$set(t,e.keyName,a.target.value)},e.queueUpdate],paste:function(t){return e.onPaste(r,t)}}})]}),{row:t,mode:e.mode,keyName:e.keyName,valueName:e.valueName,queueUpdate:e.queueUpdate})],2),a("div",{key:r+"value",staticClass:"kv-item value"},[e._t("value",(function(){return[t.supported?t.binary?a("div",[e._v(" "+e._s(e.binaryTextSize(t.value))+" ")]):e.valueMultiline?a("TextAreaAutoGrow",{class:{conceal:e.valueConcealed},attrs:{mode:e.mode,placeholder:e.valuePlaceholder,"min-height":40,spellcheck:!1},on:{input:e.queueUpdate},model:{value:t[e.valueName],callback:function(a){e.$set(t,e.valueName,a)},expression:"row[valueName]"}}):"checkbox"===(e.valueConcealed?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t[e.valueName],expression:"row[valueName]"}],attrs:{disabled:e.isView,placeholder:e.valuePlaceholder,autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"checkbox"},domProps:{checked:Array.isArray(t[e.valueName])?e._i(t[e.valueName],null)>-1:t[e.valueName]},on:{input:e.queueUpdate,change:function(a){var r=t[e.valueName],n=a.target,o=!!n.checked;if(Array.isArray(r)){var s=null,i=e._i(r,s);n.checked?i<0&&e.$set(t,e.valueName,r.concat([s])):i>-1&&e.$set(t,e.valueName,r.slice(0,i).concat(r.slice(i+1)))}else e.$set(t,e.valueName,o)}}}):"radio"===(e.valueConcealed?"password":"text")?a("input",{directives:[{name:"model",rawName:"v-model",value:t[e.valueName],expression:"row[valueName]"}],attrs:{disabled:e.isView,placeholder:e.valuePlaceholder,autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"radio"},domProps:{checked:e._q(t[e.valueName],null)},on:{input:e.queueUpdate,change:function(a){return e.$set(t,e.valueName,null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t[e.valueName],expression:"row[valueName]"}],attrs:{disabled:e.isView,placeholder:e.valuePlaceholder,autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:e.valueConcealed?"password":"text"},domProps:{value:t[e.valueName]},on:{input:[function(a){a.target.composing||e.$set(t,e.valueName,a.target.value)},e.queueUpdate]}}):a("div",[e._v(" "+e._s(e.t("detailText.unsupported",null,!0))+" ")])]}),{row:t,mode:e.mode,keyName:e.keyName,valueName:e.valueName,queueUpdate:e.queueUpdate})],2),e._l(e.extraColumns,(function(n){return a("div",{key:r+n,staticClass:"kv-item extra"},[e._t("col:"+n,null,{row:t,queueUpdate:e.queueUpdate})],2)})),e.canRemove?a("div",{key:r,staticClass:"kv-item remove",attrs:{"data-testid":"remove-column-"+r}},[e._t("removeButton",(function(){return[a("button",{staticClass:"btn role-link",attrs:{type:"button",disabled:e.isView},on:{click:function(t){return e.remove(r)}}},[e._v(" "+e._s(e.removeLabel||e.t("generic.remove"))+" ")])]}),{remove:e.remove,row:t,i:r})],2):e._e()]}))],2),!e.addAllowed&&!e.readAllowed||e.isView?e._e():a("div",{staticClass:"footer"},[e._t("add",(function(){return[e.addAllowed?a("button",{staticClass:"btn role-tertiary add",attrs:{type:"button",disabled:e.loading||e.keyOptions&&0===e.filteredKeyOptions.length},on:{click:function(t){return e.add()}}},[e.loading?a("i",{staticClass:"mr-5 icon icon-spinner icon-spin icon-lg"}):e._e(),e._v(" "+e._s(e.addLabel)+" ")]):e._e(),e.readAllowed?a("FileSelector",{staticClass:"role-tertiary",attrs:{disabled:e.isView,label:e.t("generic.readFromFile"),"include-file-name":!0},on:{selected:e.onFileSelected}}):e._e()]}),{add:e.add})],2)])},n=[],o=a("44db"),s=a.n(o),i=a("7592"),l=a("e411"),c=a("8672"),u=a("32ff"),d=a("cd3a"),p=a("1832"),v=a("81a6"),m=a("3204"),f=a("d6a6"),h=a("06f6");function b(e){return w(e)||g(e)||E(e)||y()}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e){if(Array.isArray(e))return T(e)}function k(e,t){return S(e)||O(e,t)||E(e,t)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o=[],s=!0,i=!1;try{for(a=a.call(e);!(s=(r=a.next()).done);s=!0)if(o.push(r.value),t&&o.length===t)break}catch(l){i=!0,n=l}finally{try{s||null==a["return"]||a["return"]()}finally{if(i)throw n}}return o}}function S(e){if(Array.isArray(e))return e}function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){j(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=E(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(i)throw o}}}}function E(e,t){if(e){if("string"===typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var I={components:{Select:v["a"],TextAreaAutoGrow:d["a"],FileSelector:m["b"]},props:{value:{type:[Array,Object],default:null},binaryValueKeys:{type:[Array,Object],default:null},mode:{type:String,default:f["i"]},asMap:{type:Boolean,default:!0},initialEmptyRow:{type:Boolean,default:!1},title:{type:String,default:""},titleProtip:{type:String,default:""},protip:{type:[String,Boolean],default:function(){return this.$store.getters["i18n/t"]("keyValue.protip",null,!0)}},keyName:{type:String,default:"key"},keyLabel:{type:String,default:function(){return this.$store.getters["i18n/t"]("generic.key")}},keyEditable:{type:Boolean,default:!0},keyOptions:{type:Array,default:null},keyTaggable:{type:Boolean,default:!0},keyOptionUnique:{type:Boolean,default:!1},keyPlaceholder:{type:String,default:function(){return this.$store.getters["i18n/t"]("keyValue.keyPlaceholder")}},separatorLabel:{type:String,default:""},valueName:{type:String,default:"value"},valueLabel:{type:String,default:function(){return this.$store.getters["i18n/t"]("generic.value")}},valuePlaceholder:{type:String,default:function(){return this.$store.getters["i18n/t"]("keyValue.valuePlaceholder")}},valueCanBeEmpty:{type:Boolean,default:!1},displayValuesAsBinary:{type:Boolean,default:!1},valueMultiline:{type:Boolean,default:!0},valueTrim:{type:Boolean,default:!0},handleBase64:{type:Boolean,default:!1},valueConcealed:{type:Boolean,default:!1},supported:{type:Function,default:function(e){return!0}},preserveKeys:{type:Array,default:null},extraColumns:{type:Array,default:function(){return[]}},defaultAddData:{type:Object,default:function(){}},addLabel:{type:String,default:function(){return this.$store.getters["i18n/t"]("generic.add")}},addIcon:{type:String,default:"icon-plus"},addAllowed:{type:Boolean,default:!0},readLabel:{type:String,default:function(){return this.$store.getters["i18n/t"]("generic.readFromFile")}},readIcon:{type:String,default:"icon-upload"},readAllowed:{type:Boolean,default:!0},readAccept:{type:String,default:"*"},readMultiple:{type:Boolean,default:!1},removeLabel:{type:String,default:""},removeIcon:{type:String,default:"icon-minus"},removeAllowed:{type:Boolean,default:!0},fileModifier:{type:Function,default:function(e,t){return{name:e,value:t}}},parserSeparators:{type:Array,default:function(){return[": ","="]}},loading:{default:!1,type:Boolean},parseLinesFromFile:{default:!1,type:Boolean}},data:function(){var e,t=this,a=[];if(this.asMap){var r=this.value||{};Object.keys(r).forEach((function(e){var n=r[e],o=Object(c["a"])(r[e]),s=Object(h["b"])(o);t.handleBase64&&s&&(n=Object(c["a"])(n)),a.push({key:e,value:n,binary:t.displayValuesAsBinary||t.handleBase64&&!s,canEncode:t.handleBase64&&s,supported:!0})}))}else{var n,o=this.value||[],s=_(o);try{var i=function(){var e,r,o=n.value,s=o[t.valueName]||"",i=Object(c["a"])(o[t.valueName]),l=Object(h["b"])(i);t.handleBase64&&l&&(s=Object(c["a"])(s));var u=(e={},j(e,t.keyName,o[t.keyName]||""),j(e,t.valueName,s),j(e,"binary",t.displayValuesAsBinary||t.handleBase64&&!l),j(e,"canEncode",t.handleBase64&&l),j(e,"supported",t.supported(o)),e);null===(r=t.preserveKeys)||void 0===r||r.map((function(e){"undefined"!==typeof o[e]&&(u[e]=o[e])})),a.push(u)};for(s.s();!(n=s.n()).done;)i()}catch(l){s.e(l)}finally{s.f()}}!a.length&&this.initialEmptyRow&&a.push((e={},j(e,this.keyName,""),j(e,this.valueName,""),j(e,"binary",!1),j(e,"canEncode",this.handleBase64),j(e,"supported",!0),e));return{rows:a}},computed:{isView:function(){return this.mode===f["o"]},containerStyle:function(){var e=this.canRemove?" 50px":"",t=2+this.extraColumns.length;return"grid-template-columns: repeat(".concat(t,", 1fr)").concat(e,";")},usedKeyOptions:function(){var e=this;return this.rows.map((function(t){return t[e.keyName]}))},filteredKeyOptions:function(){var e=this;return this.keyOptionUnique?this.keyOptions.filter((function(t){return!e.usedKeyOptions.includes(t.value)})):this.keyOptions},canRemove:function(){return!this.isView&&this.removeAllowed}},created:function(){this.queueUpdate=s()(this.update,500)},methods:{add:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=C(C({},this.defaultAddData),{},(e={},j(e,this.keyName,a),j(e,this.valueName,r),e));n.binary=!1,n.canEncode=this.handleBase64,n.supported=!0,this.rows.push(n),this.queueUpdate(),this.$nextTick((function(){if(t.$refs.key){var e=t.$refs.key,a=e[e.length-1];a.focus()}else t.$emit("focusKey")}))},remove:function(e){Object(l["h"])(this.rows,e),this.queueUpdate()},removeEmptyRows:function(){var e=this.rows.filter((function(e){return e.value.length||e.key.length}));this.$set(this,"rows",e)},onFileSelected:function(e){var t=this,a=this.fileModifier(e.name,e.value),r=a.name,n=a.value;if(this.parseLinesFromFile){var o=n.split("\n");o.forEach((function(e){if(e.length){var a=e.split("="),r=k(a,2),n=r[0],o=r[1];t.add(n,o)}}))}else this.add(r,n,this.displayValuesAsBinary)},download:function(e,t){var a=this.rows[e],r=a[this.keyName],n=a[this.valueName];Object(u["a"])(r,n,"application/octet-stream")},update:function(){var e,t=this;if(this.asMap){e={};var a,r=this.keyName,n=this.valueName,o=_(this.rows);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s[n]||"",d=(s[r]||"").trim();u&&"object"===Object(i["c"])(u)?e[d]=JSON.parse(JSON.stringify(u)):(u=u||"",this.valueTrim&&Object(h["b"])(u)&&(u=u.trim()),s.canEncode&&(u=Object(c["b"])(u)),d&&(u||this.valueCanBeEmpty)&&(e[d]=u))}}catch(v){o.e(v)}finally{o.f()}}else{var p=this.preserveKeys||[];Object(l["i"])(p,this.keyName),Object(l["i"])(p,this.valueName),e=this.rows.map((function(e){var a,r=e[t.valueName];e.canEncode&&(r=Object(c["b"])(r));var n,o=(a={},j(a,t.keyName,e[t.keyName]),j(a,t.valueName,r),a),s=_(p);try{for(s.s();!(n=s.n()).done;){var i=n.value;"undefined"!==typeof e[i]&&(o[i]=e[i])}}catch(v){s.e(v)}finally{s.f()}return o}))}this.$emit("input",e)},onPaste:function(e,t,a){var r,n=this,o=t.clipboardData.getData("text/plain"),s=o.split("\n"),i=s.map((function(e){var t=!e.includes(":")||e.indexOf("=")<e.indexOf(":")&&e.includes(":")?"=":":";return e.split(t)}));if(!(0===i.length||1===i.length&&i[0].length<2)){t.preventDefault();var l=i.map((function(e){var t;return t={},j(t,n.keyName,(e[0]||"").trim()),j(t,n.valueName,(e[1]||"").trim()),j(t,"supported",!0),j(t,"canEncode",n.handleBase64),j(t,"binary",n.displayValuesAsBinary),t}));(r=this.rows).splice.apply(r,[e,1].concat(b(l))),this.queueUpdate()}},calculateOptions:function(e){var t=this.keyOptions.find((function(t){return t.value===e}));return t?[t].concat(b(this.filteredKeyOptions)):this.filteredKeyOptions},binaryTextSize:function(e){var t=this.handleBase64?Object(c["a"])(e):e,a=e.length?Object(c["c"])(t):0;return this.t("detailText.binary",{n:a},!0)},get:p["g"]}},P=I,A=(a("20eb"),a("d802")),D=Object(A["a"])(P,r,n,!1,null,null,null);t["a"]=D.exports},"2cc7":function(e,t,a){var r=a("adb6");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("229e46f6",r,!0,{sourceMap:!1,shadowMode:!1})},"380a4":function(e,t,a){var r=a("bec6");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("02d13a19",r,!0,{sourceMap:!1,shadowMode:!1})},"414d":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{staticClass:"route",attrs:{"done-route":"c-cluster-product-resource",errors:e.errors,mode:e.mode,resource:e.value,subtypes:[],"can-yaml":!1},on:{error:function(t){return e.errors=t},finish:e.saveSettings,cancel:e.done}},[a("h4",{domProps:{innerHTML:e._s(e.description)}}),e.editHelp?a("h5",{staticClass:"edit-help",domProps:{innerHTML:e._s(e.editHelp)}}):e._e(),a("div",{staticClass:"edit-change mt-20"},[a("h5",{directives:[{name:"t",rawName:"v-t",value:"advancedSettings.edit.changeSetting",expression:"'advancedSettings.edit.changeSetting'"}]}),a("button",{staticClass:"btn role-primary",attrs:{disabled:!e.canReset,type:"button"},on:{click:e.useDefault}},[e._v(" "+e._s(e.t("advancedSettings.edit.useDefault"))+" ")])]),a("div",{staticClass:"mt-20"},["import"===e.setting.from?a("div",[e.hasCustomComponent?a(e.customComponent,{tag:"component",attrs:{"register-before-hook":e.registerBeforeHook,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1):"enum"===e.setting.kind?a("div",[a("LabeledSelect",{attrs:{label:e.t("advancedSettings.edit.value"),"localized-label":!0,mode:e.mode,options:e.enumOptions},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):"boolean"===e.setting.kind?a("div",[a("RadioGroup",{attrs:{name:"settings_value",labels:[e.t("advancedSettings.edit.trueOption"),e.t("advancedSettings.edit.falseOption")],options:["true","false"]},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):"multiline"===e.setting.kind||"json"===e.setting.kind?a("div",[a("TextAreaAutoGrow",{attrs:{"min-height":254},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1):a("div",[a("LabeledInput",{attrs:{label:e.t("advancedSettings.edit.value")},model:{value:e.value.value,callback:function(t){e.$set(e.value,"value",t)},expression:"value.value"}})],1)])])},n=[],o=a("2e2b"),s=a("f032"),i=a("d444"),l=a("53fe"),c=a("cd3a"),u=a("c78c"),d=a("681a"),p={components:{CruResource:o["a"],LabeledInput:i["a"],LabeledSelect:l["a"],RadioGroup:s["b"],TextAreaAutoGrow:c["a"]},mixins:[u["a"]],data:function(){var e,t,a=this,r=this.$store.getters["i18n/t"],n=d["a"][this.value.id]||d["c"][this.value.id],o=[];"enum"===n.kind&&(o=n.options.map((function(e){return{label:"advancedSettings.enum.harv-".concat(a.value.id,".").concat(e),value:e}})));var s=n.canReset||!!this.value.default||this.value.canReset;void 0===this.value.value&&this.$set(this.value,"value",null),this.value.value=this.value.value||this.value.default||"";var i=null===(e=this.value)||void 0===e||null===(t=e.type)||void 0===t?void 0:t.includes("harvesterhci");return{setting:n,description:r(i?"advancedSettings.descriptions.harv-".concat(this.value.id):"advancedSettings.descriptions.".concat(this.value.id)),editHelp:r("advancedSettings.editHelp.".concat(this.value.id)),enumOptions:o,canReset:s,errors:[],hasCustomComponent:!1,customComponent:null}},computed:{doneLocationOverride:function(){return this.value.doneOverride}},created:function(){var e=!1,t=this.value.metadata.name,a="setting/".concat(t),r=this.$store.getters["type-map/hasComponent"](a);r&&(e=this.$store.getters["type-map/importEdit"](a)),this.hasCustomComponent=r,this.customComponent=e},methods:{saveSettings:function(e){var t=this.$store.getters["i18n/t"];if("json"===this.setting.kind)try{JSON.parse(this.value.value),this.errors=[]}catch(a){return this.errors=[t("advancedSettings.edit.invalidJSON")],e(!1)}this.save(e)},useDefault:function(e){e&&e.srcElement&&e.srcElement.blur(),this.value.id===d["b"].RANCHER_MONITORING?(this.$set(this.value.spec.values.prometheus,"prometheusSpec",Object.assign(this.value.spec.values.prometheus.prometheusSpec,this.value.defaultValue.prometheus,{})),this.$set(this.value.spec.values,"prometheus-node-exporter",Object.assign(this.value.spec.values["prometheus-node-exporter"],this.value.defaultValue["prometheus-node-exporter"],{}))):this.value.id===d["b"].VLAN?(this.value.enable=!1,this.value.config&&(this.value.config.defaultPhysicalNIC="")):this.value.value=this.value.default||""}}},v=p,m=(a("9e58"),a("d802")),f=Object(m["a"])(v,r,n,!1,null,"7bc9fb90",null);t["default"]=f.exports},"4f0c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.spec?a("div",{attrs:{id:"vm"}},[a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,"can-yaml":!!e.isSingle,errors:e.errors,"generate-yaml":e.generateYaml,"apply-hooks":e.applyHooks},on:{finish:e.saveVM}},[e.isCreate?a("RadioGroup",{staticClass:"mb-20 vm-radio-group",attrs:{name:"createInstanceMode",options:[!0,!1],labels:[e.t("harvester.virtualMachine.instance.single.label"),e.t("harvester.virtualMachine.instance.multiple.label")]},model:{value:e.isSingle,callback:function(t){e.isSingle=t},expression:"isSingle"}}):e._e(),a("NameNsDescription",{attrs:{mode:e.mode,"has-extra":!e.isSingle,"name-label":e.nameLabel,namespaced:!0,"name-placeholder":e.isSingle?"nameNsDescription.name.placeholder":"harvester.virtualMachine.instance.multiple.nameNsDescription","extra-columns":e.isSingle?[]:["type"]},scopedSlots:e._u([{key:"type",fn:function(){return[e.isSingle?e._e():a("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{type:"number",label:e.t("harvester.virtualMachine.instance.multiple.count"),required:""},on:{input:e.validateCount},model:{value:e.count,callback:function(t){e.count=e._n(t)},expression:"count"}})]},proxy:!0}],null,!1,4082063570),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.isCreate?a("Checkbox",{staticClass:"check mb-20",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.useTemplate.label"},model:{value:e.useTemplate,callback:function(t){e.useTemplate=t},expression:"useTemplate"}}):e._e(),e.useTemplate?a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.useTemplate.template.label",options:e.templateOptions},on:{input:e.updateTemplateId},model:{value:e.templateId,callback:function(t){e.templateId=t},expression:"templateId"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.useTemplate.version.label",options:e.versionOptions},model:{value:e.templateVersionId,callback:function(t){e.templateVersionId=t},expression:"templateVersionId"}})],1)]):e._e(),a("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[a("Tab",{attrs:{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")}},[a("CpuMemory",{attrs:{cpu:e.cpu,memory:e.memory,mode:e.mode},on:{updateCpuMemory:e.updateCpuMemory}}),a("SSHKey",{staticClass:"mb-20",attrs:{namespace:e.value.metadata.namespace,mode:e.mode,disabled:e.isWindows},on:{"update:sshKey":e.updateSSHKey,"register-after-hook":e.registerAfterHook},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1),a("Tab",{attrs:{name:"Volume",label:e.t("harvester.tab.volume"),weight:-1}},[a("Volume",{attrs:{mode:e.mode,"custom-volume-mode":e.customVolumeMode,namespace:e.value.metadata.namespace,"resource-type":e.value.type,vm:e.value,"validate-required":!0},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),a("Tab",{attrs:{name:"Network",label:e.t("harvester.tab.network"),weight:-2}},[a("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),a("Tab",{attrs:{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:-3}},[a("NodeScheduling",{attrs:{mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions}})],1),e.isEdit?a("Tab",{attrs:{label:e.t("harvester.tab.accessCredentials"),name:"accessCredentials",weight:-4}},[a("AccessCredentials",{attrs:{mode:e.mode,resource:e.value,"is-qemu-installed":e.isQemuInstalled},model:{value:e.accessCredentials,callback:function(t){e.accessCredentials=t},expression:"accessCredentials"}})],1):e._e(),a("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-5}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.runStrategy",options:e.RunStrategys,mode:e.mode},model:{value:e.runStrategy,callback:function(t){e.runStrategy=t},expression:"runStrategy"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.osType",options:e.OS,disabled:!e.isCreate},model:{value:e.osType,callback:function(t){e.osType=t},expression:"osType"}})],1)]),a("div",{staticClass:"row mb-20"},[(e.showAdvanced,a("a",{directives:[{name:"t",rawName:"v-t",value:"harvester.generic.showMore",expression:"'harvester.generic.showMore'"}],attrs:{role:"button"},on:{click:e.toggleAdvanced}}))]),e.showAdvanced?a("div",{staticClass:"mb-20"},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{attrs:{"label-key":e.hostnameLabel,placeholder:e.hostPlaceholder,mode:e.mode},model:{value:e.hostname,callback:function(t){e.hostname=t},expression:"hostname"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.input.MachineType",options:e.machineTypeOptions,mode:e.mode},model:{value:e.machineType,callback:function(t){e.machineType=t},expression:"machineType"}})],1)]),a("div",{staticClass:"col span-6"},[a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{label:e.t("harvester.virtualMachine.input.reservedMemory"),mode:e.mode,"input-exponent":2,increment:1024,"output-modifier":!0},model:{value:e.reservedMemory,callback:function(t){e.reservedMemory=t},expression:"reservedMemory"}})],1)]):e._e(),a("CloudConfig",{ref:"yamlEditor",attrs:{"user-script":e.userScript,mode:e.mode,"view-code":e.isWindows,namespace:e.value.metadata.namespace,"network-script":e.networkScript},on:{updateUserData:e.updateUserData,updateNetworkData:e.updateNetworkData,updateDataTemplateId:e.updateDataTemplateId}}),a("Checkbox",{staticClass:"check mt-20",attrs:{type:"checkbox","tooltip-key":"harvester.virtualMachine.usbTip","label-key":"harvester.virtualMachine.enableUsb",mode:e.mode},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",disabled:e.isWindows,"label-key":"harvester.virtualMachine.installAgent",mode:e.mode},on:{input:e.updateAgent},model:{value:e.installAgent,callback:function(t){e.installAgent=t},expression:"installAgent"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.efiEnabled"),mode:e.mode},model:{value:e.efiEnabled,callback:function(t){e.efiEnabled=t},expression:"efiEnabled"}}),e.efiEnabled?a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.secureBoot"),mode:e.mode},model:{value:e.secureBoot,callback:function(t){e.secureBoot=t},expression:"secureBoot"}}):e._e()],1)],1),a("div",{staticClass:"mt-20"},[e.isEdit?a("span",{staticClass:"restart"},[a("Banner",{staticClass:"banner-right",attrs:{color:"warning"}},[e._v(" "+e._s(e.t("harvester.virtualMachine.restartTip"))+" "),a("Checkbox",{staticClass:"check ml-20",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.restartNow"},model:{value:e.isRestartImmediately,callback:function(t){e.isRestartImmediately=t},expression:"isRestartImmediately"}})],1)],1):e._e()])],1)],1):e._e()},n=[],o=a("56d4"),s=a.n(o),i=a("9e74"),l=a.n(i),c=a("9ce4"),u=a("dffb"),d=a("ad61"),p=a("5ef9"),v=a("efb2"),m=a("2e2b"),f=a("f032"),h=a("d444"),b=a("53fe"),y=a("2007"),g=a("65b0"),w=a("79bb"),k=a("89d4"),x=a("5d46"),O=a("1881"),S=a("7cac"),N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row mb-20"},[a("RadioGroup",{attrs:{name:"selectNode",options:e.selectNodeOptions,mode:e.mode},on:{input:e.update},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}})],1),"nodeSelector"===e.selectNode?[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{label:e.t("workload.scheduling.affinity.nodeName"),options:e.nodes||[],mode:e.mode,multiple:!1},on:{input:e.update},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1)])]:"affinity"===e.selectNode?[a("NodeAffinity",{attrs:{mode:e.mode},on:{input:e.update},model:{value:e.nodeAffinity,callback:function(t){e.nodeAffinity=t},expression:"nodeAffinity"}})]:e._e()],2)},C=[],j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row",on:{input:e.update}},[a("div",{staticClass:"col span-12"},[a("ArrayListGrouped",{staticClass:"mt-20",attrs:{mode:e.mode,"default-add-value":{matchExpressions:[]},"add-label":e.t("workload.scheduling.affinity.addNodeSelector")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{options:e.affinityOptions,value:e.priorityDisplay(t.row.value),label:e.t("workload.scheduling.affinity.priority"),mode:e.mode},on:{input:function(a){e.changePriority(t.row.value)}}})],1)]),a("MatchExpressions",{staticClass:"col span-12 mt-20",attrs:{mode:e.mode,type:e.node,"show-remove":!1},model:{value:t.row.value.matchExpressions,callback:function(a){e.$set(t.row.value,"matchExpressions",a)},expression:"props.row.value.matchExpressions"}})]}}]),model:{value:e.allSelectorTerms,callback:function(t){e.allSelectorTerms=t},expression:"allSelectorTerms"}})],1)])},_=[],E=a("d6a6"),T=a("1832"),I=a("56a4"),P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showRemove&&!e.isView?a("button",{staticClass:"btn role-link remove-expression",attrs:{type:"button"},on:{click:function(t){return e.$emit("remove")}}},[a("i",{staticClass:"icon icon-x"})]):e._e(),e.rules.length?a("div",{staticClass:"match-expression-header",class:{view:e.isView}},[a("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.key"))+" ")]),a("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.operator"))+" ")]),a("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.value"))+" ")]),a("span")]):e._e(),e._l(e.rules,(function(t,r){return a("div",{key:t.id,staticClass:"match-expression-row",class:{view:e.isView,"mb-10":r!==e.rules.length-1}},[a("div",{attrs:{"data-testid":"input-match-expression-key-"+r}},[e.isView?a("div",[e._v(" "+e._s(t.key)+" ")]):a("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"row.key"}],attrs:{mode:e.mode},domProps:{value:t.key},on:{input:[function(a){a.target.composing||e.$set(t,"key",a.target.value)},e.update]}})]),a("div",{attrs:{"data-testid":"input-match-expression-operator-"+r}},[e.isView?a("div",[e._v(" "+e._s(t.operator)+" ")]):a("Select",{staticClass:"operator single",attrs:{options:e.ops,clearable:!1,reduce:function(e){return e.value},mode:e.mode},on:{input:e.update},model:{value:t.operator,callback:function(a){e.$set(t,"operator",a)},expression:"row.operator"}})],1),"Exists"===t.operator||"DoesNotExist"===t.operator?a("div",{staticClass:"no-value"},[a("label",{staticClass:"text-muted"},[e._v("…")])]):a("div",{attrs:{"data-testid":"input-match-expression-values-"+r}},[e.isView?a("div",[e._v(" "+e._s(t.values)+" ")]):a("input",{directives:[{name:"model",rawName:"v-model",value:t.values,expression:"row.values"}],attrs:{mode:e.mode,disabled:"Exists"===t.operator||"DoesNotExist"===t.operator},domProps:{value:t.values},on:{input:[function(a){a.target.composing||e.$set(t,"values",a.target.value)},e.update]}})]),a("div",{staticClass:"remove-container"},[e.isView?e._e():a("button",{staticClass:"btn role-link",style:{padding:"0px"},attrs:{type:"button",disabled:"view"===e.mode},on:{click:function(a){return e.removeRule(t)}}},[a("t",{attrs:{k:"generic.remove"}})],1)])])})),e.isView?e._e():a("div",{staticClass:"mt-20"},[a("button",{staticClass:"btn role-tertiary add",attrs:{type:"button"},on:{click:e.addRule}},[a("t",{attrs:{k:"workload.scheduling.affinity.matchExpressions.addRule"}})],1)])],2)},A=[],D=a("81a6"),$=a("e411");function M(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=R(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(i)throw o}}}}function R(e,t){if(e){if("string"===typeof e)return V(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function B(e,t){for(var a=Object.keys(e||{}),r=t||[],n=0,o=a;n<o.length;n++){var s=o[n],i=e[s],l=Object($["e"])(r,{key:s,operator:"In"});l?Object($["a"])(l.values,i):r.push({key:s,operator:"In",values:[i]})}return r}function L(e){var t,a={},r=[],n=[],o={},s=M(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;"In"===i.operator&&(o[i.key]?Object($["a"])(n,i.key):o[i.key]=!0)}}catch(d){s.e(d)}finally{s.f()}var l,c=M(e);try{for(c.s();!(l=c.n()).done;){var u=l.value;"In"!==u.operator||1!==u.values.length||n.includes(u.key)?r.push(Object.assign({},u)):a[u.key]=u.values[0]}}catch(d){c.e(d)}finally{c.f()}return{matchLabels:a,matchExpressions:r}}function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function U(e){return Y(e)||G(e)||z(e)||q()}function q(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e,t){if(e){if("string"===typeof e)return J(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?J(e,t):void 0}}function G(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Y(e){if(Array.isArray(e))return J(e)}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var W={components:{Select:D["a"]},props:{value:{type:[Array,Object],default:function(){return[]}},mode:{type:String,default:"edit"},type:{type:String,default:I["t"]},initialEmptyRow:{type:Boolean,default:!1},showRemove:{type:Boolean,default:!0}},data:function(){var e,t=this.$store.getters["i18n/t"],a=[{label:t("workload.scheduling.affinity.matchExpressions.in"),value:"In"},{label:t("workload.scheduling.affinity.matchExpressions.notIn"),value:"NotIn"},{label:t("workload.scheduling.affinity.matchExpressions.exists"),value:"Exists"},{label:t("workload.scheduling.affinity.matchExpressions.doesNotExist"),value:"DoesNotExist"}],r=[{label:t("workload.scheduling.affinity.matchExpressions.in"),value:"In"},{label:t("workload.scheduling.affinity.matchExpressions.notIn"),value:"NotIn"},{label:t("workload.scheduling.affinity.matchExpressions.exists"),value:"Exists"},{label:t("workload.scheduling.affinity.matchExpressions.doesNotExist"),value:"DoesNotExist"},{label:t("workload.scheduling.affinity.matchExpressions.lessThan"),value:"Lt"},{label:t("workload.scheduling.affinity.matchExpressions.greaterThan"),value:"Gt"}],n=this.type===I["t"]?r:a;return e=Object($["g"])(this.value)?U(this.value):B(this.value.matchLabels,this.value.matchExpressions),e=e.map((function(e){var t=Object(T["e"])(e);return t.values&&"string"!==typeof t.values&&(t.values=t.values.join(", ")),t})),e.length||!this.initialEmptyRow||this.isView||e.push({key:"",operator:"In",values:""}),{ops:n,rules:e,custom:[]}},computed:H({isView:function(){return"view"===this.mode},node:function(){return I["t"]},pod:function(){return I["v"]}},Object(c["a"])({t:"i18n/t"})),methods:{removeRule:function(e){Object($["i"])(this.rules,e),this.update()},addRule:function(){this.rules.push({key:"",operator:"In",values:""})},update:function(){var e=this;this.$nextTick((function(){var t=e.rules.map((function(e){var t={key:e.key,operator:e.operator},a=(e.values||"").trim();if("Exists"===e.operator||"DoesNotExist"===e.operator)a=null;else if(!a)return;return null!==a&&(t.values=a.split(/\s*,\s*/).filter((function(e){return!!e}))),t})).filter((function(e){return!!e}));Object($["g"])(e.value)?e.$emit("input",t):e.$emit("input",L(t))}))}}},X=W,Q=(a("d2f1"),a("d802")),Z=Object(Q["a"])(X,P,A,!1,null,"4a1b65ce",null),ee=Z.exports,te=a("06f6"),ae=a("d003");function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){oe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function se(e){return ue(e)||ce(e)||le(e)||ie()}function ie(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(e,t){if(e){if("string"===typeof e)return de(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?de(e,t):void 0}}function ce(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ue(e){if(Array.isArray(e))return de(e)}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var pe={components:{ArrayListGrouped:ae["a"],MatchExpressions:ee,LabeledSelect:b["a"]},props:{value:{type:Object,default:function(){return{}}},mode:{type:String,default:"create"}},data:function(){if(this.value.required)return{nodeSelectorTerms:this.value.required.nodeSelectorTerms};var e=this.value,t=e.preferredDuringSchedulingIgnoredDuringExecution,a=void 0===t?[]:t,r=e.requiredDuringSchedulingIgnoredDuringExecution,n=void 0===r?{}:r,o=n.nodeSelectorTerms,s=void 0===o?[]:o,i=[].concat(se(a),se(s)).map((function(e){var t=Object(T["e"])(e);return t._id=Object(te["p"])(4),e.preference&&(Object.assign(t,e.preference),delete t.preference),t}));return{allSelectorTerms:i,weightedNodeSelectorTerms:a,defaultWeight:1}},computed:ne(ne({},Object(c["a"])({t:"i18n/t"})),{},{isView:function(){return this.mode===E["o"]},hasWeighted:function(){return!!this.weightedNodeSelectorTerms},node:function(){return I["t"]},affinityOptions:function(){var e=[this.t("workload.scheduling.affinity.preferred"),this.t("workload.scheduling.affinity.required")];return e}}),mounted:function(){this.update()},methods:{update:function(){var e=this;this.$nextTick((function(){var t={},a={nodeSelectorTerms:[]},r=[];e.allSelectorTerms.forEach((function(e){if(e.weight){var t={weight:1,preference:e};r.push(t)}else a.nodeSelectorTerms.push(e)})),r.length&&(t.preferredDuringSchedulingIgnoredDuringExecution=r),a.nodeSelectorTerms.length&&(t.requiredDuringSchedulingIgnoredDuringExecution=a),e.$emit("input",t)}))},changePriority:function(e){e.weight?this.$delete(e,"weight"):this.$set(e,"weight",1),this.update()},priorityDisplay:function(e){return e.weight?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},get:T["g"],isEmpty:T["h"]}},ve=pe,me=Object(Q["a"])(ve,j,_,!1,null,null,null),fe=me.exports,he=a("e4c0"),be=a("b0bd");function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){we(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function we(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ke={components:{RadioGroup:f["b"],LabeledSelect:b["a"],NodeAffinity:fe},props:{value:{type:Object,default:function(){return{}}},nodes:{type:Array,default:function(){return[]}},mode:{type:String,default:"create"}},data:function(){var e=this.$store.getters["currentProduct"].inStore===he["a"],t=this.value.nodeName,a=void 0===t?"":t,r=this.value,n=r.affinity,o=void 0===n?{}:n,s=r.nodeSelector,i=void 0===s?{}:s,l=o.nodeAffinity,c=void 0===l?{}:l,u=null;return this.value.nodeName?u="nodeSelector":e&&this.value.nodeSelector?(u="nodeSelector",a=i[be["g"]]):Object(T["h"])(c)||(u="affinity"),c.requiredDuringSchedulingIgnoredDuringExecution||this.$set(c,"requiredDuringSchedulingIgnoredDuringExecution",{nodeSelectorTerms:[]}),c.preferredDuringSchedulingIgnoredDuringExecution||this.$set(c,"preferredDuringSchedulingIgnoredDuringExecution",[]),{selectNode:u,nodeName:a,nodeAffinity:c,nodeSelector:i}},computed:ge(ge({},Object(c["a"])({t:"i18n/t"})),{},{isView:function(){return this.mode===E["o"]},isHarvester:function(){return this.$store.getters["currentProduct"].inStore===he["a"]},selectNodeOptions:function(){var e=this.isHarvester?"harvester.virtualMachine":"workload",t=[{label:this.t("".concat(e,".scheduling.affinity.anyNode")),value:null},{label:this.t("".concat(e,".scheduling.affinity.specificNode")),value:"nodeSelector"},{label:this.t("".concat(e,".scheduling.affinity.schedulingRules")),value:"affinity"}];return t}}),methods:{update:function(){var e,t,a,r,n=this.nodeName,o=this.nodeSelector,s=this.nodeAffinity;switch(this.selectNode){case"nodeSelector":this.isHarvester?Object.assign(this.value,{nodeSelector:we({},be["g"],n)}):Object.assign(this.value,{nodeSelector:o,nodeName:n}),null!==(e=this.value)&&void 0!==e&&null!==(t=e.affinity)&&void 0!==t&&t.nodeAffinity&&delete this.value.affinity.nodeAffinity;break;case"affinity":delete this.value.nodeName,delete this.value.nodeSelector,this.value.affinity?Object.assign(this.value.affinity,{nodeAffinity:s}):Object.assign(this.value,{affinity:{nodeAffinity:s}});break;default:delete this.value.nodeName,delete this.value.nodeSelector,null!==(a=this.value)&&void 0!==a&&null!==(r=a.affinity)&&void 0!==r&&r.nodeAffinity&&delete this.value.affinity.nodeAffinity}},isEmpty:T["h"]}},xe=ke,Oe=Object(Q["a"])(xe,N,C,!1,null,null,null),Se=Oe.exports,Ne=a("7856"),Ce=a("b12c"),je=a("3811"),_e=a("3792"),Ee=a("9c20"),Te=a("6834"),Ie=a("c78c");function Pe(e){return Me(e)||$e(e)||De(e)||Ae()}function Ae(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function De(e,t){if(e){if("string"===typeof e)return Re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Re(e,t):void 0}}function $e(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Me(e){if(Array.isArray(e))return Re(e)}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Ve(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(_e){return void a(_e)}i.done?t(l):Promise.resolve(l).then(r,n)}function Be(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){Ve(o,r,n,s,i,"next",e)}function i(e){Ve(o,r,n,s,i,"throw",e)}s(void 0)}))}}function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),!0).forEach((function(t){He(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function He(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ke={name:"HarvesterEditVM",components:{Tab:p["a"],Tabbed:d["a"],Banner:u["a"],Checkbox:v["a"],RadioGroup:f["b"],CruResource:m["a"],LabeledInput:h["a"],LabeledSelect:b["a"],UnitInput:y["a"],NameNsDescription:g["a"],Volume:k["a"],SSHKey:w["a"],Network:x["a"],CpuMemory:O["a"],CloudConfig:S["a"],NodeScheduling:Se,AccessCredentials:Ne["a"]},mixins:[Ie["a"],Te["c"]],props:{value:{type:Object,required:!0}},data:function(){var e=Object(T["e"])(this.value),t="Running"===this.value.actualState,a=this.value.spec.template.spec.hostname||"";return{cloneVM:e,count:2,templateId:"",templateVersionId:"",namePrefix:"",isSingle:!0,useTemplate:!1,hostname:a,isRestartImmediately:t,RunStrategys:Ce["c"]}},computed:Fe(Fe({},Object(c["a"])({t:"i18n/t"})),{},{machineTypeOptions:function(){return[{label:"None",value:""},{label:"q35",value:"q35"},{label:"pc",value:"pc"}]},templateOptions:function(){return this.templates.map((function(e){return{label:e.id,value:e.id}}))},versionOptions:function(){var e,t=this,a=null===(e=this.curTemplateResource)||void 0===e?void 0:e.defaultVersion;return this.versions.filter((function(e){return e.templateId===t.templateId})).map((function(e){var r=e.version,n=a===r?"".concat(r," (").concat(t.t("generic.default"),")"):r,o=e.id;return{label:n,value:o}}))},curTemplateResource:function(){var e=this;return this.templates.find((function(t){return t.id===e.templateId}))},nameLabel:function(){return this.isSingle?"harvester.virtualMachine.instance.single.nameLabel":"harvester.virtualMachine.instance.multiple.nameLabel"},hostnameLabel:function(){return this.isSingle?"harvester.virtualMachine.instance.single.host.label":"harvester.virtualMachine.instance.multiple.host.label"},hostPlaceholder:function(){return this.isSingle?this.t("harvester.virtualMachine.instance.single.host.placeholder"):this.t("harvester.virtualMachine.instance.multiple.host.placeholder")},secretNamePrefix:function(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name},isQemuInstalled:function(){return this.value.isQemuInstalled}}),watch:{templateId:{handler:function(e,t){var a=this;return Be(s.a.mark((function r(){var n,o,i;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(e===t||a.templateVersionId){r.next=7;break}return r.next=5,a.$store.dispatch("harvester/findAll",{type:I["h"].VM_TEMPLATE});case 5:i=r.sent,a.templateVersionId=null===(n=i.find((function(t){return t.id===e})))||void 0===n||null===(o=n.spec)||void 0===o?void 0:o.defaultVersionId;case 7:case"end":return r.stop()}}),r)})))()},immediate:!1},templateVersionId:{handler:function(e){var t=this;return Be(s.a.mark((function a(){var r,n,o,i,l,c,u,d,p,v,m,f,h,b,y;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t.$store.dispatch("harvester/findAll",{type:I["h"].VM_VERSION});case 4:f=a.sent,h=f.find((function(t){return t.id===e})),b=Object(T["e"])(h.spec.vm),null===(r=b.spec)||void 0===r||(null===(n=r.template)||void 0===n||(null===(o=n.spec)||void 0===o||delete o.accessCredentials)),null===(i=b.spec)||void 0===i||(null===(l=i.template)||void 0===l||(null===(c=l.metadata)||void 0===c||(null===(u=c.annotations)||void 0===u||delete u[be["f"].DYNAMIC_SSHKEYS_NAMES]))),null===(d=b.spec)||void 0===d||(null===(p=d.template)||void 0===p||(null===(v=p.metadata)||void 0===v||(null===(m=v.annotations)||void 0===m||delete m[be["f"].DYNAMIC_SSHKEYS_USERS]))),t.getInitConfig({value:b}),t.$set(t,"hasCreateVolumes",[]),y=t.getVolumeClaimTemplates(b),t.value.metadata.annotations[be["f"].VOLUME_CLAIM_TEMPLATE]=JSON.stringify(y);case 14:case"end":return a.stop()}}),a)})))()}},useTemplate:function(e){!1===e&&(this.templateId="",this.templateVersionId="",this.value.applyDefaults(),this.getInitConfig({value:this.value}))}},created:function(){var e=this;this.registerAfterHook(Be(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.restartVM(),a="".concat(e.value.metadata.namespace,"/").concat(e.value.metadata.name),r=e.$store.getters["harvester/byId"](I["h"].VM,a),t.prev=3,t.next=6,e.saveSecret(r);case 6:return t.next=8,e.saveAccessCredentials(r);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),(n=e.errors).push.apply(n,Pe(Object(_e["a"])(t.t0)));case 13:!e.errors.length&&e.isSingle&&e.done();case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))),this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},mounted:function(){var e;this.imageId=(null===(e=this.$route.query)||void 0===e?void 0:e.image)||this.imageId;var t=this.getDiskRows(this.value);this.$set(this,"diskRows",t);var a=this.$route.query.templateId,r=this.$route.query.versionId;a&&r&&(this.templateId=a,this.templateVersionId=r,this.useTemplate=!0)},methods:{saveVM:function(e){Object($["c"])(this.errors),this.isSingle?this.saveSingle(e):this.saveMultiple(e)},saveSingle:function(e){var t=this;return Be(s.a.mark((function a(){return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parseVM(),t.value.spec.template.spec.hostname=t.hostname?t.hostname:t.value.metadata.name,a.next=4,t._save(t.value,e);case 4:t.errors.length?e(!1):e(!0);case 5:case"end":return a.stop()}}),a)})))()},saveMultiple:function(e){var t=this;return Be(s.a.mark((function a(){var r,n,o,i,l,c;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.namePrefix=t.value.metadata.name||"",r=t.namePrefix.endsWith("-")?"":"-",n=t.hostname?t.hostname:t.namePrefix,!(t.count<1)){a.next=7;break}return t.errors=[t.t("harvester.virtualMachine.instance.multiple.countTip")],e(!1),a.abrupt("return");case 7:o=Object(T["e"])(t.value),i=1;case 9:if(!(i<=t.count)){a.next=28;break}return t.$set(t.value,"spec",o.spec),t.$set(t,"spec",o.spec),l=i<10?"0".concat(i):i,t.value.cleanForNew(),t.value.metadata.name="".concat(t.namePrefix).concat(r).concat(l),t.$set(t.value.spec.template.spec,"hostname","".concat(n).concat(r).concat(l)),t.secretName="",a.next=19,t.parseVM();case 19:return a.next=21,t.$store.dispatch("harvester/clone",{resource:t.value});case 21:return c=a.sent,a.next=24,t._save(c,e);case 24:i!==t.count||t.errors.length?i===t.count&&(t.value.metadata.name=t.namePrefix,e(!1)):(e(!0),t.done());case 25:i++,a.next=9;break;case 28:case"end":return a.stop()}}),a)})))()},_save:function(e,t){var a=this;return Be(s.a.mark((function r(){var n;return s.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.applyHooks(Ee["b"]);case 3:return r.next=5,e.save();case 5:return r.next=7,a.applyHooks(Ee["a"]);case 7:r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),(n=a.errors).push.apply(n,Pe(Object(_e["a"])(r.t0))),t(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},restartVM:function(){if("edit"===this.mode&&(this.value.hasAction("restart")||this.value.hasAction("start"))){var e,t=Object(T["e"])(this.value);null===t||void 0===t||delete t.metadata,null===(e=this.cloneVM)||void 0===e||delete e.metadata;var a=JSON.parse(JSON.stringify(this.cloneVM)),r=JSON.parse(JSON.stringify(t));!l()(a,r)&&this.isRestartImmediately&&this.value.doActionGrowl("restart",{})}},updateBeforeSave:function(){this.isSingle&&(this.value.spec.template.spec.hostname||this.$set(this.value.spec.template.spec,"hostname",this.value.metadata.name));var e=this.getAccessCredentialsValidation();return e.length>0?Promise.reject(e):Promise.resolve()},validateCount:function(e){e>10&&this.$set(this,"count",10)},updateTemplateId:function(){this.templateVersionId=""},onTabChanged:function(e){var t,a=e.tab;"advanced"===a.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())},generateYaml:function(){this.parseVM();var e=Object(je["b"])(this.value);return e}}},Ue=Ke,qe=(a("c19c"),Object(Q["a"])(Ue,r,n,!1,null,"3ab4f9ef",null));t["default"]=qe.exports},"4fdf":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-7bc9fb90]:after,.clearfix[data-v-7bc9fb90]:before{content:" ";display:table}.clearfix[data-v-7bc9fb90]:after{clear:both}.list-unstyled[data-v-7bc9fb90]{margin:0;padding:0;list-style-type:none}.no-select[data-v-7bc9fb90]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-7bc9fb90]{resize:none}.hand[data-v-7bc9fb90]{cursor:pointer;cursor:hand}.fixed[data-v-7bc9fb90]{table-layout:fixed}.clip[data-v-7bc9fb90]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-7bc9fb90],.force-wrap[data-v-7bc9fb90]{word-wrap:break-word}.force-wrap[data-v-7bc9fb90]{white-space:normal}.bordered-section[data-v-7bc9fb90]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-7bc9fb90]{margin-bottom:20px;margin-top:20px}.edit-change[data-v-7bc9fb90]{align-items:center;display:flex}.edit-change>h5[data-v-7bc9fb90]{flex:1}[data-v-7bc9fb90] .edit-help code{padding:1px 5px}',""]),e.exports=t},"5ec9":function(e,t,a){var r=a("1343");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("59e8a64c",r,!0,{sourceMap:!1,shadowMode:!1})},"65b0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-20"},[e.namespaced&&!e.nameNsHidden&&e.createNamespace?a("div",{staticClass:"col span-3"},[a("LabeledInput",{ref:"namespace",attrs:{label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),disabled:e.namespaceReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}}),a("button",{attrs:{aria:"Cancel create"},on:{click:function(){e.createNamespace=!1,e.$parent.$emit("createNamespace",!1)}}},[a("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("generic.cancel"),expression:"t('generic.cancel')"}],staticClass:"icon icon-lg icon-close "})])],1):e._e(),!e.namespaced||e.nameNsHidden||e.createNamespace?e._e():a("div",{staticClass:"col span-3"},[a("LabeledSelect",{directives:[{name:"show",rawName:"v-show",value:!e.createNamespace,expression:"!createNamespace"}],attrs:{clearable:!0,options:e.namespaces,disabled:e.namespaceReallyDisabled,searchable:!0,mode:e.mode,multiple:!1,label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),required:""},on:{selecting:e.selectNamespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),e.nameNsHidden?e._e():a("div",{staticClass:"col span-3"},[a("LabeledInput",{key:"name",ref:"name",attrs:{label:e.t(e.nameLabel),placeholder:e.t(e.namePlaceholder),disabled:e.nameReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.descriptionHidden,expression:"!descriptionHidden"}],class:["col",e.extraColumns.length>0?"span-3":"span-6"]},[a("LabeledInput",{key:"description",attrs:{mode:e.mode,disabled:e.descriptionDisabled,label:e.t(e.descriptionLabel),placeholder:e.t(e.descriptionPlaceholder),"min-height":30},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._l(e.extraColumns,(function(t){var r;return a("div",{key:t,class:(r={col:!0},r[e.colSpan]=!0,r)},[e._t(t)],2)})),e.showSpacer?a("div",{staticClass:"spacer"}):e._e()],2)},n=[],o=a("8bbf"),s=a.n(o),i=a("9ce4"),l=a("1832"),c=a("7592"),u=a("56a4"),d=a("b0bd"),p=a("d6a6"),v=a("d444"),m=a("53fe");function f(e){return g(e)||y(e)||b(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function y(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function g(e){if(Array.isArray(e))return w(e)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e){return(e||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var N={components:{LabeledInput:v["a"],LabeledSelect:m["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},nameNsHidden:{type:Boolean,default:!1},descriptionHidden:{type:Boolean,default:!1},extraColumns:{type:Array,default:function(){return[]}},nameLabel:{type:String,default:"nameNsDescription.name.label"},nameEditable:{type:Boolean,default:!1},namePlaceholder:{type:String,default:"nameNsDescription.name.placeholder"},nameDisabled:{type:Boolean,default:!1},nameRequired:{type:Boolean,default:!0},nameNormalized:{type:Boolean,default:!0},namespaced:{type:Boolean,default:!0},namespaceFilter:{type:Function,default:null},namespaceMapper:{type:Function,default:null},namespaceType:{type:String,default:u["q"]},namespaceLabel:{type:String,default:"nameNsDescription.namespace.label"},namespacePlaceholder:{type:String,default:"nameNsDescription.namespace.placeholder"},namespaceDisabled:{type:Boolean,default:!1},namespaceNewAllowed:{type:Boolean,default:!1},noDefaultNamespace:{type:Boolean,default:!1},namespacesOverride:{type:Array,default:null},descriptionLabel:{type:String,default:"nameNsDescription.description.label"},descriptionPlaceholder:{type:String,default:"nameNsDescription.description.placeholder"},descriptionDisabled:{type:Boolean,default:!1},nameKey:{type:String,default:null},namespaceKey:{type:String,default:null},descriptionKey:{type:String,default:null},forceNamespace:{type:String,default:null},showSpacer:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!0}},data:function(){var e,t,a,r,n=this.value,o=n.metadata;(t=this.nameKey?Object(l["g"])(n,this.nameKey):o.name,this.namespaced&&(this.forceNamespace?(e=this.forceNamespace,this.updateNamespace(e)):e=this.namespaceKey?Object(l["g"])(n,this.namespaceKey):null===o||void 0===o?void 0:o.namespace,e||this.noDefaultNamespace||(e=this.$store.getters["defaultNamespace"],o&&(o.namespace=e))),this.descriptionKey)?a=Object(l["g"])(n,this.descriptionKey):a=null===o||void 0===o||null===(r=o.annotations)||void 0===r?void 0:r[d["e"]];return{namespace:e,name:t,description:a,createNamespace:!1}},computed:x(x({},Object(i["a"])(["isVirtualCluster"])),{},{namespaceReallyDisabled:function(){return!!this.forceNamespace||this.namespaceDisabled||this.mode===p["i"]},nameReallyDisabled:function(){return this.nameDisabled||this.mode===p["i"]&&!this.nameEditable},namespaces:function(){var e=this,t=this.$store.getters["currentStore"](this.namespaceType),a=this.namespacesOverride||this.$store.getters["".concat(t,"/all")](this.namespaceType),r=a.filter(this.namespaceFilter||function(t){var a=e.$store.getters["systemNamespaces"].includes(t.metadata.name);return!e.isVirtualCluster||!t.isSystem&&!t.isFleetManaged&&!a}),n=r.map(this.namespaceMapper||function(e){return{label:e.nameDisplay,value:e.id}}),o=Object(c["a"])(n,"label");return this.forceNamespace&&o.unshift({label:this.forceNamespace,value:this.forceNamespace}),[{label:this.t("namespace.createNamespace"),value:""},{label:"divider",disabled:!0,kind:"divider"}].concat(f(o))},isView:function(){return this.mode===p["o"]},colSpan:function(){if(!this.horizontal)return"span-8";var e=(this.nameNsHidden?0:2)+(this.descriptionHidden?0:1)+this.extraColumns.length;e=Math.max(2,e);var t=12/e;return"span-".concat(t)}}),watch:{name:function(e){this.normalizeName&&(e=S(e)),this.nameKey?Object(l["i"])(this.value,this.nameKey,e):this.$set(this.value.metadata,"name",e),this.$emit("change")},namespace:function(e){this.updateNamespace(e),this.$emit("change")},description:function(e){this.descriptionKey?Object(l["i"])(this.value,this.descriptionKey,e):this.value.setAnnotation(d["e"],e),this.$emit("change")}},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.name&&e.$refs.name.focus()}))},methods:{updateNamespace:function(e){this.forceNamespace&&(e=this.forceNamespace),this.namespaced&&this.$emit("isNamespaceNew",this.namespaces&&!this.namespaces.find((function(t){return t.value===e}))),this.namespaceKey?Object(l["i"])(this.value,this.namespaceKey,e):this.value.metadata.namespace=e},changeNameAndNamespace:function(e){this.name=(e.text||"").toLowerCase(),this.namespace=e.selected},selectNamespace:function(e){var t=this;""===e.value?(this.createNamespace=!0,this.$parent.$emit("createNamespace",!0),s.a.nextTick((function(){return t.$refs.namespace.focus()}))):(this.createNamespace=!1,this.$parent.$emit("createNamespace",!1))}}},C=N,j=(a("a342"),a("d802")),_=Object(j["a"])(C,r,n,!1,null,"e57285e4",null);t["a"]=_.exports},"6f57":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-24d29898]:after,.clearfix[data-v-24d29898]:before{content:" ";display:table}.clearfix[data-v-24d29898]:after{clear:both}.list-unstyled[data-v-24d29898]{margin:0;padding:0;list-style-type:none}.no-select[data-v-24d29898]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-24d29898]{resize:none}.hand[data-v-24d29898]{cursor:pointer;cursor:hand}.fixed[data-v-24d29898]{table-layout:fixed}.clip[data-v-24d29898]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-24d29898],.force-wrap[data-v-24d29898]{word-wrap:break-word}.force-wrap[data-v-24d29898]{white-space:normal}.bordered-section[data-v-24d29898]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-24d29898]{margin-bottom:20px;margin-top:20px}[data-v-24d29898] .yaml-editor{flex:1;min-height:200px}[data-v-24d29898] .yaml-editor .code-mirror .CodeMirror{position:static;height:auto;min-height:200px}',""]),e.exports=t},"86dc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.templateSpec&&e.spec?a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,"can-yaml":!1,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.saveVMT}},[a("NameNsDescription",{attrs:{mode:e.realTemplateMode,"name-label":"harvester.vmTemplate.nameNsDescription.name",namespaced:!0},model:{value:e.templateValue,callback:function(t){e.templateValue=t},expression:"templateValue"}}),e.templateId?a("Checkbox",{staticClass:"mb-20",attrs:{label:e.t("tableHeaders.defaultVersion"),type:"checkbox",mode:e.mode},model:{value:e.isDefaultVersion,callback:function(t){e.isDefaultVersion=t},expression:"isDefaultVersion"}}):e._e(),a("Tabbed",{attrs:{"side-tabs":!0},on:{changed:e.onTabChanged}},[a("Tab",{attrs:{name:"Basics",label:e.t("harvester.vmTemplate.tabs.basics")}},[a("CpuMemory",{attrs:{cpu:e.cpu,memory:e.memory,disabled:e.isConfig},on:{updateCpuMemory:e.updateCpuMemory}}),a("div",{staticClass:"mb-20"},[a("SSHKey",{attrs:{namespace:e.templateValue.metadata.namespace,"disable-create":e.isView,mode:e.mode},on:{"update:sshKey":e.updateSSHKey},model:{value:e.sshKey,callback:function(t){e.sshKey=t},expression:"sshKey"}})],1)],1),a("Tab",{attrs:{name:"Volume",label:e.t("harvester.tab.volume"),weight:-1}},[a("Volume",{attrs:{mode:e.mode,namespace:e.value.metadata.namespace,"existing-volume-disabled":!0},model:{value:e.diskRows,callback:function(t){e.diskRows=t},expression:"diskRows"}})],1),a("Tab",{attrs:{name:"Network",label:e.t("harvester.tab.network"),weight:-2}},[a("Network",{attrs:{mode:e.mode},model:{value:e.networkRows,callback:function(t){e.networkRows=t},expression:"networkRows"}})],1),a("Tab",{attrs:{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-3}},[a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.runStrategy",options:e.RunStrategys,mode:e.mode},model:{value:e.runStrategy,callback:function(t){e.runStrategy=t},expression:"runStrategy"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{attrs:{"label-key":"harvester.virtualMachine.osType",mode:e.mode,options:e.OS},model:{value:e.osType,callback:function(t){e.osType=t},expression:"osType"}})],1)]),a("div",{staticClass:"row mb-20"},[(e.showAdvanced,a("a",{directives:[{name:"t",rawName:"v-t",value:"harvester.generic.showMore",expression:"'harvester.generic.showMore'"}],attrs:{role:"button"},on:{click:e.toggleAdvanced}}))]),e.showAdvanced?a("div",{staticClass:"row mb-20"},[a("div",{staticClass:"col span-6"},[a("UnitInput",{directives:[{name:"int-number",rawName:"v-int-number"}],attrs:{label:e.t("harvester.virtualMachine.input.reservedMemory"),mode:e.mode,"input-exponent":2,increment:1024,"output-modifier":!0},model:{value:e.reservedMemory,callback:function(t){e.reservedMemory=t},expression:"reservedMemory"}})],1)]):e._e(),a("CloudConfig",{ref:"yamlEditor",attrs:{mode:e.mode,"user-script":e.userScript,namespace:e.templateValue.metadata.namespace,"network-script":e.networkScript},on:{updateUserData:e.updateUserData,updateNetworkData:e.updateNetworkData}}),a("div",{staticClass:"spacer"}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb"),mode:e.mode},model:{value:e.installUSBTablet,callback:function(t){e.installUSBTablet=t},expression:"installUSBTablet"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox","label-key":"harvester.virtualMachine.installAgent",mode:e.mode},model:{value:e.installAgent,callback:function(t){e.installAgent=t},expression:"installAgent"}}),a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.efiEnabled"),mode:e.mode},model:{value:e.efiEnabled,callback:function(t){e.efiEnabled=t},expression:"efiEnabled"}}),e.efiEnabled?a("Checkbox",{staticClass:"check",attrs:{type:"checkbox",label:e.t("harvester.virtualMachine.secureBoot"),mode:e.mode},model:{value:e.secureBoot,callback:function(t){e.secureBoot=t},expression:"secureBoot"}}):e._e()],1)],1)],1):e._e()},n=[],o=a("56d4"),s=a.n(o),i=a("9ce4"),l=a("ad61"),c=a("5ef9"),u=a("efb2"),d=a("2e2b"),p=a("65b0"),v=a("53fe"),m=a("2007"),f=a("89d4"),h=a("5d46"),b=a("1881"),y=a("7cac"),g=a("79bb"),w=a("56a4"),k=a("06f6"),x=a("b12c"),O=a("d6a6"),S=a("b0bd"),N=a("6834"),C=a("c78c"),j=a("9c20");function _(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(c){return void a(c)}i.done?t(l):Promise.resolve(l).then(r,n)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){_(o,r,n,s,i,"next",e)}function i(e){_(o,r,n,s,i,"throw",e)}s(void 0)}))}}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var A={name:"HarvesterEditVMTemplate",components:{Tab:c["a"],SSHKey:g["a"],Volume:f["a"],Tabbed:l["a"],Network:h["a"],Checkbox:u["a"],CpuMemory:b["a"],CruResource:d["a"],CloudConfig:y["a"],LabeledSelect:v["a"],UnitInput:m["a"],NameNsDescription:p["a"]},mixins:[C["a"],N["c"]],props:{value:{type:Object,required:!0}},data:function(){this.mode===O["i"]&&(this.value=this.value.cleanForNew());var e=this.value.templateId||this.$route.query.templateId;return{templateId:e,templateValue:null,templateSpec:null,versionName:"",description:"",defaultVersion:null,isDefaultVersion:!1,RunStrategys:x["c"]}},computed:I(I({},Object(i["a"])({t:"i18n/t"})),{},{isConfig:function(){var e;return(null===(e=this.$route.query)||void 0===e?void 0:e.as)===O["f"]||this.isView},realTemplateMode:function(){return this.templateId?O["o"]:this.mode},secretNamePrefix:function(){var e,t;return null===(e=this.templateValue)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name}}),watch:{templateId:{handler:function(e){var t=this;return E(s.a.mark((function a(){var r,n,o,i;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("harvester/findAll",{type:w["h"].VM_TEMPLATE});case 2:if(n=a.sent,o=n.find((function(t){return t.id===e}))||null,i=null===(r=o)||void 0===r?void 0:r.spec,o){a.next=10;break}return i={description:"",defaultVersionId:""},a.next=9,t.$store.dispatch("harvester/create",{metadata:{name:"",namespace:""},spec:i,type:w["h"].VM_TEMPLATE});case 9:o=a.sent;case 10:t.templateValue=o,t.templateSpec=i;case 12:case"end":return a.stop()}}),a)})))()},immediate:!0}},created:function(){var e=this;this.registerAfterHook(E(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isDefaultVersion){t.next=16;break}return t.next=3,e.$store.dispatch("harvester/findAll",{type:w["h"].VM_VERSION,opt:{force:!0}});case 3:if(a=t.sent,r=a.find((function(t){var a,r;return(null===t||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[S["f"].TEMPLATE_VERSION_CUSTOM_NAME])===e.customName})),!r){t.next=16;break}return t.prev=6,e.templateValue.defaultVersionId=r.id,n=[{op:"replace",path:"/spec/defaultVersionId",value:r.id}],t.next=11,e.templateValue.patch(n,{url:e.templateValue.linkFor("view")});case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t["catch"](6),t.abrupt("return",Promise.reject(new Error(t.t0.message)));case 16:case"end":return t.stop()}}),t,null,[[6,13]])}))))},mounted:function(){var e;this.imageId=(null===(e=this.diskRows[0])||void 0===e?void 0:e.image)||""},methods:{saveVMT:function(e){var t=this;return E(s.a.mark((function a(){var r,n,o,i,l,c,u;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.parseVM(),a.next=3,t.$store.dispatch("harvester/findAll",{type:w["h"].VM_TEMPLATE});case 3:if(r=a.sent,n=r.find((function(e){return e.metadata.name===t.templateValue.metadata.name})),a.prev=5,t.templateId){a.next=17;break}if(null===(o=t.templateValue)||void 0===o||null===(i=o.metadata)||void 0===i||!i.name){a.next=12;break}return a.next=10,t.templateValue.save();case 10:a.next=15;break;case 12:return t.errors=[t.t("validation.required",{key:t.t("harvester.vmTemplate.nameNsDescription.name")})],e(!1),a.abrupt("return");case 15:a.next=18;break;case 17:n.save();case 18:return t.value.cleanForNew(),t.customName=Object(k["p"])(10),t.$set(t.value.metadata,"annotations",I(I({},t.value.metadata.annotations),{},P({},S["f"].TEMPLATE_VERSION_CUSTOM_NAME,t.customName))),l=t.templateValue.metadata.name||n.metadata.name,c=t.templateValue.metadata.namespace||n.metadata.namespace,t.isCreate&&(t.value.metadata.namespace=c),t.$set(t.value.spec,"templateId","".concat(c,"/").concat(l)),a.next=27,t.value.save();case 27:return u=a.sent,a.next=30,t.saveSecret(u);case 30:return a.next=32,t.applyHooks(j["a"]);case 32:t.done(),a.next=39;break;case 35:a.prev=35,a.t0=a["catch"](5),t.errors=[a.t0],e(!1);case 39:case"end":return a.stop()}}),a,null,[[5,35]])})))()},onTabChanged:function(e){var t,a=e.tab;"advanced"===a.name&&(null===(t=this.$refs.yamlEditor)||void 0===t||t.refresh())}}},D=A,$=a("d802"),M=Object($["a"])(D,r,n,!1,null,null,null);t["default"]=M.exports},"8a50":function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-1a24c0d4]:after,.clearfix[data-v-1a24c0d4]:before{content:" ";display:table}.clearfix[data-v-1a24c0d4]:after{clear:both}.list-unstyled[data-v-1a24c0d4]{margin:0;padding:0;list-style-type:none}.no-select[data-v-1a24c0d4]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-1a24c0d4]{resize:none}.hand[data-v-1a24c0d4]{cursor:pointer;cursor:hand}.fixed[data-v-1a24c0d4]{table-layout:fixed}.clip[data-v-1a24c0d4]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-1a24c0d4],.force-wrap[data-v-1a24c0d4]{word-wrap:break-word}.force-wrap[data-v-1a24c0d4]{white-space:normal}.bordered-section[data-v-1a24c0d4]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-1a24c0d4]{margin-bottom:20px;margin-top:20px}.wrapper[data-v-1a24c0d4]{position:relative}.nicOption[data-v-1a24c0d4]{display:flex;justify-content:space-between}',""]),e.exports=t},"8bb4":function(e,t,a){"use strict";a.r(t);var r=a("dd59"),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t["default"]=n.a},9015:function(e,t,a){var r=a("1c4d");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("2175a4e1",r,!0,{sourceMap:!1,shadowMode:!1})},"935b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"generate-yaml":e.generateYaml,"apply-hooks":e.applyHooks},on:{finish:e.save}},[a("NameNsDescription",{attrs:{value:e.value,namespaced:!0,mode:e.mode}}),a("ResourceTabs",{staticClass:"mt-15",attrs:{"need-conditions":!1,"need-related":!1,"side-tabs":!0,mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.volume.tabs.basics"),weight:3}},[a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.source"),options:e.sourceOption,disabled:!e.isCreate,required:"",mode:e.mode},on:{input:e.update},model:{value:e.source,callback:function(t){e.source=t},expression:"source"}}),e.isVMImage?a("LabeledSelect",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.image"),options:e.imageOption,disabled:!e.isCreate,required:"",mode:e.mode},on:{input:e.update},model:{value:e.imageId,callback:function(t){e.imageId=t},expression:"imageId"}}):e._e(),a("UnitInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.volume.size"),"input-exponent":3,"output-modifier":!0,increment:1024,mode:e.mode,required:""},on:{input:e.update},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}})],1)],1)],1)],1)},n=[],o=a("56d4"),s=a.n(o),i=a("5ef9"),l=a("2e2b"),c=a("2007"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Tabbed",e._b({attrs:{"default-tab":e.defaultTab}},"Tabbed",e.$attrs,!1),[e._t("default"),e.showConditions?a("Tab",{attrs:{"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":e.conditionsHaveIssues}},[a("Conditions",{attrs:{value:e.value}})],1):e._e(),e.showEvents?a("Tab",{attrs:{"label-key":"resourceTabs.events.tab",name:"events",weight:-2}},[a("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"}})],1):e._e(),e.showRelated?a("Tab",{attrs:{name:"related","label-key":"resourceTabs.related.tab",weight:-3}},[a("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.from",expression:"'resourceTabs.related.from'"}]}),a("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"from"}}),a("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.to",expression:"'resourceTabs.related.to'"}],staticClass:"mt-20"}),a("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"to"}})],1):e._e()],2)},d=[],p=a("ad61"),v=a("c78c"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SortableTable",{attrs:{headers:e.headers,rows:e.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},scopedSlots:e._u([{key:"cell:condition",fn:function(t){var r=t.row;return[a("span",{class:{"text-error":r.error}},[e._v(e._s(r.condition))])]}},{key:"cell:status",fn:function(t){var r=t.row;return[a("span",{class:{"text-error":r.error}},[e._v(e._s(r.status))])]}}])})},f=[],h=a("fc28"),b={components:{SortableTable:h["b"]},props:{value:{type:Object,default:function(){return{}}}},computed:{headers:function(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows:function(){var e;return((null===(e=this.value.status)||void 0===e?void 0:e.conditions)||[]).map((function(e){var t=e.message||"";return e.reason&&(t="[".concat(e.reason,"] ").concat(t).trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}}))}}},y=b,g=a("d802"),w=Object(g["a"])(y,m,f,!1,null,null,null),k=w.exports,x=a("56a4"),O=a("d6a6"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ResourceTable",{attrs:{schema:null,rows:e.rows,headers:e.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":e.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},scopedSlots:e._u([{key:"cell:state",fn:function(e){var t=e.row;return[t.real?a("BadgeState",{attrs:{value:t.real}}):a("BadgeState",{attrs:{value:t}})]}}])})},N=[],C=a("efbe"),j=a("35ef"),_=a("d6d1"),E=a("7592"),T=a("79a8"),I=a("57ab");function P(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(c){return void a(c)}i.done?t(l):Promise.resolve(l).then(r,n)}function A(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){P(o,r,n,s,i,"next",e)}function i(e){P(o,r,n,s,i,"throw",e)}s(void 0)}))}}function D(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=$(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){i=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(i)throw o}}}}function $(e,t){if(e){if("string"===typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var R={components:{ResourceTable:C["a"],BadgeState:I["a"]},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:function(){return[]}}},data:function(){return{loadedResources:1}},computed:{filteredRelationships:function(){var e,t,a=this,r=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.relationships)||[];return r=r.filter((function(e){var t=e["".concat(a.direction,"Type")];return!(!t||a.ignoreTypes.includes(t))&&(!a.rel||e.rel===a.rel)})),r},rows:function(){if(!(this.loadedResources<1)){var e,t=this.$store.getters["clusterId"],a=this.$store.getters["currentStore"](),r=[],n=D(this.filteredRelationships);try{for(n.s();!(e=n.n()).done;){var o=e.value,s=o.state||"active",i=Object(j["b"])(s,o.error,o.transitioning),l=o["".concat(this.direction,"Type")],c=this.$store.getters["".concat(a,"/schemaFor")](l),u=o["".concat(this.direction,"Id")];if(u){var d=null,p=u.indexOf("/"),v="".concat(l,"/").concat(d,"/").concat(u);p>0&&(d=u.substr(0,p),u=u.substr(p+1));var m={name:"c-cluster-product-resource".concat(d?"-namespace":"","-id"),params:{product:T["a"],cluster:"management"===a?"local":t,resource:l,namespace:d,id:u}};r.push({type:l,real:this.$store.getters["".concat(a,"/byId")](l,o["".concat(this.direction,"Id")]),id:o["".concat(this.direction,"Id")],state:s,metadata:{namespace:d,name:u},_key:v,name:u,namespace:d,nameDisplay:u,nameSort:Object(E["b"])(u).toLowerCase(),stateColor:i,detailLocation:m,typeDisplay:this.$store.getters["type-map/labelFor"](c),stateDisplay:Object(j["d"])(s),stateBackground:i.replace("text-","bg-"),groupByLabel:d})}}}catch(f){n.e(f)}finally{n.f()}return r}},headers:function(){return[_["B"],_["G"],_["n"],_["o"]]}},methods:{getRealResources:function(e){var t=this;return A(s.a.mark((function a(){var r,n,o,i;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.$store.getters["currentStore"](),a.next=3,Promise.allSettled(e.map((function(e){return t.$store.dispatch("".concat(r,"/find"),{type:e.type,id:e.id})})));case 3:for(n=a.sent,o=[],i=0;i<n.length;i++)"fulfilled"===n[i].status&&o.push(n[i].value);return t.loadedResources++,a.abrupt("return",o);case 8:case"end":return a.stop()}}),a)})))()}}},V=R,B=Object(g["a"])(V,S,N,!1,null,null,null),L=B.exports;function F(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(c){return void a(c)}i.done?t(l):Promise.resolve(l).then(r,n)}function H(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){F(o,r,n,s,i,"next",e)}function i(e){F(o,r,n,s,i,"throw",e)}s(void 0)}))}}var K={name:"ResourceTabs",components:{Tabbed:p["a"],Tab:i["a"],Conditions:k,SortableTable:h["b"],RelatedResources:L},mixins:[v["a"]],props:{value:{type:Object,default:function(){return{}}},mode:{type:String,default:O["o"]},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0},alwaysShowEvents:{type:Boolean,default:!1}},fetch:function(){var e=this;return H(s.a.mark((function t(){var a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$store.getters["currentStore"](x["f"]),!e.$store.getters["".concat(a,"/schemaFor")](x["f"])){t.next=6;break}return e.hasEvents=!0,t.next=5,e.$store.dispatch("".concat(a,"/findAll"),{type:x["f"]});case 5:e.allEvents=t.sent;case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{hasEvents:null,allEvents:[]}},computed:{showConditions:function(){var e,t=this.$store.getters["currentStore"](this.value.type);return this.isView&&this.needConditions&&(null===(e=this.value)||void 0===e?void 0:e.type)&&this.$store.getters["".concat(t,"/pathExistsInSchema")](this.value.type,"status.conditions")},showEvents:function(){return this.isView&&this.needEvents&&!this.$fetchState.pending&&this.hasEvents&&(this.events.length||this.alwaysShowEvents)},showRelated:function(){return this.isView&&this.needRelated&&!this.$fetchState.pending},eventHeaders:function(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},events:function(){var e=this;return this.allEvents.filter((function(t){var a,r,n;return(null===(a=t.involvedObject)||void 0===a?void 0:a.uid)===(null===(r=e.value)||void 0===r||null===(n=r.metadata)||void 0===n?void 0:n.uid)})).map((function(t){return{reason:"".concat(t.reason||e.t("generic.unknown")).concat(t.count>1?" (".concat(t.count,")"):"").trim(),message:t.message||e.t("generic.unknown"),date:t.lastTimestamp||t.firstTimestamp||t.metadata.creationTimestamp,eventType:t.eventType}}))},conditionsHaveIssues:function(){var e,t;return!!this.showConditions&&(null===(e=this.value.status)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.some((function(e){return e.error})))}},mounted:function(){"undefined"!==typeof window&&(window.v=this.value)}},U=K,q=Object(g["a"])(U,u,d,!1,null,null,null),z=q.exports,G=a("53fe"),Y=a("65b0"),J=a("1832"),W=a("3811"),X=a("b12c"),Q=a("b0bd");function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){te(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ae(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(c){return void a(c)}i.done?t(l):Promise.resolve(l).then(r,n)}function re(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){ae(o,r,n,s,i,"next",e)}function i(e){ae(o,r,n,s,i,"throw",e)}s(void 0)}))}}var ne={name:"HarvesterVolume",components:{Tab:i["a"],UnitInput:c["a"],CruResource:l["a"],ResourceTabs:z,LabeledSelect:G["a"],NameNsDescription:Y["a"]},mixins:[v["a"]],fetch:function(){var e=this;return re(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("harvester/findAll",{type:x["h"].IMAGE});case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a,r;this.mode===O["g"]&&(this.value.spec.volumeMode="Block",this.value.spec.accessModes=["ReadWriteMany"]);var n=(null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t||null===(a=t.resources)||void 0===a||null===(r=a.requests)||void 0===r?void 0:r.storage)||null,o=Object(J["g"])(this.value,'metadata.annotations."'.concat(Q["f"].IMAGE_ID,'"')),s=o?"url":"blank";return{source:s,storage:n,imageId:o}},created:function(){this.registerBeforeHook(this.willSave,"willSave")},computed:{isBlank:function(){return"blank"===this.source},isVMImage:function(){return"url"===this.source},sourceOption:function(){return[{value:"blank",label:this.t("harvester.volume.sourceOptions.new")},{value:"url",label:this.t("harvester.volume.sourceOptions.vmImage")}]},interfaceOption:function(){return X["b"]},imageOption:function(){var e=this.$store.getters["harvester/all"](x["h"].IMAGE);return Object(E["a"])(e.filter((function(e){return e.isReady})).map((function(e){return{label:e.spec.displayName,value:e.id}})),"label")}},methods:{willSave:function(){this.update()},update:function(){var e="",t="longhorn";this.isVMImage&&this.imageId?(e=ee(ee({},this.value.metadata.annotations),{},te({},Q["f"].IMAGE_ID,this.imageId)),t="longhorn-".concat(this.imageId.split("/")[1])):e=ee({},this.value.metadata.annotations);var a=ee(ee({},this.value.spec),{},{resources:{requests:{storage:this.storage}},storageClassName:t});this.value.setAnnotations(e),this.$set(this.value,"spec",a)},generateYaml:function(){var e=Object(W["b"])(this.value);return e}}},oe=ne,se=Object(g["a"])(oe,r,n,!1,null,null,null);t["default"]=se.exports},"952a":function(e,t,a){var r=a("f328");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("50179958",r,!0,{sourceMap:!1,shadowMode:!1})},"9e10":function(e,t,a){"use strict";a("952a")},"9e58":function(e,t,a){"use strict";a("a20e")},a20e:function(e,t,a){var r=a("4fdf");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("022ac786",r,!0,{sourceMap:!1,shadowMode:!1})},a2df:function(e,t,a){var r=a("c3f0");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("7eabfbda",r,!0,{sourceMap:!1,shadowMode:!1})},a342:function(e,t,a){"use strict";a("2cc7")},adb6:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-e57285e4]:after,.clearfix[data-v-e57285e4]:before{content:" ";display:table}.clearfix[data-v-e57285e4]:after{clear:both}.list-unstyled[data-v-e57285e4]{margin:0;padding:0;list-style-type:none}.no-select[data-v-e57285e4]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-e57285e4]{resize:none}.hand[data-v-e57285e4]{cursor:pointer;cursor:hand}.fixed[data-v-e57285e4]{table-layout:fixed}.clip[data-v-e57285e4]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-e57285e4],.force-wrap[data-v-e57285e4]{word-wrap:break-word}.force-wrap[data-v-e57285e4]{white-space:normal}.bordered-section[data-v-e57285e4]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-e57285e4]{margin-bottom:20px;margin-top:20px}button[data-v-e57285e4]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}.row.name-ns-description[data-v-e57285e4]{max-height:61px}.row .namespace-select[data-v-e57285e4]  .labeled-select{min-width:40%}.row .namespace-select[data-v-e57285e4]  .labeled-select .v-select.inline.vs--single{padding-bottom:2px}.row.flip-direction[data-v-e57285e4]{flex-direction:column}.row.flip-direction.name-ns-description[data-v-e57285e4]{max-height:none}.row.flip-direction>div>*[data-v-e57285e4]{margin-bottom:20px}',""]),e.exports=t},ae5d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,mode:e.mode,resource:e.value,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save,cancel:e.done}},[a("NameNsDescription",{attrs:{mode:e.mode,namespaced:!0},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",{attrs:{"side-tabs":!0}},[a("Tab",{attrs:{name:"basics",label:e.t("harvester.host.tabs.basics"),weight:1}},[a("div",{staticClass:"mb-20"},[a("LabeledSelect",{attrs:{label:e.t("harvester.cloudTemplate.templateType"),disabled:!e.isCreate,options:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("div",{staticClass:"resource-yaml"},[a("YamlEditor",{ref:"yamlUser",staticClass:"yaml-editor",attrs:{"editor-mode":"view"===e.mode?"VIEW_CODE":"EDIT_CODE"},on:{onChanges:e.update},model:{value:e.config,callback:function(t){e.config=t},expression:"config"}})],1)])],1)],1)},n=[],o=a("ad61"),s=a("5ef9"),i=a("2e2b"),l=a("53fe"),c=a("65b0"),u=a("c349"),d=a("c78c"),p=a("b0bd");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={name:"HarvesterEditCloudTemplate",components:{Tab:s["a"],Tabbed:o["a"],YamlEditor:u["b"],CruResource:i["a"],LabeledSelect:l["a"],NameNsDescription:c["a"]},mixins:[d["a"]],data:function(){var e,t,a,r;return{config:(null===(e=this.value.data)||void 0===e?void 0:e.cloudInit)||"",type:(null===(t=this.value)||void 0===t||null===(a=t.metadata)||void 0===a||null===(r=a.labels)||void 0===r?void 0:r[p["f"].CLOUD_INIT])||"user"}},computed:{types:function(){return[{label:"User Data",value:"user"},{label:"Network Data",value:"network"}]}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},methods:{update:function(){this.value.data={cloudInit:this.config}},updateBeforeSave:function(){this.isCreate&&(this.value.metadata.labels=m(m({},this.value.metadata.labels),{},f({},p["f"].CLOUD_INIT,this.type)),this.value.data={cloudInit:this.config})}}},b=h,y=(a("2785"),a("d802")),g=Object(y["a"])(b,r,n,!1,null,"24d29898",null);t["default"]=g.exports},ae81:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.key-value{width:100%}.key-value .file-selector.role-link{text-transform:none;padding:0}.key-value .kv-container{display:grid;align-items:center;-moz-column-gap:20px;column-gap:20px}.key-value .kv-container label{margin-bottom:0}.key-value .kv-container .kv-item{width:100%;margin:10px 0 10px 0}.key-value .kv-container .kv-item.extra,.key-value .kv-container .kv-item.key{align-self:flex-start}.key-value .kv-container .kv-item.value textarea{padding:10px 10px 10px 10px}.key-value .kv-container .kv-item .text-monospace:not(.conceal){font-family:monospace,monospace}.key-value .remove{text-align:center}.key-value .remove BUTTON{padding:0}.key-value .title{margin-bottom:10px}.key-value .title .read-from-file{float:right}.key-value input{height:40px;line-height:1}.key-value .footer .protip{float:right;padding:5px 0}.key-value .download{text-align:right}.key-value .copy-value{padding:0 0 0 10px}',""]),e.exports=t},b61d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"can-yaml":!!e.showEditAsYaml,"apply-hooks":e.applyHooks},on:{finish:e.saveImage}},[a("NameNsDescription",{ref:"nd",attrs:{mode:e.mode,label:e.t("generic.name"),"name-key":"spec.displayName"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[a("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.image.tabs.basics"),weight:3}},[e.isCreate?a("RadioGroup",{attrs:{name:"model",options:["download","upload"],labels:[e.t("harvester.image.sourceType.download"),e.t("harvester.image.sourceType.upload")],mode:e.mode},model:{value:e.value.spec.sourceType,callback:function(t){e.$set(e.value.spec,"sourceType",t)},expression:"value.spec.sourceType"}}):e._e(),a("div",{staticClass:"row mb-20 mt-20"},[e.isCreateEdit?a("div",{staticClass:"col span-12"},[e.isEdit?a("LabeledInput",{staticClass:"mb-20",attrs:{mode:e.mode,disabled:e.isEdit,"label-key":"harvester.image.source"},model:{value:e.value.spec.sourceType,callback:function(t){e.$set(e.value.spec,"sourceType",t)},expression:"value.spec.sourceType"}}):e._e(),"download"===e.value.spec.sourceType?a("LabeledInput",{staticClass:"labeled-input--tooltip",attrs:{mode:e.mode,disabled:e.isEdit,required:"","label-key":"harvester.image.url",tooltip:e.t("harvester.image.urlTip",{},!0)},model:{value:e.value.spec.url,callback:function(t){e.$set(e.value.spec,"url",t)},expression:"value.spec.url"}}):a("div",[e.isCreate?a("button",{staticClass:"btn role-primary",attrs:{type:"button"},on:{click:e.selectFile}},[a("span",[e._v(" "+e._s(e.t("harvester.image.uploadFile"))+" ")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file",attrs:{id:"file",type:"file",accept:".qcow, .qcow2, .raw, .img, .iso"},on:{change:function(t){return e.handleFileUpload()}}})]):e._e(),e.uploadFileName?a("div",{staticClass:"fileName mt-5"},[a("span",{staticClass:"icon icon-file"}),e._v(" "+e._s(e.uploadFileName)+" ")]):e._e()])],1):a("div",{staticClass:"col span-12"},[a("LabelValue",{attrs:{name:e.t("harvester.image.fileName"),value:e.imageName}})],1)])],1),a("Tab",{staticClass:"bordered-table",attrs:{name:"labels",label:e.t("labels.labels.title"),weight:2}},[a("KeyValue",{key:"labels",ref:"labels",attrs:{value:e.value.labels,"add-label":e.t("labels.addLabel"),mode:e.mode,"pad-left":!1,"read-allowed":!1},on:{focusKey:e.focusKey,input:function(t){return e.value.setLabels(t)}},scopedSlots:e._u([{key:"key",fn:function(t){var r=t.row,n=t.keyName,o=t.queueUpdate;return[a("input",{directives:[{name:"model",rawName:"v-model",value:r[n],expression:"row[keyName]"}],ref:"key",attrs:{placeholder:e.t("keyValue.keyPlaceholder")},domProps:{value:r[n]},on:{input:[function(t){t.target.composing||e.$set(r,n,t.target.value)},o]}})]}},{key:"value",fn:function(t){var r=t.row,n=t.keyName,o=t.valueName,s=t.queueUpdate;return[e.internalAnnotations(r)?a("Select",{attrs:{searchable:!0,clearable:!1,options:e.calculateOptions(r[n])},on:{input:s},model:{value:r[o],callback:function(t){e.$set(r,o,t)},expression:"row[valueName]"}}):a("input",{directives:[{name:"model",rawName:"v-model",value:r[o],expression:"row[valueName]"}],attrs:{disabled:e.isView,placeholder:e.t("keyValue.valuePlaceholder"),autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"text"},domProps:{value:r[o]},on:{input:[function(t){t.target.composing||e.$set(r,o,t.target.value)},s]}})]}}])})],1)],1)],1)},n=[],o=a("56d4"),s=a.n(o),i=a("2e2b"),l=a("ad61"),c=a("5ef9"),u=a("d444"),d=a("2958"),p=a("65b0"),v=a("f032"),m=a("eb32"),f=a("81a6"),h=a("c78c"),b=a("6834"),y=a("4a70"),g=a("b0bd"),w=a("3792");function k(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(w){return void a(w)}i.done?t(l):Promise.resolve(l).then(r,n)}function x(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){k(o,r,n,s,i,"next",e)}function i(e){k(o,r,n,s,i,"throw",e)}s(void 0)}))}}var O="download",S="upload",N="raw_qcow2",C={name:"EditImage",components:{Tab:c["a"],Tabbed:l["a"],KeyValue:d["a"],Select:f["a"],CruResource:i["a"],LabeledInput:u["a"],NameNsDescription:p["a"],RadioGroup:v["b"],LabelValue:m["a"]},mixins:[h["a"]],props:{value:{type:Object,required:!0}},data:function(){return this.value.spec||this.$set(this.value,"spec",{sourceType:O}),this.value.metadata.name||(this.value.metadata.generateName="image-"),{url:this.value.spec.url,files:[],resource:"",headers:{},fileUrl:"",file:""}},computed:{uploadFileName:function(){var e;return(null===(e=this.file)||void 0===e?void 0:e.name)||""},imageName:function(){var e,t,a;return(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t||null===(a=t.annotations)||void 0===a?void 0:a[g["f"].IMAGE_NAME])||"-"},isCreateEdit:function(){return this.isCreate||this.isEdit},showEditAsYaml:function(){return this.value.spec.sourceType===O}},watch:{"value.spec.url":function(e){var t=this,a=e.trim(),r=a.split("/").pop(),n=r.split(".").pop().toLowerCase();this.value.spec.url=a,y["a"].includes(n)&&(Object.keys(this.value.labels).forEach((function(e,a){e===g["f"].IMAGE_SUFFIX&&t.$refs.labels.remove(a)})),"iso"===n?this.$refs.labels.add(g["f"].IMAGE_SUFFIX,n):this.$refs.labels.add(g["f"].IMAGE_SUFFIX,N),this.value.spec.displayName||this.$refs.nd.changeNameAndNamespace({text:r,selected:this.value.metadata.namespace}));var o=this.getOSType(a);o&&(Object.keys(this.value.labels).forEach((function(e,a){e===g["f"].OS_TYPE&&t.$refs.labels.remove(a)})),this.$refs.labels.add(g["f"].OS_TYPE,o.value))},"value.spec.sourceType":function(){var e,t;this.$set(this,"file",null),this.url="",null!==(e=this.$refs)&&void 0!==e&&null!==(t=e.file)&&void 0!==t&&t.value&&(this.$refs.file.value=null)}},methods:{saveImage:function(e){var t=this;return x(s.a.mark((function a(){var r,n;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.value.spec.displayName=(t.value.spec.displayName||"").trim(),t.value.spec.sourceType!==S||!t.isCreate){a.next=20;break}return a.prev=2,t.value.spec.url="",r=t.file,t.value.metadata.annotations[g["f"].IMAGE_NAME]=null===r||void 0===r?void 0:r.name,a.next=8,t.value.save();case 8:n=a.sent,n.uploadImage(r),e(!0),t.done(),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](2),t.errors=Object(w["a"])(a.t0),e(!1);case 18:a.next=21;break;case 20:t.save(e);case 21:case"end":return a.stop()}}),a,null,[[2,14]])})))()},handleFileUpload:function(){var e=this.$refs.file.files[0];this.file=e,this.value.spec.displayName||this.$refs.nd.changeNameAndNamespace({text:null===e||void 0===e?void 0:e.name,selected:this.value.metadata.namespace})},selectFile:function(){this.$refs.file.value=null,this.$refs.file.click()},internalAnnotations:function(e){var t=[g["f"].OS_TYPE,g["f"].IMAGE_SUFFIX];return t.find((function(t){return t===e.key}))},calculateOptions:function(e){return e===g["f"].OS_TYPE?b["b"]:e===g["f"].IMAGE_SUFFIX?[{label:"ISO",value:"iso"},{label:"raw/qcow2",value:N}]:[]},focusKey:function(){this.$refs.key.focus()},getOSType:function(e){if(e)return b["b"].find((function(t){return t.match?!!t.match.find((function(t){return e.toLowerCase().includes(t)}))&&t.value:!!e.toLowerCase().includes(t.value.toLowerCase())&&t.value}))}}},j=C,_=a("d802"),E=Object(_["a"])(j,r,n,!1,null,null,null);t["default"]=E.exports},bb351:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"keypair-card"},[a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.save}},[a("div",{staticClass:"header mb-20"},[e.isCreate?a("FileSelector",{staticClass:"btn btn-sm bg-primary mt-10",attrs:{label:e.t("generic.readFromFile"),accept:".pub"},on:{selected:e.onKeySelected}}):e._e()],1),a("NameNsDescription",{key:e.randomString,ref:"nd",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[a("Tab",{staticClass:"bordered-table",attrs:{name:"basic",label:e.t("harvester.sshKey.tabs.basics"),weight:1}},[a("LabeledInput",{attrs:{type:"multiline",mode:e.mode,"min-height":160,label:e.t("harvester.sshKey.keypair"),required:""},model:{value:e.publicKey,callback:function(t){e.publicKey=t},expression:"publicKey"}})],1)],1)],1)],1)},n=[],o=a("ad61"),s=a("5ef9"),i=a("2e2b"),l=a("d444"),c=a("65b0"),u=a("3204"),d=a("06f6"),p=a("c78c"),v={name:"HarvesterEditKeypair",components:{Tab:s["a"],Tabbed:o["a"],CruResource:i["a"],LabeledInput:l["a"],FileSelector:u["b"],NameNsDescription:c["a"]},mixins:[p["a"]],props:{value:{type:Object,required:!0}},data:function(){return this.value.spec||(this.value.spec={},this.value.metadata={name:""}),{publicKey:this.value.spec.publicKey||"",randomString:""}},watch:{publicKey:function(e){this.value.spec.publicKey=e;var t=e.split(/\s+/);3===t.length&&t[2].includes("@")&&!this.value.metadata.name&&(this.value.metadata.name=t[2].split("@")[0],this.randomString=Object(d["p"])(10).toLowerCase())}},methods:{onKeySelected:Object(u["a"])("publicKey")}},m=v,f=(a("9e10"),a("d802")),h=Object(f["a"])(m,r,n,!1,null,"86f38300",null);t["default"]=h.exports},bec6:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-4a1b65ce]:after,.clearfix[data-v-4a1b65ce]:before{content:" ";display:table}.clearfix[data-v-4a1b65ce]:after{clear:both}.list-unstyled[data-v-4a1b65ce]{margin:0;padding:0;list-style-type:none}.no-select[data-v-4a1b65ce]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-4a1b65ce]{resize:none}.hand[data-v-4a1b65ce]{cursor:pointer;cursor:hand}.fixed[data-v-4a1b65ce]{table-layout:fixed}.clip[data-v-4a1b65ce]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-4a1b65ce],.force-wrap[data-v-4a1b65ce]{word-wrap:break-word}.force-wrap[data-v-4a1b65ce]{white-space:normal}.bordered-section[data-v-4a1b65ce]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-4a1b65ce]{margin-bottom:20px;margin-top:20px}.operator .vs__dropdown-option[data-v-4a1b65ce]{padding:3px 6px 3px 6px!important}.remove-expression[data-v-4a1b65ce]{padding:8px;position:absolute;margin-bottom:10px;right:0;top:0;z-index:2}.remove-expression i[data-v-4a1b65ce]{font-size:2em}.remove-container[data-v-4a1b65ce]{display:flex;justify-content:center}.match-expression-header[data-v-4a1b65ce],.match-expression-row[data-v-4a1b65ce]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:5px 0;grid-gap:10px}.match-expression-header>LABEL[data-v-4a1b65ce],.match-expression-row>LABEL[data-v-4a1b65ce]{margin:0}.match-expression-header[data-v-4a1b65ce]:not(.view),.match-expression-row[data-v-4a1b65ce]:not(.view){grid-template-columns:1fr 1fr 1fr 100px}',""]),e.exports=t},c19c:function(e,t,a){"use strict";a("5ec9")},c21b:function(e,t,a){"use strict";a("9015")},c3f0:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-0b1088e0]:after,.clearfix[data-v-0b1088e0]:before{content:" ";display:table}.clearfix[data-v-0b1088e0]:after{clear:both}.list-unstyled[data-v-0b1088e0]{margin:0;padding:0;list-style-type:none}.no-select[data-v-0b1088e0]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-0b1088e0]{resize:none}.hand[data-v-0b1088e0]{cursor:pointer;cursor:hand}.fixed[data-v-0b1088e0]{table-layout:fixed}.clip[data-v-0b1088e0]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-0b1088e0],.force-wrap[data-v-0b1088e0]{word-wrap:break-word}.force-wrap[data-v-0b1088e0]{white-space:normal}.bordered-section[data-v-0b1088e0]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-0b1088e0]{margin-bottom:20px;margin-top:20px}.close[data-v-0b1088e0]{top:10px;right:10px;padding:0;position:absolute}.disk[data-v-0b1088e0]{position:relative}.disk .secret-name[data-v-0b1088e0]{height:61px}.disk[data-v-0b1088e0]:not(:last-of-type){padding-bottom:10px;margin-bottom:30px}.flex[data-v-0b1088e0]{display:flex;justify-content:space-between}.badge-state[data-v-0b1088e0]{padding:2px 5px}',""]),e.exports=t},c665:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Setting",{attrs:{"initial-value":e.initialValue,"live-value":e.liveValue,value:e.value}})},n=[],o=a("c78c"),s=a("414d"),i={name:"EditManagedChart",components:{Setting:s["default"]},mixins:[o["a"]],props:{value:{type:Object,required:!0}}},l=i,c=a("d802"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports},c910d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"node"},[a("NameNsDescription",{attrs:{value:e.value,namespaced:!1,mode:e.mode}}),a("Tabbed",{ref:"tabbed",staticClass:"mt-15",attrs:{"side-tabs":!0}},[a("Tab",{attrs:{name:"basics",weight:100,label:e.t("harvester.host.tabs.basics")}},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.detail.customName"),mode:e.mode},model:{value:e.customName,callback:function(t){e.customName=t},expression:"customName"}}),a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.host.detail.consoleUrl"),mode:e.mode},model:{value:e.consoleUrl,callback:function(t){e.consoleUrl=t},expression:"consoleUrl"}})],1),e.hasHostNetworksSchema?a("Tab",{attrs:{name:"network",weight:90,label:e.t("harvester.host.tabs.network")}},[a("InfoBox",{staticClass:"wrapper"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:"Type",mode:e.mode,disabled:!0},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledSelect",{staticClass:"mb-20",attrs:{options:e.nicsOptions,label:e.t("harvester.fields.PhysicalNic"),mode:e.mode,disabled:!e.hostNetworkResource},on:{input:e.update},scopedSlots:e._u([{key:"option",fn:function(t){return[[a("div",{staticClass:"nicOption"},[a("span",[e._v(e._s(t.value)+"("+e._s(t.type)+", "+e._s(t.state)+") ")]),e._v(" "),a("span",{staticClass:"pull-right"},[e._v(e._s(t.usedByManagementNetwork?e.t("harvester.host.detail.notRecommended"):""))])])]]}}],null,!1,2519002480),model:{value:e.nic,callback:function(t){e.nic=t},expression:"nic"}})],1)])])],1):e._e(),e.hasBlockDevicesSchema?a("Tab",{attrs:{name:"disk",weight:80,label:e.t("harvester.host.tabs.disk")}},[a("ArrayListGrouped",{attrs:{mode:e.mode},scopedSlots:e._u([{key:"default",fn:function(t){return[a("HarvesterDisk",{staticClass:"mb-20",attrs:{mode:e.mode,disks:e.disks},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"props.row.value"}})]}},{key:"add",fn:function(){return[e.isView?e._e():a("ButtonDropdown",{attrs:{"button-label":e.t("harvester.host.disk.add"),"dropdown-options":e.blockDeviceOpts,size:"sm",selectable:e.selectable},on:{"click-action":function(t){return e.addDisk(t.value)},"dd-button-action":e.ddButtonAction},scopedSlots:e._u([{key:"option",fn:function(t){return["group"===t.kind?[a("b",[e._v(" "+e._s(t.label)+" ")])]:a("div",[e._v(" "+e._s(t.label)+" ")])]}}],null,!1,3653410021)})]},proxy:!0},{key:"remove-button",fn:function(t){return[e.canRemove(t.row,t.i)&&!e.isView?a("button",{staticClass:"btn role-link close btn-sm",attrs:{type:"button"},on:{click:function(){return e.onRemove(t)}}},[a("i",{staticClass:"icon icon-2x icon-x"})]):a("span")]}}],null,!1,3987321056),model:{value:e.newDisks,callback:function(t){e.newDisks=t},expression:"newDisks"}})],1):e._e(),a("Tab",{attrs:{name:"labels","label-key":"harvester.host.tabs.labels"}},[a("KeyValue",{key:"labels",attrs:{value:e.value.filteredSystemLabels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:e.updateHostLabels}})],1)],1),e.showFormattedWarning?a("Banner",{attrs:{color:"warning",label:e.t("harvester.host.disk.forceFormatted.toolTip")}}):e._e(),a("Footer",{attrs:{mode:e.mode,errors:e.errors},on:{save:e.save,done:e.done}})],1)},n=[],o=a("56d4"),s=a.n(o),i=a("7fd6"),l=a.n(i),c=a("9ce4"),u=a("ad61"),d=a("5ef9"),p=a("9aaf"),v=a("6583"),m=a("65b0"),f=a("d444"),h=a("53fe"),b=a("d003"),y=a("98f3"),g=a("c78c"),w=a("b0bd"),k=a("56a4"),x=a("b837"),O=a("67ab"),S=a("e411"),N=a("06f6"),C=a("1832"),j=a("3792"),_=a("2958"),E=a("7592"),T=a("dffb"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"disk",on:{input:e.update}},[a("div",{staticClass:"mt-30"}),e.mountedMessage&&e.isProvisioned?a("Banner",{attrs:{color:"error",label:e.mountedMessage}}):e._e(),e.isFormatted?a("Banner",{attrs:{color:"info",label:e.formattedBannerLabel}}):e._e(),e.value.isNew?e._e():a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col span-12"},[a("div",{staticClass:"pull-right"},[e._v(" Conditions: "),a("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.readyCondiction.message,expression:"readyCondiction.message"}],staticClass:"mr-10 ml-10 state",attrs:{color:"True"===e.readyCondiction.status?"bg-success":"bg-error",icon:"True"===e.readyCondiction.status?"icon-checkmark":"icon-warning",label:"Ready"}}),a("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.schedulableCondiction.message,expression:"schedulableCondiction.message"}],staticClass:"mr-10 state",attrs:{color:"True"===e.schedulableCondiction.status?"bg-success":"bg-error",icon:"True"===e.schedulableCondiction.status?"icon-checkmark":"icon-warning",label:"Schedulable"}}),e.provisionPhase.label?a("BadgeState",{staticClass:"mr-10 state",attrs:{color:e.provisionPhase.color,icon:e.provisionPhase.icon,label:e.provisionPhase.label}}):e._e()],1)])]),e.value.isNew?e._e():a("div",{staticClass:"row mt-30"},[a("div",{staticClass:"col flex span-12"},[a("LabelValue",{attrs:{name:"Storage Available",value:e.value.storageAvailable}}),a("LabelValue",{attrs:{name:"Storage Scheduled",value:e.value.storageScheduled}}),a("LabelValue",{attrs:{name:"Storage Max",value:e.value.storageMaximum}})],1)]),a("hr",{staticClass:"mt-10"})]),a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-12"},[a("LabeledInput",{attrs:{label:e.t("generic.name"),disabled:!0},model:{value:e.value.displayName,callback:function(t){e.$set(e.value,"displayName",t)},expression:"value.displayName"}})],1)]),e.value.isNew&&!e.isFormatted?a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("RadioGroup",{attrs:{mode:e.mode,name:"forceFormatted","label-key":"harvester.host.disk.forceFormatted.label",labels:[e.t("generic.no"),e.t("harvester.host.disk.forceFormatted.yes")],options:[!1,!0],disabled:e.forceFormattedDisabled,"tooltip-key":"harvester.host.disk.forceFormatted.toolTip"},scopedSlots:e._u([{key:"1",fn:function(t){var r=t.option,n=t.listeners;return[a("RadioButton",e._g({attrs:{label:r.label,val:r.value,value:e.value.forceFormatted,disabled:e.forceFormattedDisabled&&!e.value.forceFormatted}},n))]}}],null,!1,1939983621),model:{value:e.value.forceFormatted,callback:function(t){e.$set(e.value,"forceFormatted",t)},expression:"value.forceFormatted"}})],1)]):e._e()],1)},P=[],A=a("eb32"),D=a("57ab"),$=a("f032"),M={components:{LabeledInput:f["a"],LabelValue:A["a"],BadgeState:D["a"],Banner:T["a"],RadioGroup:$["b"],RadioButton:$["a"]},props:{value:{type:Object,default:function(){return{}}},disks:{type:Array,default:function(){return[]}},mode:{type:String,default:"edit"}},data:function(){return{}},computed:{allowSchedulingOptions:function(){return[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}]},evictionRequestedOptions:function(){return[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}]},readyCondiction:function(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.Ready)||{}},schedulableCondiction:function(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.Schedulable)||{}},mountedMessage:function(){var e,t,a,r=(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.state)||{};return null!==r&&void 0!==r&&r.error?null===r||void 0===r?void 0:r.message:""},isProvisioned:function(){var e,t;return null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t?void 0:t.spec.fileSystem.provisioned},forceFormattedDisabled:function(){var e,t,a,r,n,o,s,i,l,c=null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r||null===(n=r.fileSystem)||void 0===n?void 0:n.LastFormattedAt,u=null===(o=this.value)||void 0===o||null===(s=o.blockDevice)||void 0===s||null===(i=s.status)||void 0===i||null===(l=i.deviceStatus)||void 0===l?void 0:l.fileSystem.type,d=["ext4","XFS"];return!!c||!d.includes(u)&&(!u||!this.canEditPath)},canEditPath:function(){return!!this.mountedMessage||!(!this.value.isNew||this.value.originPath)},isFormatted:function(){var e,t,a,r,n;return!(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r||null===(n=r.fileSystem)||void 0===n||!n.LastFormattedAt)},formattedBannerLabel:function(){var e,t,a,r,n,o=null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r||null===(n=r.fileSystem)||void 0===n?void 0:n.type,s=this.t("harvester.host.disk.lastFormattedAt.info");return o?"".concat(s," ").concat(this.t("harvester.host.disk.fileSystem.info",{system:o})):s},provisionPhase:function(){var e,t;return(null===(e=this.value)||void 0===e||null===(t=e.blockDevice)||void 0===t?void 0:t.provisionPhase)||{}}},methods:{update:function(){this.$emit("input",this.value)}}},R=M,V=(a("edb1"),a("d802")),B=Object(V["a"])(R,I,P,!1,null,"0b1088e0",null),L=B.exports;function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function U(e){return Y(e)||G(e)||z(e)||q()}function q(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e,t){if(e){if("string"===typeof e)return J(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?J(e,t):void 0}}function G(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Y(e){if(Array.isArray(e))return J(e)}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function W(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(j){return void a(j)}i.done?t(l):Promise.resolve(l).then(r,n)}function X(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){W(o,r,n,s,i,"next",e)}function i(e){W(o,r,n,s,i,"throw",e)}s(void 0)}))}}var Q="longhorn-system",Z={name:"HarvesterEditNode",components:{Footer:p["a"],Tabbed:u["a"],InfoBox:v["a"],Tab:d["a"],LabeledInput:f["a"],LabeledSelect:h["a"],NameNsDescription:m["a"],ArrayListGrouped:b["a"],HarvesterDisk:L,ButtonDropdown:y["a"],KeyValue:_["a"],Banner:T["a"]},mixins:[g["a"]],props:{value:{type:Object,required:!0}},fetch:function(){var e=this;return X(s.a.mark((function t(){var a,r,n,o,i,l,c,u,d;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters["currentProduct"].inStore,t.next=3,Object(x["a"])({hostNetworks:e.$store.dispatch("".concat(a,"/findAll"),{type:k["h"].NODE_NETWORK}),longhornNodes:e.$store.dispatch("".concat(a,"/findAll"),{type:k["m"].NODES}),blockDevices:e.$store.dispatch("".concat(a,"/findAll"),{type:k["h"].BLOCK_DEVICE})});case 3:r=t.sent,n=r.hostNetworks,o=n.find((function(t){return e.value.id===t.attachNodeName})),o&&(e.hostNetworkResource=o,e.nic=null===(i=o.spec)||void 0===i?void 0:i.nic,e.type=null===(l=o.spec)||void 0===l?void 0:l.type,e.nics=o.nics),c=e.$store.getters["".concat(a,"/all")](k["h"].BLOCK_DEVICE),u=c.filter((function(t){var a,r,n,o=null===t||void 0===t||null===(a=t.spec)||void 0===a||null===(r=a.fileSystem)||void 0===r?void 0:r.provisioned,s=(null===t||void 0===t||null===(n=t.spec)||void 0===n?void 0:n.nodeName)===e.value.id,i=Object(S["e"])(e.longhornDisks,"name",t.metadata.name);return o&&s&&!i})).map((function(e){var t,a,r,n,o,s,i;return{isNew:!0,name:null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.name,originPath:null===e||void 0===e||null===(a=e.spec)||void 0===a||null===(r=a.fileSystem)||void 0===r?void 0:r.mountPoint,path:null===e||void 0===e||null===(n=e.spec)||void 0===n||null===(o=n.fileSystem)||void 0===o?void 0:o.mountPoint,blockDevice:e,displayName:null===e||void 0===e?void 0:e.displayName,forceFormatted:(null===e||void 0===e||null===(s=e.spec)||void 0===s||null===(i=s.fileSystem)||void 0===i?void 0:i.forceFormatted)||!1}})),d=[].concat(U(e.longhornDisks),U(u)),e.disks=d,e.newDisks=Object(C["e"])(d),e.blockDeviceOpts=e.getBlockDeviceOpts();case 13:case"end":return t.stop()}}),t)})))()},data:function(){var e,t,a,r,n=(null===(e=this.value.metadata)||void 0===e||null===(t=e.annotations)||void 0===t?void 0:t[w["f"].HOST_CUSTOM_NAME])||"",o=(null===(a=this.value.metadata)||void 0===a||null===(r=a.annotations)||void 0===r?void 0:r[w["f"].HOST_CONSOLE_URL])||"";return{hostNetworkResource:null,customName:n,consoleUrl:o,type:"vlan",nic:"",nics:[],disks:[],newDisks:[],blockDevice:[],blockDeviceOpts:[]}},computed:H(H({},Object(c["a"])({t:"i18n/t"})),{},{nicsOptions:function(){var e=this;return this.nics.filter((function(e){return!(void 0!==e.masterIndex&&void 0===e.usedByVlanNetwork)})).map((function(t){var a=t.usedByManagementNetwork?"(".concat(e.$store.getters["i18n/t"]("harvester.host.detail.notRecommended"),")"):"",r="".concat(t.name,"(").concat(t.type,", ").concat(t.state,")   ").concat(a);return{value:t.name,label:r,state:t.state,type:t.type,usedByManagementNetwork:t.usedByManagementNetwork}}))},removedDisks:function(){var e=this,t=this.disks.filter((function(t){return!Object(S["e"])(e.newDisks,"name",t.name)}))||[];return t},longhornDisks:function(){var e,t,a=this,r=this.$store.getters["currentProduct"].inStore,n=this.$store.getters["".concat(r,"/byId")](k["m"].NODES,"".concat(Q,"/").concat(this.value.id)),o=(null===n||void 0===n||null===(e=n.status)||void 0===e?void 0:e.diskStatus)||{},s=(null===n||void 0===n||null===(t=n.spec)||void 0===t?void 0:t.disks)||{},i={increment:1024,minExponent:3,maxExponent:3,maxPrecision:2,suffix:"iB"},l=Object.keys(o).map((function(e){var t,n,l,c,u,d,p=a.$store.getters["".concat(r,"/byId")](k["h"].BLOCK_DEVICE,"".concat(Q,"/").concat(e));return H(H(H({},o[e]),null===s||void 0===s?void 0:s[e]),{},{name:e,isNew:!1,storageReserved:Object(O["e"])(null===(t=s[e])||void 0===t?void 0:t.storageReserved,i),storageAvailable:Object(O["e"])(null===(n=o[e])||void 0===n?void 0:n.storageAvailable,i),storageMaximum:Object(O["e"])(null===(l=o[e])||void 0===l?void 0:l.storageMaximum,i),storageScheduled:Object(O["e"])(null===(c=o[e])||void 0===c?void 0:c.storageScheduled,i),blockDevice:p,displayName:(null===p||void 0===p?void 0:p.displayName)||e,forceFormatted:(null===p||void 0===p||null===(u=p.spec)||void 0===u||null===(d=u.fileSystem)||void 0===d?void 0:d.forceFormatted)||!1})}));return l},showFormattedWarning:function(){var e=this.newDisks.filter((function(e){return e.forceFormatted&&e.isNew}))||[];return e.length>0},hasHostNetworksSchema:function(){var e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters["".concat(e,"/schemaFor")](k["h"].NODE_NETWORK)},hasBlockDevicesSchema:function(){var e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters["".concat(e,"/schemaFor")](k["h"].BLOCK_DEVICE)}}),watch:{customName:function(e){this.value.setAnnotation(w["f"].HOST_CUSTOM_NAME,e)},consoleUrl:function(e){this.value.setAnnotation(w["f"].HOST_CONSOLE_URL,e)},newDisks:function(){this.blockDeviceOpts=this.getBlockDeviceOpts()}},created:function(){this.registerAfterHook&&(this.registerAfterHook(this.saveHostNetwork),this.registerAfterHook(this.saveDisk))},methods:{saveHostNetwork:function(){this.hostNetworkResource&&this.hostNetworkResource.save()},update:function(){this.$set(this.hostNetworkResource.spec,"nic",this.nic)},addDisk:function(e){var t,a,r,n,o,s,i,l,c,u,d,p=Object(S["e"])(this.removedDisks,"blockDevice.id",e);if(p)return this.newDisks.push(p);var v=this.$store.getters["currentProduct"].inStore,m=this.$store.getters["".concat(v,"/byId")](k["h"].BLOCK_DEVICE,e),f=null===m||void 0===m||null===(t=m.spec)||void 0===t||null===(a=t.fileSystem)||void 0===a?void 0:a.mountPoint,h=null===m||void 0===m||null===(r=m.status)||void 0===r||null===(n=r.deviceStatus)||void 0===n||null===(o=n.fileSystem)||void 0===o?void 0:o.LastFormattedAt,b=!0,y=["ext4","XFS"];(h||y.includes(null===m||void 0===m||null===(s=m.status)||void 0===s||null===(i=s.deviceStatus)||void 0===i||null===(l=i.fileSystem)||void 0===l?void 0:l.type))&&(b=!1);var g=null===m||void 0===m||null===(c=m.metadata)||void 0===c?void 0:c.name;this.newDisks.push({name:g,path:f,allowScheduling:!1,evictionRequested:!1,storageReserved:0,isNew:!0,originPath:null===m||void 0===m||null===(u=m.spec)||void 0===u||null===(d=u.fileSystem)||void 0===d?void 0:d.mountPoint,blockDevice:m,displayName:null===m||void 0===m?void 0:m.displayName,forceFormatted:b})},saveDisk:function(){var e=this;return X(s.a.mark((function t(){var a,r,n,o;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$store.getters["currentProduct"].inStore,r=e.newDisks.filter((function(e){return e.isNew})),n=e.disks.filter((function(t){return!Object(S["e"])(e.newDisks,"name",t.name)&&t.blockDevice})),t.prev=3,t.next=6,Promise.all(r.map((function(t){var r=e.$store.getters["".concat(a,"/byId")](k["h"].BLOCK_DEVICE,"".concat(Q,"/").concat(t.name));return r.spec.fileSystem.provisioned=!0,r.spec.fileSystem.forceFormatted=t.forceFormatted,r.save()})));case 6:return t.next=8,Promise.all(n.map((function(t){var r=e.$store.getters["".concat(a,"/byId")](k["h"].BLOCK_DEVICE,"".concat(Q,"/").concat(t.name));return r.spec.fileSystem.provisioned=!1,r.save()})));case 8:e.$store.dispatch("growl/success",{title:e.t("harvester.notification.title.succeed"),message:e.t("harvester.host.disk.notification.success",{name:(null===(o=e.value.metadata)||void 0===o?void 0:o.name)||""})},{root:!0}),t.next=14;break;case 11:return t.prev=11,t.t0=t["catch"](3),t.abrupt("return",Promise.reject(Object(j["a"])(t.t0)));case 14:case"end":return t.stop()}}),t,null,[[3,11]])})))()},canRemove:function(e){var t;return!(null===e||void 0===e||null===(t=e.value)||void 0===t||!t.blockDevice)},onRemove:function(e){e.remove()},updateHostLabels:function(e){var t=this,a=/(k3s|kubernetes|kubevirt|harvesterhci|k3os)+\.io/,r=this.value.metadata.labels||{},n=l()(r,(function(e,t){return a.test(t)})),o=l()(r,(function(e,a){return Object(N["m"])(a,t.value.labelsToIgnoreRegexes)}));this.$set(this.value.metadata,"labels",H(H(H({},o),n),e))},selectable:function(e){return!e.disabled},getBlockDeviceOpts:function(){var e=this,t=this.$store.getters["currentProduct"].inStore,a=this.$store.getters["".concat(t,"/all")](k["h"].BLOCK_DEVICE),r=a.filter((function(t){var a,r,n,o,s,i,l,c=Object(S["e"])((null===t||void 0===t||null===(a=t.status)||void 0===a?void 0:a.conditions)||[],"type","AddedToNode"),u=Object(S["e"])(e.newDisks,"name",t.metadata.name),d=Object(S["e"])(e.removedDisks,"name",t.metadata.name),p=null===(r=t.status)||void 0===r||null===(n=r.deviceStatus)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.deviceType;return"disk"===p&&!((Object(S["e"])(e.disks||[],"name",t.metadata.name)||(null===t||void 0===t||null===(s=t.spec)||void 0===s?void 0:s.nodeName)!==e.value.id||c&&"False"!==(null===c||void 0===c?void 0:c.status)||null!==(i=t.spec)&&void 0!==i&&null!==(l=i.fileSystem)&&void 0!==l&&l.provisioned||u)&&!d)})).map((function(t){var a,r,n,o,s,i,l,c,u,d=null===(a=t.spec)||void 0===a?void 0:a.devPath,p=null===(r=t.status)||void 0===r||null===(n=r.deviceStatus)||void 0===n||null===(o=n.details)||void 0===o?void 0:o.deviceType,v=null===(s=t.status)||void 0===s||null===(i=s.deviceStatus)||void 0===i||null===(l=i.capacity)||void 0===l?void 0:l.sizeBytes,m=Object(O["e"])(v,{increment:1024}),f=null===(c=t.status)||void 0===c||null===(u=c.deviceStatus)||void 0===u?void 0:u.parentDevice,h=e.newDisks.find((function(e){var t,a,r;return(null===(t=e.blockDevice)||void 0===t||null===(a=t.status)||void 0===a||null===(r=a.deviceStatus)||void 0===r?void 0:r.parentDevice)===d})),b=t.displayName,y="".concat(b," (Type: ").concat(p,", Size: ").concat(m,")");return f&&(y="- ".concat(y)),{label:y,value:t.id,action:e.addDisk,kind:f?"":"group",disabled:!!(t.childParts.length>0||h),group:f||d,isParent:!!f}}));return Object(E["a"])(r,["group","isParent","label"])},ddButtonAction:function(){this.blockDeviceOpts=this.getBlockDeviceOpts()}}},ee=Z,te=(a("e737"),Object(V["a"])(ee,r,n,!1,null,"1a24c0d4",null));t["default"]=te.exports},c94a:function(e,t,a){var r=a("8a50");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("0329ab16",r,!0,{sourceMap:!1,shadowMode:!1})},d2f1:function(e,t,a){"use strict";a("380a4")},dd59:function(e,t){},e11f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Setting",{attrs:{value:e.value}})},n=[],o=a("414d"),s={name:"EditClusterNetwork",components:{Setting:o["default"]},props:{value:{type:Object,required:!0}}},i=s,l=a("d802"),c=Object(l["a"])(i,r,n,!1,null,null,null);t["default"]=c.exports},e737:function(e,t,a){"use strict";a("c94a")},edb1:function(e,t,a){"use strict";a("a2df")},f004:function(e,t,a){var r=a("6f57");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=a("0ed3").default;n("219d1760",r,!0,{sourceMap:!1,shadowMode:!1})},f11e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CruResource",{attrs:{"done-route":e.doneRoute,resource:e.value,mode:e.mode,errors:e.errors,"apply-hooks":e.applyHooks},on:{finish:e.saveNetwork}},[a("NameNsDescription",{ref:"nd",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("Tabbed",e._b({staticClass:"mt-15",attrs:{"side-tabs":!0}},"Tabbed",e.$attrs,!1),[a("Tab",{staticClass:"bordered-table",attrs:{name:"basics",label:e.t("harvester.network.tabs.basics"),weight:99}},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.fields.type"),disabled:!0,required:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("LabeledInput",{directives:[{name:"int-number",rawName:"v-int-number"}],staticClass:"mb-20",attrs:{required:"",type:"number",placeholder:"e.g. 1-4094",label:e.t("tableHeaders.networkVlan"),mode:e.mode},on:{input:e.input},model:{value:e.config.vlan,callback:function(t){e.$set(e.config,"vlan",e._n(t))},expression:"config.vlan"}})],1),a("Tab",{staticClass:"bordered-table",attrs:{name:"layer3Network",label:e.t("harvester.network.tabs.layer3Network"),weight:98}},[a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("RadioGroup",{attrs:{name:"layer3NetworkMode",label:e.t("harvester.network.layer3Network.mode.label"),mode:e.mode,options:e.modeOptions},model:{value:e.layer3Network.mode,callback:function(t){e.$set(e.layer3Network,"mode",t)},expression:"layer3Network.mode"}})],1)]),"auto"===e.layer3Network.mode?a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.serverIPAddr.label"),mode:e.mode},model:{value:e.layer3Network.serverIPAddr,callback:function(t){e.$set(e.layer3Network,"serverIPAddr",t)},expression:"layer3Network.serverIPAddr"}})],1)]):a("div",{staticClass:"row mt-10"},[a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.cidr.label"),placeholder:e.t("harvester.network.layer3Network.cidr.placeholder"),mode:e.mode,required:""},model:{value:e.layer3Network.cidr,callback:function(t){e.$set(e.layer3Network,"cidr",t)},expression:"layer3Network.cidr"}})],1),a("div",{staticClass:"col span-6"},[a("LabeledInput",{staticClass:"mb-20",attrs:{label:e.t("harvester.network.layer3Network.gateway.label"),placeholder:e.t("harvester.network.layer3Network.gateway.placeholder"),mode:e.mode,required:""},model:{value:e.layer3Network.gateway,callback:function(t){e.$set(e.layer3Network,"gateway",t)},expression:"layer3Network.gateway"}})],1)])])],1)],1)},n=[],o=a("56d4"),s=a.n(o),i=a("ad61"),l=a("5ef9"),c=a("2e2b"),u=a("d444"),d=a("f032"),p=a("65b0"),v=a("b0bd"),m=a("c78c");function f(e,t,a,r,n,o,s){try{var i=e[o](s),l=i.value}catch(c){return void a(c)}i.done?t(l):Promise.resolve(l).then(r,n)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function s(e){f(o,r,n,s,i,"next",e)}function i(e){f(o,r,n,s,i,"throw",e)}s(void 0)}))}}var b="auto",y="manual",g={components:{Tab:l["a"],Tabbed:i["a"],CruResource:c["a"],LabeledInput:u["a"],NameNsDescription:p["a"],RadioGroup:d["b"]},mixins:[m["a"]],props:{value:{type:Object,required:!0}},data:function(){var e,t,a=JSON.parse(this.value.spec.config),r=(null===(e=this.value)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.annotations)||{},n=JSON.parse(r[v["f"].NETWORK_ROUTE]||"{}");return{config:a,type:"L2VlanNetwork",layer3Network:{mode:n.mode||b,serverIPAddr:n.serverIPAddr||"",cidr:n.cidr||"",gateway:n.gateway||""}}},created:function(){this.registerBeforeHook&&this.registerBeforeHook(this.updateBeforeSave)},computed:{modeOptions:function(){return[{label:this.t("harvester.network.layer3Network.mode.auto"),value:b},{label:this.t("harvester.network.layer3Network.mode.manual"),value:y}]}},methods:{saveNetwork:function(e){var t=this;return h(s.a.mark((function a(){var r;return s.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=[],t.config.vlan||r.push(t.$store.getters["i18n/t"]("validation.required",{key:t.t("tableHeaders.networkVlan")})),t.layer3Network.mode===y&&(t.layer3Network.gateway||r.push(t.$store.getters["i18n/t"]("validation.required",{key:t.t("harvester.network.layer3Network.gateway.label")})),t.layer3Network.cidr||r.push(t.$store.getters["i18n/t"]("validation.required",{key:t.t("harvester.network.layer3Network.cidr.label")}))),!(r.length>0)){a.next=7;break}return e(!1),t.errors=r,a.abrupt("return",!1);case 7:return t.value.setAnnotation(v["f"].NETWORK_ROUTE,JSON.stringify(t.layer3Network)),a.next=10,t.save(e);case 10:case"end":return a.stop()}}),a)})))()},input:function(e){var t=/^([1-9]|[1-9][0-9]{1,2}|[1-3][0-9]{3}|40[0-9][0-4])$/;t.test(e)||""===e||(this.config.vlan=e>4094?4094:1)},updateBeforeSave:function(){this.value.setLabel(v["f"].NETWORK_TYPE,this.type),this.config.name=this.value.metadata.name,this.value.spec.config=JSON.stringify(this.config)}}},w=g,k=a("d802"),x=Object(k["a"])(w,r,n,!1,null,null,null);t["default"]=x.exports},f328:function(e,t,a){var r=a("5eaa");t=r(!1),t.push([e.i,'.clearfix[data-v-86f38300]:after,.clearfix[data-v-86f38300]:before{content:" ";display:table}.clearfix[data-v-86f38300]:after{clear:both}.list-unstyled[data-v-86f38300]{margin:0;padding:0;list-style-type:none}.no-select[data-v-86f38300]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.no-resize[data-v-86f38300]{resize:none}.hand[data-v-86f38300]{cursor:pointer;cursor:hand}.fixed[data-v-86f38300]{table-layout:fixed}.clip[data-v-86f38300]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-86f38300],.force-wrap[data-v-86f38300]{word-wrap:break-word}.force-wrap[data-v-86f38300]{white-space:normal}.bordered-section[data-v-86f38300]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-86f38300]{margin-bottom:20px;margin-top:20px}.header[data-v-86f38300]{display:flex;justify-content:flex-end}',""]),e.exports=t},f93c:function(e,t,a){"use strict";a.r(t);var r=a("8bb4");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var o,s,i=a("d802"),l=Object(i["a"])(r["default"],o,s,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=harvester-0.3.0.umd.min.edit.js.map